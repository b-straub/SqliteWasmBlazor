var e=null,a=null;(async()=>{try{e=new Worker("/_content/SqliteWasmBlazor/sqlite-wasm-worker.js",{type:"module"}),e.onmessage=async r=>{if(r.data.type==="ready"){console.log("[Worker Bridge] Worker ready"),a&&a();return}if(r.data.type==="error"){console.error("[Worker Bridge] Worker error:",r.data.error);return}if(r.data.id!==void 0)try{let o=await globalThis.getDotnetRuntime(0).getAssemblyExports("SqliteWasmBlazor.dll");if(r.data.binary&&r.data.data instanceof Uint8Array)o.SqliteWasmBlazor.SqliteWasmWorkerBridge.OnWorkerResponseBinary(r.data.id,r.data.data);else{let t=JSON.stringify(r.data);o.SqliteWasmBlazor.SqliteWasmWorkerBridge.OnWorkerResponse(t)}}catch(o){console.error("[Worker Bridge] Failed to call C# callback:",o)}},e.onerror=r=>{console.error("[Worker Bridge] Worker error event:",r)}}catch(r){console.error("[Worker Bridge] Failed to create worker:",r)}})();function s(r){if(!e)throw new Error("Worker not initialized");let o=JSON.parse(r);e.postMessage(o)}function l(r){a=r}var i={setLogLevel(r){if(!e){console.warn("[Worker Bridge] Worker not initialized, cannot set log level");return}e.postMessage({type:"setLogLevel",level:r})}};globalThis.sqliteWasmWorker={sendToWorker:s,setReadyCallback:l};globalThis.__sqliteWasmLogger=i;export{i as logger,s as sendToWorker,l as setReadyCallback};
