var gr=(()=>{var u=import.meta.url;return function(l={}){var p,r=l,S,P,Z=new Promise((e,t)=>{S=e,P=t}),be=typeof window=="object",qe=typeof importScripts=="function",Le=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",Ue=!be&&!Le&&!qe;let _e=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,_e.debugModule("globalThis.location =",globalThis.location);var Se=Object.assign({},r),Oe=[],Ve="./this.program",st=(e,t)=>{throw t},Ce="";function Ye(e){return r.locateFile?r.locateFile(e,Ce):Ce+e}var bt,At;(be||qe)&&(qe?Ce=self.location.href:typeof document<"u"&&document.currentScript&&(Ce=document.currentScript.src),u&&(Ce=u),Ce.startsWith("blob:")?Ce="":Ce=Ce.substr(0,Ce.replace(/[?#].*/,"").lastIndexOf("/")+1),qe&&(At=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),bt=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var It=r.print||console.log.bind(console),Re=r.printErr||console.error.bind(console);Object.assign(r,Se),Se=null,r.arguments&&(Oe=r.arguments),r.thisProgram&&(Ve=r.thisProgram);var kt=r.wasmBinary,ut,jt=!1,zt;function ft(e,t){e||Lt(t)}var Jt,Ke,wt,N,fe,G,X,oe,me,xe,ye;function De(){var e=ut.buffer;r.HEAP8=Ke=new Int8Array(e),r.HEAP16=N=new Int16Array(e),r.HEAPU8=wt=new Uint8Array(e),r.HEAPU16=fe=new Uint16Array(e),r.HEAP32=G=new Int32Array(e),r.HEAPU32=X=new Uint32Array(e),r.HEAPF32=oe=new Float32Array(e),r.HEAPF64=ye=new Float64Array(e),r.HEAP64=me=new BigInt64Array(e),r.HEAPU64=xe=new BigUint64Array(e)}if(r.wasmMemory)ut=r.wasmMemory;else{var Ne=r.INITIAL_MEMORY||16777216;ut=new WebAssembly.Memory({initial:Ne/65536,maximum:32768})}De();var ot=[],_t=[],Pt=[],Rr=[],On=!1;function Pn(){var e=r.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Rn)),ur(ot)}function Ln(){On=!0,!r.noFSInit&&!c.initialized&&c.init(),c.ignorePermissions=!1,xt.init(),ur(_t)}function Cn(){var e=r.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Nn)),ur(Rr)}function Rn(e){ot.unshift(e)}function Dn(e){_t.unshift(e)}function l_(e){}function Nn(e){Rr.unshift(e)}var Tt=0,ar=null,Wt=null;function a_(e){return e}function cr(e){Tt++,r.monitorRunDependencies?.(Tt)}function Xt(e){if(Tt--,r.monitorRunDependencies?.(Tt),Tt==0&&(ar!==null&&(clearInterval(ar),ar=null),Wt)){var t=Wt;Wt=null,t()}}function Lt(e){r.onAbort?.(e),e="Aborted("+e+")",Re(e),jt=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw P(t),t}var Mn="data:application/octet-stream;base64,",Dr=e=>e.startsWith(Mn),c_=e=>e.startsWith("file://");function Un(){if(r.locateFile){var e="sqlite3.wasm";return Dr(e)?e:Ye(e)}return new URL("sqlite3.wasm",import.meta.url).href}var _r;function Nr(e){if(e==_r&&kt)return new Uint8Array(kt);if(At)return At(e);throw"both async and sync fetching of the wasm failed"}function Bn(e){return kt?Promise.resolve().then(()=>Nr(e)):bt(e).then(t=>new Uint8Array(t),()=>Nr(e))}function Mr(e,t,n){return Bn(e).then(o=>WebAssembly.instantiate(o,t)).then(n,o=>{Re(`failed to asynchronously prepare wasm: ${o}`),Lt(o)})}function jn(e,t,n,o){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Dr(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var i=WebAssembly.instantiateStreaming(s,n);return i.then(o,function(g){return Re(`wasm streaming compile failed: ${g}`),Re("falling back to ArrayBuffer instantiation"),Mr(t,n,o)})}):Mr(t,n,o)}function zn(){return{env:Vr,wasi_snapshot_preview1:Vr}}function Wn(){var e=zn();function t(o,s){return y=o.exports,Dn(y.__wasm_call_ctors),Xt("wasm-instantiate"),y}cr("wasm-instantiate");function n(o){t(o.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(o){Re(`Module.instantiateWasm callback failed with error: ${o}`),P(o)}return _r??=Un(),jn(kt,_r,e,n).catch(P),{}}function __(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var ur=e=>{e.forEach(t=>t(r))};function u_(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return Ke[e];case"i8":return Ke[e];case"i16":return N[e>>1];case"i32":return G[e>>2];case"i64":return me[e>>3];case"float":return oe[e>>2];case"double":return ye[e>>3];case"*":return X[e>>2];default:Lt(`invalid type for getValue: ${t}`)}}var f_=r.noExitRuntime||!0;function d_(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":Ke[e]=t;break;case"i8":Ke[e]=t;break;case"i16":N[e>>1]=t;break;case"i32":G[e>>2]=t;break;case"i64":me[e>>3]=BigInt(t);break;case"float":oe[e>>2]=t;break;case"double":ye[e>>3]=t;break;case"*":X[e>>2]=t;break;default:Lt(`invalid type for setValue: ${n}`)}}var p_=e=>$r(e),h_=()=>Gr(),Be={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,o=e.length-1;o>=0;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Be.isAbs(e),n=e.substr(-1)==="/";return e=Be.normalizeArray(e.split("/").filter(o=>!!o),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Be.splitPath(e),n=t[0],o=t[1];return!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},basename:e=>{if(e==="/")return"/";e=Be.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>Be.normalize(e.join("/")),join2:(e,t)=>Be.normalize(e+"/"+t)},Qn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Lt("initRandomDevice")},Ur=e=>(Ur=Qn())(e),mt={resolve:(...e)=>{for(var t="",n=!1,o=e.length-1;o>=-1&&!n;o--){var s=o>=0?e[o]:c.cwd();if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,n=Be.isAbs(s)}return t=Be.normalizeArray(t.split("/").filter(i=>!!i),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=mt.resolve(e).substr(1),t=mt.resolve(t).substr(1);function n(H){for(var te=0;te<H.length&&H[te]==="";te++);for(var Y=H.length-1;Y>=0&&H[Y]==="";Y--);return te>Y?[]:H.slice(te,Y-te+1)}for(var o=n(e.split("/")),s=n(t.split("/")),i=Math.min(o.length,s.length),g=i,q=0;q<i;q++)if(o[q]!==s[q]){g=q;break}for(var B=[],q=g;q<o.length;q++)B.push("..");return B=B.concat(s.slice(g)),B.join("/")}},Br=typeof TextDecoder<"u"?new TextDecoder:void 0,Ct=(e,t=0,n=NaN)=>{for(var o=t+n,s=t;e[s]&&!(s>=o);)++s;if(s-t>16&&e.buffer&&Br)return Br.decode(e.subarray(t,s));for(var i="";t<s;){var g=e[t++];if(!(g&128)){i+=String.fromCharCode(g);continue}var q=e[t++]&63;if((g&224)==192){i+=String.fromCharCode((g&31)<<6|q);continue}var B=e[t++]&63;if((g&240)==224?g=(g&15)<<12|q<<6|B:g=(g&7)<<18|q<<12|B<<6|e[t++]&63,g<65536)i+=String.fromCharCode(g);else{var H=g-65536;i+=String.fromCharCode(55296|H>>10,56320|H&1023)}}return i},fr=[],Yt=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o<=127?t++:o<=2047?t+=2:o>=55296&&o<=57343?(t+=4,++n):t+=3}return t},dr=(e,t,n,o)=>{if(!(o>0))return 0;for(var s=n,i=n+o-1,g=0;g<e.length;++g){var q=e.charCodeAt(g);if(q>=55296&&q<=57343){var B=e.charCodeAt(++g);q=65536+((q&1023)<<10)|B&1023}if(q<=127){if(n>=i)break;t[n++]=q}else if(q<=2047){if(n+1>=i)break;t[n++]=192|q>>6,t[n++]=128|q&63}else if(q<=65535){if(n+2>=i)break;t[n++]=224|q>>12,t[n++]=128|q>>6&63,t[n++]=128|q&63}else{if(n+3>=i)break;t[n++]=240|q>>18,t[n++]=128|q>>12&63,t[n++]=128|q>>6&63,t[n++]=128|q&63}}return t[n]=0,n-s};function jr(e,t,n){var o=n>0?n:Yt(e)+1,s=new Array(o),i=dr(e,s,0,s.length);return t&&(s.length=i),s}var Vn=()=>{if(!fr.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;fr=jr(e,!0)}return fr.shift()},xt={ttys:[],init(){},shutdown(){},register(e,t){xt.ttys[e]={input:[],output:[],ops:t},c.registerDevice(e,xt.stream_ops)},stream_ops:{open(e){var t=xt.ttys[e.node.rdev];if(!t)throw new c.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,o,s){if(!e.tty||!e.tty.ops.get_char)throw new c.ErrnoError(60);for(var i=0,g=0;g<o;g++){var q;try{q=e.tty.ops.get_char(e.tty)}catch{throw new c.ErrnoError(29)}if(q===void 0&&i===0)throw new c.ErrnoError(6);if(q==null)break;i++,t[n+g]=q}return i&&(e.node.timestamp=Date.now()),i},write(e,t,n,o,s){if(!e.tty||!e.tty.ops.put_char)throw new c.ErrnoError(60);try{for(var i=0;i<o;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch{throw new c.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char(e){return Vn()},put_char(e,t){t===null||t===10?(It(Ct(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(It(Ct(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Re(Ct(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Re(Ct(e.output)),e.output=[])}}},Hn=(e,t)=>{wt.fill(0,e,e+t)},zr=(e,t)=>Math.ceil(e/t)*t,Wr=e=>{e=zr(e,65536);var t=Hr(65536,e);return t&&Hn(t,e),t},Ae={ops_table:null,mount(e){return Ae.createNode(null,"/",16895,0)},createNode(e,t,n,o){if(c.isBlkdev(n)||c.isFIFO(n))throw new c.ErrnoError(63);Ae.ops_table||={dir:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr,lookup:Ae.node_ops.lookup,mknod:Ae.node_ops.mknod,rename:Ae.node_ops.rename,unlink:Ae.node_ops.unlink,rmdir:Ae.node_ops.rmdir,readdir:Ae.node_ops.readdir,symlink:Ae.node_ops.symlink},stream:{llseek:Ae.stream_ops.llseek}},file:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr},stream:{llseek:Ae.stream_ops.llseek,read:Ae.stream_ops.read,write:Ae.stream_ops.write,allocate:Ae.stream_ops.allocate,mmap:Ae.stream_ops.mmap,msync:Ae.stream_ops.msync}},link:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr,readlink:Ae.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr},stream:c.chrdev_stream_ops}};var s=c.createNode(e,t,n,o);return c.isDir(s.mode)?(s.node_ops=Ae.ops_table.dir.node,s.stream_ops=Ae.ops_table.dir.stream,s.contents={}):c.isFile(s.mode)?(s.node_ops=Ae.ops_table.file.node,s.stream_ops=Ae.ops_table.file.stream,s.usedBytes=0,s.contents=null):c.isLink(s.mode)?(s.node_ops=Ae.ops_table.link.node,s.stream_ops=Ae.ops_table.link.stream):c.isChrdev(s.mode)&&(s.node_ops=Ae.ops_table.chrdev.node,s.stream_ops=Ae.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var o=1024*1024;t=Math.max(t,n*(n<o?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=c.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,c.isDir(e.mode)?t.size=4096:c.isFile(e.mode)?t.size=e.usedBytes:c.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&Ae.resizeFileStorage(e,t.size)},lookup(e,t){throw c.genericErrors[44]},mknod(e,t,n,o){return Ae.createNode(e,t,n,o)},rename(e,t,n){if(c.isDir(e.mode)){var o;try{o=c.lookupNode(t,n)}catch{}if(o)for(var s in o.contents)throw new c.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=c.lookupNode(e,t);for(var o in n.contents)throw new c.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var o=Ae.createNode(e,t,41471,0);return o.link=n,o},readlink(e){if(!c.isLink(e.mode))throw new c.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,o,s){var i=e.node.contents;if(s>=e.node.usedBytes)return 0;var g=Math.min(e.node.usedBytes-s,o);if(g>8&&i.subarray)t.set(i.subarray(s,s+g),n);else for(var q=0;q<g;q++)t[n+q]=i[s+q];return g},write(e,t,n,o,s,i){if(t.buffer===Ke.buffer&&(i=!1),!o)return 0;var g=e.node;if(g.timestamp=Date.now(),t.subarray&&(!g.contents||g.contents.subarray)){if(i)return g.contents=t.subarray(n,n+o),g.usedBytes=o,o;if(g.usedBytes===0&&s===0)return g.contents=t.slice(n,n+o),g.usedBytes=o,o;if(s+o<=g.usedBytes)return g.contents.set(t.subarray(n,n+o),s),o}if(Ae.expandFileStorage(g,s+o),g.contents.subarray&&t.subarray)g.contents.set(t.subarray(n,n+o),s);else for(var q=0;q<o;q++)g.contents[s+q]=t[n+q];return g.usedBytes=Math.max(g.usedBytes,s+o),o},llseek(e,t,n){var o=t;if(n===1?o+=e.position:n===2&&c.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new c.ErrnoError(28);return o},allocate(e,t,n){Ae.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,o,s){if(!c.isFile(e.node.mode))throw new c.ErrnoError(43);var i,g,q=e.node.contents;if(!(s&2)&&q&&q.buffer===Ke.buffer)g=!1,i=q.byteOffset;else{if(g=!0,i=Wr(t),!i)throw new c.ErrnoError(48);q&&((n>0||n+t<q.length)&&(q.subarray?q=q.subarray(n,n+t):q=Array.prototype.slice.call(q,n,n+t)),Ke.set(q,i))}return{ptr:i,allocated:g}},msync(e,t,n,o,s){return Ae.stream_ops.write(e,t,0,o,n,!1),0}}},$n=(e,t,n,o)=>{var s=o?"":`al ${e}`;bt(e).then(i=>{t(new Uint8Array(i)),s&&Xt(s)},i=>{if(n)n();else throw`Loading data file "${e}" failed.`}),s&&cr(s)},Gn=(e,t,n,o,s,i)=>{c.createDataFile(e,t,n,o,s,i)},Kn=r.preloadPlugins||[],Jn=(e,t,n,o)=>{typeof Browser<"u"&&Browser.init();var s=!1;return Kn.forEach(i=>{s||i.canHandle(t)&&(i.handle(e,t,n,o),s=!0)}),s},Xn=(e,t,n,o,s,i,g,q,B,H)=>{var te=t?mt.resolve(Be.join2(e,t)):e,Y=`cp ${te}`;function ie(L){function C(M){H?.(),q||Gn(e,t,M,o,s,B),i?.(),Xt(Y)}Jn(L,te,C,()=>{g?.(),Xt(Y)})||C(L)}cr(Y),typeof n=="string"?$n(n,ie,g):ie(n)},Yn=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},pr=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},c={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=c.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=o,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return c.isDir(this.mode)}get isDevice(){return c.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=mt.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new c.ErrnoError(32);for(var o=e.split("/").filter(Y=>!!Y),s=c.root,i="/",g=0;g<o.length;g++){var q=g===o.length-1;if(q&&t.parent)break;if(s=c.lookupNode(s,o[g]),i=Be.join2(i,o[g]),c.isMountpoint(s)&&(!q||q&&t.follow_mount)&&(s=s.mounted.root),!q||t.follow)for(var B=0;c.isLink(s.mode);){var H=c.readlink(i);i=mt.resolve(Be.dirname(i),H);var te=c.lookupPath(i,{recurse_count:t.recurse_count+1});if(s=te.node,B++>40)throw new c.ErrnoError(32)}}return{path:i,node:s}},getPath(e){for(var t;;){if(c.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%c.nameTable.length},hashAddNode(e){var t=c.hashName(e.parent.id,e.name);e.name_next=c.nameTable[t],c.nameTable[t]=e},hashRemoveNode(e){var t=c.hashName(e.parent.id,e.name);if(c.nameTable[t]===e)c.nameTable[t]=e.name_next;else for(var n=c.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=c.mayLookup(e);if(n)throw new c.ErrnoError(n);for(var o=c.hashName(e.id,t),s=c.nameTable[o];s;s=s.name_next){var i=s.name;if(s.parent.id===e.id&&i===t)return s}return c.lookup(e,t)},createNode(e,t,n,o){var s=new c.FSNode(e,t,n,o);return c.hashAddNode(s),s},destroyNode(e){c.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return c.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!c.isDir(e.mode))return 54;var t=c.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=c.lookupNode(e,t);return 20}catch{}return c.nodePermissions(e,"wx")},mayDelete(e,t,n){var o;try{o=c.lookupNode(e,t)}catch(i){return i.errno}var s=c.nodePermissions(e,"wx");if(s)return s;if(n){if(!c.isDir(o.mode))return 54;if(c.isRoot(o)||c.getPath(o)===c.cwd())return 10}else if(c.isDir(o.mode))return 31;return 0},mayOpen(e,t){return e?c.isLink(e.mode)?32:c.isDir(e.mode)&&(c.flagsToPermissionString(t)!=="r"||t&512)?31:c.nodePermissions(e,c.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=c.MAX_OPEN_FDS;e++)if(!c.streams[e])return e;throw new c.ErrnoError(33)},getStreamChecked(e){var t=c.getStream(e);if(!t)throw new c.ErrnoError(8);return t},getStream:e=>c.streams[e],createStream(e,t=-1){return e=Object.assign(new c.FSStream,e),t==-1&&(t=c.nextfd()),e.fd=t,c.streams[t]=e,e},closeStream(e){c.streams[e]=null},dupStream(e,t=-1){var n=c.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=c.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new c.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){c.devices[e]={stream_ops:t}},getDevice:e=>c.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var o=n.pop();t.push(o),n.push(...o.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),c.syncFSRequests++,c.syncFSRequests>1&&Re(`warning: ${c.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=c.getMounts(c.root.mount),o=0;function s(g){return c.syncFSRequests--,t(g)}function i(g){if(g)return i.errored?void 0:(i.errored=!0,s(g));++o>=n.length&&s(null)}n.forEach(g=>{if(!g.type.syncfs)return i(null);g.type.syncfs(g,e,i)})},mount(e,t,n){var o=n==="/",s=!n,i;if(o&&c.root)throw new c.ErrnoError(10);if(!o&&!s){var g=c.lookupPath(n,{follow_mount:!1});if(n=g.path,i=g.node,c.isMountpoint(i))throw new c.ErrnoError(10);if(!c.isDir(i.mode))throw new c.ErrnoError(54)}var q={type:e,opts:t,mountpoint:n,mounts:[]},B=e.mount(q);return B.mount=q,q.root=B,o?c.root=B:i&&(i.mounted=q,i.mount&&i.mount.mounts.push(q)),B},unmount(e){var t=c.lookupPath(e,{follow_mount:!1});if(!c.isMountpoint(t.node))throw new c.ErrnoError(28);var n=t.node,o=n.mounted,s=c.getMounts(o);Object.keys(c.nameTable).forEach(g=>{for(var q=c.nameTable[g];q;){var B=q.name_next;s.includes(q.mount)&&c.destroyNode(q),q=B}}),n.mounted=null;var i=n.mount.mounts.indexOf(o);n.mount.mounts.splice(i,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var o=c.lookupPath(e,{parent:!0}),s=o.node,i=Be.basename(e);if(!i||i==="."||i==="..")throw new c.ErrnoError(28);var g=c.mayCreate(s,i);if(g)throw new c.ErrnoError(g);if(!s.node_ops.mknod)throw new c.ErrnoError(63);return s.node_ops.mknod(s,i,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,c.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,c.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),o="",s=0;s<n.length;++s)if(n[s]){o+="/"+n[s];try{c.mkdir(o,t)}catch(i){if(i.errno!=20)throw i}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,c.mknod(e,t,n)},symlink(e,t){if(!mt.resolve(e))throw new c.ErrnoError(44);var n=c.lookupPath(t,{parent:!0}),o=n.node;if(!o)throw new c.ErrnoError(44);var s=Be.basename(t),i=c.mayCreate(o,s);if(i)throw new c.ErrnoError(i);if(!o.node_ops.symlink)throw new c.ErrnoError(63);return o.node_ops.symlink(o,s,e)},rename(e,t){var n=Be.dirname(e),o=Be.dirname(t),s=Be.basename(e),i=Be.basename(t),g,q,B;if(g=c.lookupPath(e,{parent:!0}),q=g.node,g=c.lookupPath(t,{parent:!0}),B=g.node,!q||!B)throw new c.ErrnoError(44);if(q.mount!==B.mount)throw new c.ErrnoError(75);var H=c.lookupNode(q,s),te=mt.relative(e,o);if(te.charAt(0)!==".")throw new c.ErrnoError(28);if(te=mt.relative(t,n),te.charAt(0)!==".")throw new c.ErrnoError(55);var Y;try{Y=c.lookupNode(B,i)}catch{}if(H!==Y){var ie=c.isDir(H.mode),L=c.mayDelete(q,s,ie);if(L)throw new c.ErrnoError(L);if(L=Y?c.mayDelete(B,i,ie):c.mayCreate(B,i),L)throw new c.ErrnoError(L);if(!q.node_ops.rename)throw new c.ErrnoError(63);if(c.isMountpoint(H)||Y&&c.isMountpoint(Y))throw new c.ErrnoError(10);if(B!==q&&(L=c.nodePermissions(q,"w"),L))throw new c.ErrnoError(L);c.hashRemoveNode(H);try{q.node_ops.rename(H,B,i),H.parent=B}catch(C){throw C}finally{c.hashAddNode(H)}}},rmdir(e){var t=c.lookupPath(e,{parent:!0}),n=t.node,o=Be.basename(e),s=c.lookupNode(n,o),i=c.mayDelete(n,o,!0);if(i)throw new c.ErrnoError(i);if(!n.node_ops.rmdir)throw new c.ErrnoError(63);if(c.isMountpoint(s))throw new c.ErrnoError(10);n.node_ops.rmdir(n,o),c.destroyNode(s)},readdir(e){var t=c.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new c.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=c.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new c.ErrnoError(44);var o=Be.basename(e),s=c.lookupNode(n,o),i=c.mayDelete(n,o,!1);if(i)throw new c.ErrnoError(i);if(!n.node_ops.unlink)throw new c.ErrnoError(63);if(c.isMountpoint(s))throw new c.ErrnoError(10);n.node_ops.unlink(n,o),c.destroyNode(s)},readlink(e){var t=c.lookupPath(e),n=t.node;if(!n)throw new c.ErrnoError(44);if(!n.node_ops.readlink)throw new c.ErrnoError(28);return mt.resolve(c.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=c.lookupPath(e,{follow:!t}),o=n.node;if(!o)throw new c.ErrnoError(44);if(!o.node_ops.getattr)throw new c.ErrnoError(63);return o.node_ops.getattr(o)},lstat(e){return c.stat(e,!0)},chmod(e,t,n){var o;if(typeof e=="string"){var s=c.lookupPath(e,{follow:!n});o=s.node}else o=e;if(!o.node_ops.setattr)throw new c.ErrnoError(63);o.node_ops.setattr(o,{mode:t&4095|o.mode&-4096,timestamp:Date.now()})},lchmod(e,t){c.chmod(e,t,!0)},fchmod(e,t){var n=c.getStreamChecked(e);c.chmod(n.node,t)},chown(e,t,n,o){var s;if(typeof e=="string"){var i=c.lookupPath(e,{follow:!o});s=i.node}else s=e;if(!s.node_ops.setattr)throw new c.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown(e,t,n){c.chown(e,t,n,!0)},fchown(e,t,n){var o=c.getStreamChecked(e);c.chown(o.node,t,n)},truncate(e,t){if(t<0)throw new c.ErrnoError(28);var n;if(typeof e=="string"){var o=c.lookupPath(e,{follow:!0});n=o.node}else n=e;if(!n.node_ops.setattr)throw new c.ErrnoError(63);if(c.isDir(n.mode))throw new c.ErrnoError(31);if(!c.isFile(n.mode))throw new c.ErrnoError(28);var s=c.nodePermissions(n,"w");if(s)throw new c.ErrnoError(s);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=c.getStreamChecked(e);if(!(n.flags&2097155))throw new c.ErrnoError(28);c.truncate(n.node,t)},utime(e,t,n){var o=c.lookupPath(e,{follow:!0}),s=o.node;s.node_ops.setattr(s,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new c.ErrnoError(44);t=typeof t=="string"?Yn(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var o;if(typeof e=="object")o=e;else{e=Be.normalize(e);try{var s=c.lookupPath(e,{follow:!(t&131072)});o=s.node}catch{}}var i=!1;if(t&64)if(o){if(t&128)throw new c.ErrnoError(20)}else o=c.mknod(e,n,0),i=!0;if(!o)throw new c.ErrnoError(44);if(c.isChrdev(o.mode)&&(t&=-513),t&65536&&!c.isDir(o.mode))throw new c.ErrnoError(54);if(!i){var g=c.mayOpen(o,t);if(g)throw new c.ErrnoError(g)}t&512&&!i&&c.truncate(o,0),t&=-131713;var q=c.createStream({node:o,path:c.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return q.stream_ops.open&&q.stream_ops.open(q),r.logReadFiles&&!(t&1)&&(e in c.readFiles||(c.readFiles[e]=1)),q},close(e){if(c.isClosed(e))throw new c.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{c.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new c.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new c.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,o,s){if(o<0||s<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===1)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.read)throw new c.ErrnoError(28);var i=typeof s<"u";if(!i)s=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var g=e.stream_ops.read(e,t,n,o,s);return i||(e.position+=g),g},write(e,t,n,o,s,i){if(o<0||s<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if(!(e.flags&2097155))throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.write)throw new c.ErrnoError(28);e.seekable&&e.flags&1024&&c.llseek(e,0,2);var g=typeof s<"u";if(!g)s=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var q=e.stream_ops.write(e,t,n,o,s,i);return g||(e.position+=q),q},allocate(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(t<0||n<=0)throw new c.ErrnoError(28);if(!(e.flags&2097155))throw new c.ErrnoError(8);if(!c.isFile(e.node.mode)&&!c.isDir(e.node.mode))throw new c.ErrnoError(43);if(!e.stream_ops.allocate)throw new c.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,o,s){if(o&2&&!(s&2)&&(e.flags&2097155)!==2)throw new c.ErrnoError(2);if((e.flags&2097155)===1)throw new c.ErrnoError(2);if(!e.stream_ops.mmap)throw new c.ErrnoError(43);if(!t)throw new c.ErrnoError(28);return e.stream_ops.mmap(e,t,n,o,s)},msync(e,t,n,o,s){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,o,s):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new c.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,o=c.open(e,t.flags),s=c.stat(e),i=s.size,g=new Uint8Array(i);return c.read(o,g,0,i,0),t.encoding==="utf8"?n=Ct(g):t.encoding==="binary"&&(n=g),c.close(o),n},writeFile(e,t,n={}){n.flags=n.flags||577;var o=c.open(e,n.flags,n.mode);if(typeof t=="string"){var s=new Uint8Array(Yt(t)+1),i=dr(t,s,0,s.length);c.write(o,s,0,i,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))c.write(o,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");c.close(o)},cwd:()=>c.currentPath,chdir(e){var t=c.lookupPath(e,{follow:!0});if(t.node===null)throw new c.ErrnoError(44);if(!c.isDir(t.node.mode))throw new c.ErrnoError(54);var n=c.nodePermissions(t.node,"x");if(n)throw new c.ErrnoError(n);c.currentPath=t.path},createDefaultDirectories(){c.mkdir("/tmp"),c.mkdir("/home"),c.mkdir("/home/web_user")},createDefaultDevices(){c.mkdir("/dev"),c.registerDevice(c.makedev(1,3),{read:()=>0,write:(o,s,i,g,q)=>g}),c.mkdev("/dev/null",c.makedev(1,3)),xt.register(c.makedev(5,0),xt.default_tty_ops),xt.register(c.makedev(6,0),xt.default_tty1_ops),c.mkdev("/dev/tty",c.makedev(5,0)),c.mkdev("/dev/tty1",c.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Ur(e).byteLength),e[--t]);c.createDevice("/dev","random",n),c.createDevice("/dev","urandom",n),c.mkdir("/dev/shm"),c.mkdir("/dev/shm/tmp")},createSpecialDirectories(){c.mkdir("/proc");var e=c.mkdir("/proc/self");c.mkdir("/proc/self/fd"),c.mount({mount(){var t=c.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,o){var s=+o,i=c.getStreamChecked(s),g={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return g.parent=g,g}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?c.createDevice("/dev","stdin",e):c.symlink("/dev/tty","/dev/stdin"),t?c.createDevice("/dev","stdout",null,t):c.symlink("/dev/tty","/dev/stdout"),n?c.createDevice("/dev","stderr",null,n):c.symlink("/dev/tty1","/dev/stderr");var o=c.open("/dev/stdin",0),s=c.open("/dev/stdout",1),i=c.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{c.genericErrors[e]=new c.ErrnoError(e),c.genericErrors[e].stack="<generic error, no stack>"}),c.nameTable=new Array(4096),c.mount(Ae,{},"/"),c.createDefaultDirectories(),c.createDefaultDevices(),c.createSpecialDirectories(),c.filesystems={MEMFS:Ae}},init(e,t,n){c.initialized=!0,e??=r.stdin,t??=r.stdout,n??=r.stderr,c.createStandardStreams(e,t,n)},quit(){c.initialized=!1;for(var e=0;e<c.streams.length;e++){var t=c.streams[e];t&&c.close(t)}},findObject(e,t){var n=c.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=c.lookupPath(e,{follow:!t});e=n.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=c.lookupPath(e,{parent:!0});o.parentExists=!0,o.parentPath=n.path,o.parentObject=n.node,o.name=Be.basename(e),n=c.lookupPath(e,{follow:!t}),o.exists=!0,o.path=n.path,o.object=n.node,o.name=n.node.name,o.isRoot=n.path==="/"}catch(s){o.error=s.errno}return o},createPath(e,t,n,o){e=typeof e=="string"?e:c.getPath(e);for(var s=t.split("/").reverse();s.length;){var i=s.pop();if(i){var g=Be.join2(e,i);try{c.mkdir(g)}catch{}e=g}}return g},createFile(e,t,n,o,s){var i=Be.join2(typeof e=="string"?e:c.getPath(e),t),g=pr(o,s);return c.create(i,g)},createDataFile(e,t,n,o,s,i){var g=t;e&&(e=typeof e=="string"?e:c.getPath(e),g=t?Be.join2(e,t):e);var q=pr(o,s),B=c.create(g,q);if(n){if(typeof n=="string"){for(var H=new Array(n.length),te=0,Y=n.length;te<Y;++te)H[te]=n.charCodeAt(te);n=H}c.chmod(B,q|146);var ie=c.open(B,577);c.write(ie,n,0,n.length,0,i),c.close(ie),c.chmod(B,q)}},createDevice(e,t,n,o){var s=Be.join2(typeof e=="string"?e:c.getPath(e),t),i=pr(!!n,!!o);c.createDevice.major??=64;var g=c.makedev(c.createDevice.major++,0);return c.registerDevice(g,{open(q){q.seekable=!1},close(q){o?.buffer?.length&&o(10)},read(q,B,H,te,Y){for(var ie=0,L=0;L<te;L++){var C;try{C=n()}catch{throw new c.ErrnoError(29)}if(C===void 0&&ie===0)throw new c.ErrnoError(6);if(C==null)break;ie++,B[H+L]=C}return ie&&(q.node.timestamp=Date.now()),ie},write(q,B,H,te,Y){for(var ie=0;ie<te;ie++)try{o(B[H+ie])}catch{throw new c.ErrnoError(29)}return te&&(q.node.timestamp=Date.now()),ie}}),c.mkdev(s,i,g)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=At(e.url),e.usedBytes=e.contents.length}catch{throw new c.ErrnoError(29)}},createLazyFile(e,t,n,o,s){class i{constructor(){this.lengthKnown=!1,this.chunks=[]}get(L){if(!(L>this.length-1||L<0)){var C=L%this.chunkSize,M=L/this.chunkSize|0;return this.getter(M)[C]}}setDataGetter(L){this.getter=L}cacheLength(){var L=new XMLHttpRequest;if(L.open("HEAD",n,!1),L.send(null),!(L.status>=200&&L.status<300||L.status===304))throw new Error("Couldn't load "+n+". Status: "+L.status);var C=Number(L.getResponseHeader("Content-length")),M,I=(M=L.getResponseHeader("Accept-Ranges"))&&M==="bytes",w=(M=L.getResponseHeader("Content-Encoding"))&&M==="gzip",U=1024*1024;I||(U=C);var V=(E,K)=>{if(E>K)throw new Error("invalid range ("+E+", "+K+") or no bytes requested!");if(K>C-1)throw new Error("only "+C+" bytes available! programmer error!");var d=new XMLHttpRequest;if(d.open("GET",n,!1),C!==U&&d.setRequestHeader("Range","bytes="+E+"-"+K),d.responseType="arraybuffer",d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined"),d.send(null),!(d.status>=200&&d.status<300||d.status===304))throw new Error("Couldn't load "+n+". Status: "+d.status);return d.response!==void 0?new Uint8Array(d.response||[]):jr(d.responseText||"",!0)},$=this;$.setDataGetter(E=>{var K=E*U,d=(E+1)*U-1;if(d=Math.min(d,C-1),typeof $.chunks[E]>"u"&&($.chunks[E]=V(K,d)),typeof $.chunks[E]>"u")throw new Error("doXHR failed!");return $.chunks[E]}),(w||!C)&&(U=C=1,C=this.getter(0).length,U=C,It("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=C,this._chunkSize=U,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!qe)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var g=new i,q={isDevice:!1,contents:g}}else var q={isDevice:!1,url:n};var B=c.createFile(e,t,q,o,s);q.contents?B.contents=q.contents:q.url&&(B.contents=null,B.url=q.url),Object.defineProperties(B,{usedBytes:{get:function(){return this.contents.length}}});var H={},te=Object.keys(B.stream_ops);te.forEach(ie=>{var L=B.stream_ops[ie];H[ie]=(...C)=>(c.forceLoadFile(B),L(...C))});function Y(ie,L,C,M,I){var w=ie.node.contents;if(I>=w.length)return 0;var U=Math.min(w.length-I,M);if(w.slice)for(var V=0;V<U;V++)L[C+V]=w[I+V];else for(var V=0;V<U;V++)L[C+V]=w.get(I+V);return U}return H.read=(ie,L,C,M,I)=>(c.forceLoadFile(B),Y(ie,L,C,M,I)),H.mmap=(ie,L,C,M,I)=>{c.forceLoadFile(B);var w=Wr(L);if(!w)throw new c.ErrnoError(48);return Y(ie,Ke,w,L,C),{ptr:w,allocated:!0}},B.stream_ops=H,B}},Zn=(e,t)=>e?Ct(wt,e,t):"",Ie={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(Be.isAbs(t))return t;var o;if(e===-100)o=c.cwd();else{var s=Ie.getStreamFromFD(e);o=s.path}if(t.length==0){if(!n)throw new c.ErrnoError(44);return o}return Be.join2(o,t)},doStat(e,t,n){var o=e(t);G[n>>2]=o.dev,G[n+4>>2]=o.mode,X[n+8>>2]=o.nlink,G[n+12>>2]=o.uid,G[n+16>>2]=o.gid,G[n+20>>2]=o.rdev,me[n+24>>3]=BigInt(o.size),G[n+32>>2]=4096,G[n+36>>2]=o.blocks;var s=o.atime.getTime(),i=o.mtime.getTime(),g=o.ctime.getTime();return me[n+40>>3]=BigInt(Math.floor(s/1e3)),X[n+48>>2]=s%1e3*1e3*1e3,me[n+56>>3]=BigInt(Math.floor(i/1e3)),X[n+64>>2]=i%1e3*1e3*1e3,me[n+72>>3]=BigInt(Math.floor(g/1e3)),X[n+80>>2]=g%1e3*1e3*1e3,me[n+88>>3]=BigInt(o.ino),0},doMsync(e,t,n,o,s){if(!c.isFile(t.node.mode))throw new c.ErrnoError(43);if(o&2)return 0;var i=wt.slice(e,e+n);c.msync(t,i,s,n,o)},getStreamFromFD(e){var t=c.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=Zn(e);return t}};function es(e,t){try{return e=Ie.getStr(e),c.chmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function ts(e,t,n,o){try{if(t=Ie.getStr(t),t=Ie.calculateAt(e,t),n&-8)return-28;var s=c.lookupPath(t,{follow:!0}),i=s.node;if(!i)return-44;var g="";return n&4&&(g+="r"),n&2&&(g+="w"),n&1&&(g+="x"),g&&c.nodePermissions(i,g)?-2:0}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function rs(e,t){try{return c.fchmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function ns(e,t,n){try{return c.fchown(e,t,n),0}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Zt(){var e=G[+Ie.varargs>>2];return Ie.varargs+=4,e}var Rt=Zt;function ss(e,t,n){Ie.varargs=n;try{var o=Ie.getStreamFromFD(e);switch(t){case 0:{var s=Zt();if(s<0)return-28;for(;c.streams[s];)s++;var i;return i=c.dupStream(o,s),i.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var s=Zt();return o.flags|=s,0}case 12:{var s=Rt(),g=0;return N[s+g>>1]=2,0}case 13:case 14:return 0}return-28}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function is(e,t){try{var n=Ie.getStreamFromFD(e);return Ie.doStat(c.stat,n.path,t)}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var os=9007199254740992,ls=-9007199254740992,Qt=e=>e<ls||e>os?NaN:Number(e);function as(e,t){t=Qt(t);try{return isNaN(t)?61:(c.ftruncate(e,t),0)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Dt=(e,t,n)=>dr(e,wt,t,n);function cs(e,t){try{if(t===0)return-28;var n=c.cwd(),o=Yt(n)+1;return t<o?-68:(Dt(n,e,t),o)}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function _s(e,t,n){Ie.varargs=n;try{var o=Ie.getStreamFromFD(e);switch(t){case 21509:return o.tty?0:-59;case 21505:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcgets){var s=o.tty.ops.ioctl_tcgets(o),i=Rt();G[i>>2]=s.c_iflag||0,G[i+4>>2]=s.c_oflag||0,G[i+8>>2]=s.c_cflag||0,G[i+12>>2]=s.c_lflag||0;for(var g=0;g<32;g++)Ke[i+g+17]=s.c_cc[g]||0;return 0}return 0}case 21510:case 21511:case 21512:return o.tty?0:-59;case 21506:case 21507:case 21508:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcsets){for(var i=Rt(),q=G[i>>2],B=G[i+4>>2],H=G[i+8>>2],te=G[i+12>>2],Y=[],g=0;g<32;g++)Y.push(Ke[i+g+17]);return o.tty.ops.ioctl_tcsets(o.tty,t,{c_iflag:q,c_oflag:B,c_cflag:H,c_lflag:te,c_cc:Y})}return 0}case 21519:{if(!o.tty)return-59;var i=Rt();return G[i>>2]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var i=Rt();return c.ioctl(o,t,i)}case 21523:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tiocgwinsz){var ie=o.tty.ops.ioctl_tiocgwinsz(o.tty),i=Rt();N[i>>1]=ie[0],N[i+2>>1]=ie[1]}return 0}case 21524:return o.tty?0:-59;case 21515:return o.tty?0:-59;default:return-28}}catch(L){if(typeof c>"u"||L.name!=="ErrnoError")throw L;return-L.errno}}function us(e,t){try{return e=Ie.getStr(e),Ie.doStat(c.lstat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function fs(e,t,n){try{return t=Ie.getStr(t),t=Ie.calculateAt(e,t),t=Be.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),c.mkdir(t,n,0),0}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function ds(e,t,n,o){try{t=Ie.getStr(t);var s=o&256,i=o&4096;return o=o&-6401,t=Ie.calculateAt(e,t,i),Ie.doStat(s?c.lstat:c.stat,t,n)}catch(g){if(typeof c>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function ps(e,t,n,o){Ie.varargs=o;try{t=Ie.getStr(t),t=Ie.calculateAt(e,t);var s=o?Zt():0;return c.open(t,n,s).fd}catch(i){if(typeof c>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function hs(e,t,n,o){try{if(t=Ie.getStr(t),t=Ie.calculateAt(e,t),o<=0)return-28;var s=c.readlink(t),i=Math.min(o,Yt(s)),g=Ke[n+i];return Dt(s,n,o+1),Ke[n+i]=g,i}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function ms(e){try{return e=Ie.getStr(e),c.rmdir(e),0}catch(t){if(typeof c>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function gs(e,t){try{return e=Ie.getStr(e),Ie.doStat(c.stat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function ys(e,t,n){try{return t=Ie.getStr(t),t=Ie.calculateAt(e,t),n===0?c.unlink(t):n===512?c.rmdir(t):Lt("Invalid flags passed to unlinkat"),0}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var Qr=e=>X[e>>2]+G[e+4>>2]*4294967296;function qs(e,t,n,o){try{t=Ie.getStr(t),t=Ie.calculateAt(e,t,!0);var s=Date.now(),i,g;if(!n)i=s,g=s;else{var q=Qr(n),B=G[n+8>>2];B==1073741823?i=s:B==1073741822?i=-1:i=q*1e3+B/1e6,n+=16,q=Qr(n),B=G[n+8>>2],B==1073741823?g=s:B==1073741822?g=-1:g=q*1e3+B/1e6}return(g!=-1||i!=-1)&&c.utime(t,i,g),0}catch(H){if(typeof c>"u"||H.name!=="ErrnoError")throw H;return-H.errno}}var bs=1,ws=()=>bs,xs=e=>e%4===0&&(e%100!==0||e%400===0),vs=[0,31,60,91,121,152,182,213,244,274,305,335],Es=[0,31,59,90,120,151,181,212,243,273,304,334],Ss=e=>{var t=xs(e.getFullYear()),n=t?vs:Es,o=n[e.getMonth()]+e.getDate()-1;return o};function As(e,t){e=Qt(e);var n=new Date(e*1e3);G[t>>2]=n.getSeconds(),G[t+4>>2]=n.getMinutes(),G[t+8>>2]=n.getHours(),G[t+12>>2]=n.getDate(),G[t+16>>2]=n.getMonth(),G[t+20>>2]=n.getFullYear()-1900,G[t+24>>2]=n.getDay();var o=Ss(n)|0;G[t+28>>2]=o,G[t+36>>2]=-(n.getTimezoneOffset()*60);var s=new Date(n.getFullYear(),0,1),i=new Date(n.getFullYear(),6,1).getTimezoneOffset(),g=s.getTimezoneOffset(),q=(i!=g&&n.getTimezoneOffset()==Math.min(g,i))|0;G[t+32>>2]=q}function Is(e,t,n,o,s,i,g){s=Qt(s);try{if(isNaN(s))return 61;var q=Ie.getStreamFromFD(o),B=c.mmap(q,e,s,t,n),H=B.ptr;return G[i>>2]=B.allocated,X[g>>2]=H,0}catch(te){if(typeof c>"u"||te.name!=="ErrnoError")throw te;return-te.errno}}function ks(e,t,n,o,s,i){i=Qt(i);try{var g=Ie.getStreamFromFD(s);n&2&&Ie.doMsync(e,g,t,o,i)}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}var Ts=(e,t,n,o)=>{var s=new Date().getFullYear(),i=new Date(s,0,1),g=new Date(s,6,1),q=i.getTimezoneOffset(),B=g.getTimezoneOffset(),H=Math.max(q,B);X[e>>2]=H*60,G[t>>2]=+(q!=B);var te=L=>{var C=L>=0?"-":"+",M=Math.abs(L),I=String(Math.floor(M/60)).padStart(2,"0"),w=String(M%60).padStart(2,"0");return`UTC${C}${I}${w}`},Y=te(q),ie=te(B);B<q?(Dt(Y,n,17),Dt(ie,o,17)):(Dt(Y,o,17),Dt(ie,n,17))},Fs=()=>Date.now(),Os=()=>performance.now(),Ps=()=>2147483648,Ls=e=>{var t=ut.buffer,n=(e-t.byteLength+65535)/65536|0;try{return ut.grow(n),De(),1}catch{}},Cs=e=>{var t=wt.length;e>>>=0;var n=Ps();if(e>n)return!1;for(var o=1;o<=4;o*=2){var s=t*(1+.2/o);s=Math.min(s,e+100663296);var i=Math.min(n,zr(Math.max(e,s),65536)),g=Ls(i);if(g)return!0}return!1},hr={},Rs=()=>Ve||"./this.program",Vt=()=>{if(!Vt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Rs()};for(var n in hr)hr[n]===void 0?delete t[n]:t[n]=hr[n];var o=[];for(var n in t)o.push(`${n}=${t[n]}`);Vt.strings=o}return Vt.strings},Ds=(e,t)=>{for(var n=0;n<e.length;++n)Ke[t++]=e.charCodeAt(n);Ke[t]=0},Ns=(e,t)=>{var n=0;return Vt().forEach((o,s)=>{var i=t+n;X[e+s*4>>2]=i,Ds(o,i),n+=o.length+1}),0},Ms=(e,t)=>{var n=Vt();X[e>>2]=n.length;var o=0;return n.forEach(s=>o+=s.length+1),X[t>>2]=o,0};function Us(e){try{var t=Ie.getStreamFromFD(e);return c.close(t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function Bs(e,t){try{var n=0,o=0,s=0,i=Ie.getStreamFromFD(e),g=i.tty?2:c.isDir(i.mode)?3:c.isLink(i.mode)?7:4;return Ke[t]=g,N[t+2>>1]=s,me[t+8>>3]=BigInt(n),me[t+16>>3]=BigInt(o),0}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return q.errno}}var js=(e,t,n,o)=>{for(var s=0,i=0;i<n;i++){var g=X[t>>2],q=X[t+4>>2];t+=8;var B=c.read(e,Ke,g,q,o);if(B<0)return-1;if(s+=B,B<q)break;typeof o<"u"&&(o+=B)}return s};function zs(e,t,n,o){try{var s=Ie.getStreamFromFD(e),i=js(s,t,n);return X[o>>2]=i,0}catch(g){if(typeof c>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function Ws(e,t,n,o){t=Qt(t);try{if(isNaN(t))return 61;var s=Ie.getStreamFromFD(e);return c.llseek(s,t,n),me[o>>3]=BigInt(s.position),s.getdents&&t===0&&n===0&&(s.getdents=null),0}catch(i){if(typeof c>"u"||i.name!=="ErrnoError")throw i;return i.errno}}function Qs(e){try{var t=Ie.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var Vs=(e,t,n,o)=>{for(var s=0,i=0;i<n;i++){var g=X[t>>2],q=X[t+4>>2];t+=8;var B=c.write(e,Ke,g,q,o);if(B<0)return-1;if(s+=B,B<q)break;typeof o<"u"&&(o+=B)}return s};function Hs(e,t,n,o){try{var s=Ie.getStreamFromFD(e),i=Vs(s,t,n);return X[o>>2]=i,0}catch(g){if(typeof c>"u"||g.name!=="ErrnoError")throw g;return g.errno}}c.createPreloadedFile=Xn,c.staticInit();var Vr={__syscall_chmod:es,__syscall_faccessat:ts,__syscall_fchmod:rs,__syscall_fchown32:ns,__syscall_fcntl64:ss,__syscall_fstat64:is,__syscall_ftruncate64:as,__syscall_getcwd:cs,__syscall_ioctl:_s,__syscall_lstat64:us,__syscall_mkdirat:fs,__syscall_newfstatat:ds,__syscall_openat:ps,__syscall_readlinkat:hs,__syscall_rmdir:ms,__syscall_stat64:gs,__syscall_unlinkat:ys,__syscall_utimensat:qs,_emscripten_get_now_is_monotonic:ws,_localtime_js:As,_mmap_js:Is,_munmap_js:ks,_tzset_js:Ts,emscripten_date_now:Fs,emscripten_get_now:Os,emscripten_resize_heap:Cs,environ_get:Ns,environ_sizes_get:Ms,fd_close:Us,fd_fdstat_get:Bs,fd_read:zs,fd_seek:Ws,fd_sync:Qs,fd_write:Hs,memory:ut},y=Wn(),$s=()=>($s=y.__wasm_call_ctors)(),Gs=r._sqlite3_status64=(e,t,n,o)=>(Gs=r._sqlite3_status64=y.sqlite3_status64)(e,t,n,o),Ks=r._sqlite3_status=(e,t,n,o)=>(Ks=r._sqlite3_status=y.sqlite3_status)(e,t,n,o),Js=r._sqlite3_db_status=(e,t,n,o,s)=>(Js=r._sqlite3_db_status=y.sqlite3_db_status)(e,t,n,o,s),Xs=r._sqlite3_msize=e=>(Xs=r._sqlite3_msize=y.sqlite3_msize)(e),Ys=r._sqlite3_vfs_find=e=>(Ys=r._sqlite3_vfs_find=y.sqlite3_vfs_find)(e),Zs=r._sqlite3_initialize=()=>(Zs=r._sqlite3_initialize=y.sqlite3_initialize)(),ei=r._sqlite3_malloc=e=>(ei=r._sqlite3_malloc=y.sqlite3_malloc)(e),ti=r._sqlite3_free=e=>(ti=r._sqlite3_free=y.sqlite3_free)(e),ri=r._sqlite3_vfs_register=(e,t)=>(ri=r._sqlite3_vfs_register=y.sqlite3_vfs_register)(e,t),ni=r._sqlite3_vfs_unregister=e=>(ni=r._sqlite3_vfs_unregister=y.sqlite3_vfs_unregister)(e),si=r._sqlite3_malloc64=e=>(si=r._sqlite3_malloc64=y.sqlite3_malloc64)(e),ii=r._sqlite3_realloc=(e,t)=>(ii=r._sqlite3_realloc=y.sqlite3_realloc)(e,t),oi=r._sqlite3_realloc64=(e,t)=>(oi=r._sqlite3_realloc64=y.sqlite3_realloc64)(e,t),li=r._sqlite3_value_text=e=>(li=r._sqlite3_value_text=y.sqlite3_value_text)(e),ai=r._sqlite3_randomness=(e,t)=>(ai=r._sqlite3_randomness=y.sqlite3_randomness)(e,t),ci=r._sqlite3_stricmp=(e,t)=>(ci=r._sqlite3_stricmp=y.sqlite3_stricmp)(e,t),_i=r._sqlite3_strnicmp=(e,t,n)=>(_i=r._sqlite3_strnicmp=y.sqlite3_strnicmp)(e,t,n),ui=r._sqlite3_uri_parameter=(e,t)=>(ui=r._sqlite3_uri_parameter=y.sqlite3_uri_parameter)(e,t),fi=r._sqlite3_uri_boolean=(e,t,n)=>(fi=r._sqlite3_uri_boolean=y.sqlite3_uri_boolean)(e,t,n),di=r._sqlite3_serialize=(e,t,n,o)=>(di=r._sqlite3_serialize=y.sqlite3_serialize)(e,t,n,o),pi=r._sqlite3_prepare_v2=(e,t,n,o,s)=>(pi=r._sqlite3_prepare_v2=y.sqlite3_prepare_v2)(e,t,n,o,s),hi=r._sqlite3_step=e=>(hi=r._sqlite3_step=y.sqlite3_step)(e),mi=r._sqlite3_column_int64=(e,t)=>(mi=r._sqlite3_column_int64=y.sqlite3_column_int64)(e,t),gi=r._sqlite3_reset=e=>(gi=r._sqlite3_reset=y.sqlite3_reset)(e),yi=r._sqlite3_exec=(e,t,n,o,s)=>(yi=r._sqlite3_exec=y.sqlite3_exec)(e,t,n,o,s),qi=r._sqlite3_column_int=(e,t)=>(qi=r._sqlite3_column_int=y.sqlite3_column_int)(e,t),bi=r._sqlite3_finalize=e=>(bi=r._sqlite3_finalize=y.sqlite3_finalize)(e),wi=r._sqlite3_file_control=(e,t,n,o)=>(wi=r._sqlite3_file_control=y.sqlite3_file_control)(e,t,n,o),xi=r._sqlite3_column_name=(e,t)=>(xi=r._sqlite3_column_name=y.sqlite3_column_name)(e,t),vi=r._sqlite3_column_text=(e,t)=>(vi=r._sqlite3_column_text=y.sqlite3_column_text)(e,t),Ei=r._sqlite3_column_type=(e,t)=>(Ei=r._sqlite3_column_type=y.sqlite3_column_type)(e,t),Si=r._sqlite3_errmsg=e=>(Si=r._sqlite3_errmsg=y.sqlite3_errmsg)(e),Ai=r._sqlite3_deserialize=(e,t,n,o,s,i)=>(Ai=r._sqlite3_deserialize=y.sqlite3_deserialize)(e,t,n,o,s,i),Ii=r._sqlite3_clear_bindings=e=>(Ii=r._sqlite3_clear_bindings=y.sqlite3_clear_bindings)(e),ki=r._sqlite3_value_blob=e=>(ki=r._sqlite3_value_blob=y.sqlite3_value_blob)(e),Ti=r._sqlite3_value_bytes=e=>(Ti=r._sqlite3_value_bytes=y.sqlite3_value_bytes)(e),Fi=r._sqlite3_value_double=e=>(Fi=r._sqlite3_value_double=y.sqlite3_value_double)(e),Oi=r._sqlite3_value_int=e=>(Oi=r._sqlite3_value_int=y.sqlite3_value_int)(e),Pi=r._sqlite3_value_int64=e=>(Pi=r._sqlite3_value_int64=y.sqlite3_value_int64)(e),Li=r._sqlite3_value_subtype=e=>(Li=r._sqlite3_value_subtype=y.sqlite3_value_subtype)(e),Ci=r._sqlite3_value_pointer=(e,t)=>(Ci=r._sqlite3_value_pointer=y.sqlite3_value_pointer)(e,t),Ri=r._sqlite3_value_type=e=>(Ri=r._sqlite3_value_type=y.sqlite3_value_type)(e),Di=r._sqlite3_value_nochange=e=>(Di=r._sqlite3_value_nochange=y.sqlite3_value_nochange)(e),Ni=r._sqlite3_value_frombind=e=>(Ni=r._sqlite3_value_frombind=y.sqlite3_value_frombind)(e),Mi=r._sqlite3_value_dup=e=>(Mi=r._sqlite3_value_dup=y.sqlite3_value_dup)(e),Ui=r._sqlite3_value_free=e=>(Ui=r._sqlite3_value_free=y.sqlite3_value_free)(e),Bi=r._sqlite3_result_blob=(e,t,n,o)=>(Bi=r._sqlite3_result_blob=y.sqlite3_result_blob)(e,t,n,o),ji=r._sqlite3_result_error_toobig=e=>(ji=r._sqlite3_result_error_toobig=y.sqlite3_result_error_toobig)(e),zi=r._sqlite3_result_error_nomem=e=>(zi=r._sqlite3_result_error_nomem=y.sqlite3_result_error_nomem)(e),Wi=r._sqlite3_result_double=(e,t)=>(Wi=r._sqlite3_result_double=y.sqlite3_result_double)(e,t),Qi=r._sqlite3_result_error=(e,t,n)=>(Qi=r._sqlite3_result_error=y.sqlite3_result_error)(e,t,n),Vi=r._sqlite3_result_int=(e,t)=>(Vi=r._sqlite3_result_int=y.sqlite3_result_int)(e,t),Hi=r._sqlite3_result_int64=(e,t)=>(Hi=r._sqlite3_result_int64=y.sqlite3_result_int64)(e,t),$i=r._sqlite3_result_null=e=>($i=r._sqlite3_result_null=y.sqlite3_result_null)(e),Gi=r._sqlite3_result_pointer=(e,t,n,o)=>(Gi=r._sqlite3_result_pointer=y.sqlite3_result_pointer)(e,t,n,o),Ki=r._sqlite3_result_subtype=(e,t)=>(Ki=r._sqlite3_result_subtype=y.sqlite3_result_subtype)(e,t),Ji=r._sqlite3_result_text=(e,t,n,o)=>(Ji=r._sqlite3_result_text=y.sqlite3_result_text)(e,t,n,o),Xi=r._sqlite3_result_zeroblob=(e,t)=>(Xi=r._sqlite3_result_zeroblob=y.sqlite3_result_zeroblob)(e,t),Yi=r._sqlite3_result_zeroblob64=(e,t)=>(Yi=r._sqlite3_result_zeroblob64=y.sqlite3_result_zeroblob64)(e,t),Zi=r._sqlite3_result_error_code=(e,t)=>(Zi=r._sqlite3_result_error_code=y.sqlite3_result_error_code)(e,t),eo=r._sqlite3_user_data=e=>(eo=r._sqlite3_user_data=y.sqlite3_user_data)(e),to=r._sqlite3_context_db_handle=e=>(to=r._sqlite3_context_db_handle=y.sqlite3_context_db_handle)(e),ro=r._sqlite3_vtab_nochange=e=>(ro=r._sqlite3_vtab_nochange=y.sqlite3_vtab_nochange)(e),no=r._sqlite3_vtab_in_first=(e,t)=>(no=r._sqlite3_vtab_in_first=y.sqlite3_vtab_in_first)(e,t),so=r._sqlite3_vtab_in_next=(e,t)=>(so=r._sqlite3_vtab_in_next=y.sqlite3_vtab_in_next)(e,t),io=r._sqlite3_aggregate_context=(e,t)=>(io=r._sqlite3_aggregate_context=y.sqlite3_aggregate_context)(e,t),oo=r._sqlite3_get_auxdata=(e,t)=>(oo=r._sqlite3_get_auxdata=y.sqlite3_get_auxdata)(e,t),lo=r._sqlite3_set_auxdata=(e,t,n,o)=>(lo=r._sqlite3_set_auxdata=y.sqlite3_set_auxdata)(e,t,n,o),ao=r._sqlite3_column_count=e=>(ao=r._sqlite3_column_count=y.sqlite3_column_count)(e),co=r._sqlite3_data_count=e=>(co=r._sqlite3_data_count=y.sqlite3_data_count)(e),_o=r._sqlite3_column_blob=(e,t)=>(_o=r._sqlite3_column_blob=y.sqlite3_column_blob)(e,t),uo=r._sqlite3_column_bytes=(e,t)=>(uo=r._sqlite3_column_bytes=y.sqlite3_column_bytes)(e,t),fo=r._sqlite3_column_double=(e,t)=>(fo=r._sqlite3_column_double=y.sqlite3_column_double)(e,t),po=r._sqlite3_column_value=(e,t)=>(po=r._sqlite3_column_value=y.sqlite3_column_value)(e,t),ho=r._sqlite3_column_decltype=(e,t)=>(ho=r._sqlite3_column_decltype=y.sqlite3_column_decltype)(e,t),mo=r._sqlite3_bind_blob=(e,t,n,o,s)=>(mo=r._sqlite3_bind_blob=y.sqlite3_bind_blob)(e,t,n,o,s),go=r._sqlite3_bind_double=(e,t,n)=>(go=r._sqlite3_bind_double=y.sqlite3_bind_double)(e,t,n),yo=r._sqlite3_bind_int=(e,t,n)=>(yo=r._sqlite3_bind_int=y.sqlite3_bind_int)(e,t,n),qo=r._sqlite3_bind_int64=(e,t,n)=>(qo=r._sqlite3_bind_int64=y.sqlite3_bind_int64)(e,t,n),bo=r._sqlite3_bind_null=(e,t)=>(bo=r._sqlite3_bind_null=y.sqlite3_bind_null)(e,t),wo=r._sqlite3_bind_pointer=(e,t,n,o,s)=>(wo=r._sqlite3_bind_pointer=y.sqlite3_bind_pointer)(e,t,n,o,s),xo=r._sqlite3_bind_text=(e,t,n,o,s)=>(xo=r._sqlite3_bind_text=y.sqlite3_bind_text)(e,t,n,o,s),vo=r._sqlite3_bind_parameter_count=e=>(vo=r._sqlite3_bind_parameter_count=y.sqlite3_bind_parameter_count)(e),Eo=r._sqlite3_bind_parameter_name=(e,t)=>(Eo=r._sqlite3_bind_parameter_name=y.sqlite3_bind_parameter_name)(e,t),So=r._sqlite3_bind_parameter_index=(e,t)=>(So=r._sqlite3_bind_parameter_index=y.sqlite3_bind_parameter_index)(e,t),Ao=r._sqlite3_db_handle=e=>(Ao=r._sqlite3_db_handle=y.sqlite3_db_handle)(e),Io=r._sqlite3_stmt_readonly=e=>(Io=r._sqlite3_stmt_readonly=y.sqlite3_stmt_readonly)(e),ko=r._sqlite3_stmt_isexplain=e=>(ko=r._sqlite3_stmt_isexplain=y.sqlite3_stmt_isexplain)(e),To=r._sqlite3_stmt_explain=(e,t)=>(To=r._sqlite3_stmt_explain=y.sqlite3_stmt_explain)(e,t),Fo=r._sqlite3_stmt_busy=e=>(Fo=r._sqlite3_stmt_busy=y.sqlite3_stmt_busy)(e),Oo=r._sqlite3_stmt_status=(e,t,n)=>(Oo=r._sqlite3_stmt_status=y.sqlite3_stmt_status)(e,t,n),Po=r._sqlite3_sql=e=>(Po=r._sqlite3_sql=y.sqlite3_sql)(e),Lo=r._sqlite3_expanded_sql=e=>(Lo=r._sqlite3_expanded_sql=y.sqlite3_expanded_sql)(e),Co=r._sqlite3_preupdate_old=(e,t,n)=>(Co=r._sqlite3_preupdate_old=y.sqlite3_preupdate_old)(e,t,n),Ro=r._sqlite3_preupdate_count=e=>(Ro=r._sqlite3_preupdate_count=y.sqlite3_preupdate_count)(e),Do=r._sqlite3_preupdate_depth=e=>(Do=r._sqlite3_preupdate_depth=y.sqlite3_preupdate_depth)(e),No=r._sqlite3_preupdate_blobwrite=e=>(No=r._sqlite3_preupdate_blobwrite=y.sqlite3_preupdate_blobwrite)(e),Mo=r._sqlite3_preupdate_new=(e,t,n)=>(Mo=r._sqlite3_preupdate_new=y.sqlite3_preupdate_new)(e,t,n),Uo=r._sqlite3_value_numeric_type=e=>(Uo=r._sqlite3_value_numeric_type=y.sqlite3_value_numeric_type)(e),Bo=r._sqlite3_set_authorizer=(e,t,n)=>(Bo=r._sqlite3_set_authorizer=y.sqlite3_set_authorizer)(e,t,n),jo=r._sqlite3_strglob=(e,t)=>(jo=r._sqlite3_strglob=y.sqlite3_strglob)(e,t),zo=r._sqlite3_strlike=(e,t,n)=>(zo=r._sqlite3_strlike=y.sqlite3_strlike)(e,t,n),Wo=r._sqlite3_auto_extension=e=>(Wo=r._sqlite3_auto_extension=y.sqlite3_auto_extension)(e),Qo=r._sqlite3_cancel_auto_extension=e=>(Qo=r._sqlite3_cancel_auto_extension=y.sqlite3_cancel_auto_extension)(e),Vo=r._sqlite3_reset_auto_extension=()=>(Vo=r._sqlite3_reset_auto_extension=y.sqlite3_reset_auto_extension)(),Ho=r._sqlite3_prepare_v3=(e,t,n,o,s,i)=>(Ho=r._sqlite3_prepare_v3=y.sqlite3_prepare_v3)(e,t,n,o,s,i),$o=r._sqlite3_create_module=(e,t,n,o)=>($o=r._sqlite3_create_module=y.sqlite3_create_module)(e,t,n,o),Go=r._sqlite3_create_module_v2=(e,t,n,o,s)=>(Go=r._sqlite3_create_module_v2=y.sqlite3_create_module_v2)(e,t,n,o,s),Ko=r._sqlite3_drop_modules=(e,t)=>(Ko=r._sqlite3_drop_modules=y.sqlite3_drop_modules)(e,t),Jo=r._sqlite3_declare_vtab=(e,t)=>(Jo=r._sqlite3_declare_vtab=y.sqlite3_declare_vtab)(e,t),Xo=r._sqlite3_vtab_on_conflict=e=>(Xo=r._sqlite3_vtab_on_conflict=y.sqlite3_vtab_on_conflict)(e),Yo=r._sqlite3_vtab_collation=(e,t)=>(Yo=r._sqlite3_vtab_collation=y.sqlite3_vtab_collation)(e,t),Zo=r._sqlite3_vtab_in=(e,t,n)=>(Zo=r._sqlite3_vtab_in=y.sqlite3_vtab_in)(e,t,n),el=r._sqlite3_vtab_rhs_value=(e,t,n)=>(el=r._sqlite3_vtab_rhs_value=y.sqlite3_vtab_rhs_value)(e,t,n),tl=r._sqlite3_vtab_distinct=e=>(tl=r._sqlite3_vtab_distinct=y.sqlite3_vtab_distinct)(e),rl=r._sqlite3_keyword_name=(e,t,n)=>(rl=r._sqlite3_keyword_name=y.sqlite3_keyword_name)(e,t,n),nl=r._sqlite3_keyword_count=()=>(nl=r._sqlite3_keyword_count=y.sqlite3_keyword_count)(),sl=r._sqlite3_keyword_check=(e,t)=>(sl=r._sqlite3_keyword_check=y.sqlite3_keyword_check)(e,t),il=r._sqlite3_complete=e=>(il=r._sqlite3_complete=y.sqlite3_complete)(e),ol=r._sqlite3_libversion=()=>(ol=r._sqlite3_libversion=y.sqlite3_libversion)(),ll=r._sqlite3_libversion_number=()=>(ll=r._sqlite3_libversion_number=y.sqlite3_libversion_number)(),al=r._sqlite3_shutdown=()=>(al=r._sqlite3_shutdown=y.sqlite3_shutdown)(),cl=r._sqlite3_last_insert_rowid=e=>(cl=r._sqlite3_last_insert_rowid=y.sqlite3_last_insert_rowid)(e),_l=r._sqlite3_set_last_insert_rowid=(e,t)=>(_l=r._sqlite3_set_last_insert_rowid=y.sqlite3_set_last_insert_rowid)(e,t),ul=r._sqlite3_changes64=e=>(ul=r._sqlite3_changes64=y.sqlite3_changes64)(e),fl=r._sqlite3_changes=e=>(fl=r._sqlite3_changes=y.sqlite3_changes)(e),dl=r._sqlite3_total_changes64=e=>(dl=r._sqlite3_total_changes64=y.sqlite3_total_changes64)(e),pl=r._sqlite3_total_changes=e=>(pl=r._sqlite3_total_changes=y.sqlite3_total_changes)(e),hl=r._sqlite3_txn_state=(e,t)=>(hl=r._sqlite3_txn_state=y.sqlite3_txn_state)(e,t),ml=r._sqlite3_close_v2=e=>(ml=r._sqlite3_close_v2=y.sqlite3_close_v2)(e),gl=r._sqlite3_busy_handler=(e,t,n)=>(gl=r._sqlite3_busy_handler=y.sqlite3_busy_handler)(e,t,n),yl=r._sqlite3_progress_handler=(e,t,n,o)=>(yl=r._sqlite3_progress_handler=y.sqlite3_progress_handler)(e,t,n,o),ql=r._sqlite3_busy_timeout=(e,t)=>(ql=r._sqlite3_busy_timeout=y.sqlite3_busy_timeout)(e,t),bl=r._sqlite3_interrupt=e=>(bl=r._sqlite3_interrupt=y.sqlite3_interrupt)(e),wl=r._sqlite3_is_interrupted=e=>(wl=r._sqlite3_is_interrupted=y.sqlite3_is_interrupted)(e),xl=r._sqlite3_create_function=(e,t,n,o,s,i,g,q)=>(xl=r._sqlite3_create_function=y.sqlite3_create_function)(e,t,n,o,s,i,g,q),vl=r._sqlite3_create_function_v2=(e,t,n,o,s,i,g,q,B)=>(vl=r._sqlite3_create_function_v2=y.sqlite3_create_function_v2)(e,t,n,o,s,i,g,q,B),El=r._sqlite3_create_window_function=(e,t,n,o,s,i,g,q,B,H)=>(El=r._sqlite3_create_window_function=y.sqlite3_create_window_function)(e,t,n,o,s,i,g,q,B,H),Sl=r._sqlite3_overload_function=(e,t,n)=>(Sl=r._sqlite3_overload_function=y.sqlite3_overload_function)(e,t,n),Al=r._sqlite3_trace_v2=(e,t,n,o)=>(Al=r._sqlite3_trace_v2=y.sqlite3_trace_v2)(e,t,n,o),Il=r._sqlite3_commit_hook=(e,t,n)=>(Il=r._sqlite3_commit_hook=y.sqlite3_commit_hook)(e,t,n),kl=r._sqlite3_update_hook=(e,t,n)=>(kl=r._sqlite3_update_hook=y.sqlite3_update_hook)(e,t,n),Tl=r._sqlite3_rollback_hook=(e,t,n)=>(Tl=r._sqlite3_rollback_hook=y.sqlite3_rollback_hook)(e,t,n),Fl=r._sqlite3_preupdate_hook=(e,t,n)=>(Fl=r._sqlite3_preupdate_hook=y.sqlite3_preupdate_hook)(e,t,n),Ol=r._sqlite3_error_offset=e=>(Ol=r._sqlite3_error_offset=y.sqlite3_error_offset)(e),Pl=r._sqlite3_errcode=e=>(Pl=r._sqlite3_errcode=y.sqlite3_errcode)(e),Ll=r._sqlite3_extended_errcode=e=>(Ll=r._sqlite3_extended_errcode=y.sqlite3_extended_errcode)(e),Cl=r._sqlite3_errstr=e=>(Cl=r._sqlite3_errstr=y.sqlite3_errstr)(e),Rl=r._sqlite3_limit=(e,t,n)=>(Rl=r._sqlite3_limit=y.sqlite3_limit)(e,t,n),Dl=r._sqlite3_open=(e,t)=>(Dl=r._sqlite3_open=y.sqlite3_open)(e,t),Nl=r._sqlite3_open_v2=(e,t,n,o)=>(Nl=r._sqlite3_open_v2=y.sqlite3_open_v2)(e,t,n,o),Ml=r._sqlite3_create_collation=(e,t,n,o,s)=>(Ml=r._sqlite3_create_collation=y.sqlite3_create_collation)(e,t,n,o,s),Ul=r._sqlite3_create_collation_v2=(e,t,n,o,s,i)=>(Ul=r._sqlite3_create_collation_v2=y.sqlite3_create_collation_v2)(e,t,n,o,s,i),Bl=r._sqlite3_collation_needed=(e,t,n)=>(Bl=r._sqlite3_collation_needed=y.sqlite3_collation_needed)(e,t,n),jl=r._sqlite3_get_autocommit=e=>(jl=r._sqlite3_get_autocommit=y.sqlite3_get_autocommit)(e),zl=r._sqlite3_table_column_metadata=(e,t,n,o,s,i,g,q,B)=>(zl=r._sqlite3_table_column_metadata=y.sqlite3_table_column_metadata)(e,t,n,o,s,i,g,q,B),Wl=r._sqlite3_extended_result_codes=(e,t)=>(Wl=r._sqlite3_extended_result_codes=y.sqlite3_extended_result_codes)(e,t),Ql=r._sqlite3_uri_key=(e,t)=>(Ql=r._sqlite3_uri_key=y.sqlite3_uri_key)(e,t),Vl=r._sqlite3_uri_int64=(e,t,n)=>(Vl=r._sqlite3_uri_int64=y.sqlite3_uri_int64)(e,t,n),Hl=r._sqlite3_db_name=(e,t)=>(Hl=r._sqlite3_db_name=y.sqlite3_db_name)(e,t),$l=r._sqlite3_db_filename=(e,t)=>($l=r._sqlite3_db_filename=y.sqlite3_db_filename)(e,t),Gl=r._sqlite3_db_readonly=(e,t)=>(Gl=r._sqlite3_db_readonly=y.sqlite3_db_readonly)(e,t),Kl=r._sqlite3_compileoption_used=e=>(Kl=r._sqlite3_compileoption_used=y.sqlite3_compileoption_used)(e),Jl=r._sqlite3_compileoption_get=e=>(Jl=r._sqlite3_compileoption_get=y.sqlite3_compileoption_get)(e),Xl=r._sqlite3session_diff=(e,t,n,o)=>(Xl=r._sqlite3session_diff=y.sqlite3session_diff)(e,t,n,o),Yl=r._sqlite3session_attach=(e,t)=>(Yl=r._sqlite3session_attach=y.sqlite3session_attach)(e,t),Zl=r._sqlite3session_create=(e,t,n)=>(Zl=r._sqlite3session_create=y.sqlite3session_create)(e,t,n),ea=r._sqlite3session_delete=e=>(ea=r._sqlite3session_delete=y.sqlite3session_delete)(e),ta=r._sqlite3session_table_filter=(e,t,n)=>(ta=r._sqlite3session_table_filter=y.sqlite3session_table_filter)(e,t,n),ra=r._sqlite3session_changeset=(e,t,n)=>(ra=r._sqlite3session_changeset=y.sqlite3session_changeset)(e,t,n),na=r._sqlite3session_changeset_strm=(e,t,n)=>(na=r._sqlite3session_changeset_strm=y.sqlite3session_changeset_strm)(e,t,n),sa=r._sqlite3session_patchset_strm=(e,t,n)=>(sa=r._sqlite3session_patchset_strm=y.sqlite3session_patchset_strm)(e,t,n),ia=r._sqlite3session_patchset=(e,t,n)=>(ia=r._sqlite3session_patchset=y.sqlite3session_patchset)(e,t,n),oa=r._sqlite3session_enable=(e,t)=>(oa=r._sqlite3session_enable=y.sqlite3session_enable)(e,t),la=r._sqlite3session_indirect=(e,t)=>(la=r._sqlite3session_indirect=y.sqlite3session_indirect)(e,t),aa=r._sqlite3session_isempty=e=>(aa=r._sqlite3session_isempty=y.sqlite3session_isempty)(e),ca=r._sqlite3session_memory_used=e=>(ca=r._sqlite3session_memory_used=y.sqlite3session_memory_used)(e),_a=r._sqlite3session_object_config=(e,t,n)=>(_a=r._sqlite3session_object_config=y.sqlite3session_object_config)(e,t,n),ua=r._sqlite3session_changeset_size=e=>(ua=r._sqlite3session_changeset_size=y.sqlite3session_changeset_size)(e),fa=r._sqlite3changeset_start=(e,t,n)=>(fa=r._sqlite3changeset_start=y.sqlite3changeset_start)(e,t,n),da=r._sqlite3changeset_start_v2=(e,t,n,o)=>(da=r._sqlite3changeset_start_v2=y.sqlite3changeset_start_v2)(e,t,n,o),pa=r._sqlite3changeset_start_strm=(e,t,n)=>(pa=r._sqlite3changeset_start_strm=y.sqlite3changeset_start_strm)(e,t,n),ha=r._sqlite3changeset_start_v2_strm=(e,t,n,o)=>(ha=r._sqlite3changeset_start_v2_strm=y.sqlite3changeset_start_v2_strm)(e,t,n,o),ma=r._sqlite3changeset_next=e=>(ma=r._sqlite3changeset_next=y.sqlite3changeset_next)(e),ga=r._sqlite3changeset_op=(e,t,n,o,s)=>(ga=r._sqlite3changeset_op=y.sqlite3changeset_op)(e,t,n,o,s),ya=r._sqlite3changeset_pk=(e,t,n)=>(ya=r._sqlite3changeset_pk=y.sqlite3changeset_pk)(e,t,n),qa=r._sqlite3changeset_old=(e,t,n)=>(qa=r._sqlite3changeset_old=y.sqlite3changeset_old)(e,t,n),ba=r._sqlite3changeset_new=(e,t,n)=>(ba=r._sqlite3changeset_new=y.sqlite3changeset_new)(e,t,n),wa=r._sqlite3changeset_conflict=(e,t,n)=>(wa=r._sqlite3changeset_conflict=y.sqlite3changeset_conflict)(e,t,n),xa=r._sqlite3changeset_fk_conflicts=(e,t)=>(xa=r._sqlite3changeset_fk_conflicts=y.sqlite3changeset_fk_conflicts)(e,t),va=r._sqlite3changeset_finalize=e=>(va=r._sqlite3changeset_finalize=y.sqlite3changeset_finalize)(e),Ea=r._sqlite3changeset_invert=(e,t,n,o)=>(Ea=r._sqlite3changeset_invert=y.sqlite3changeset_invert)(e,t,n,o),Sa=r._sqlite3changeset_invert_strm=(e,t,n,o)=>(Sa=r._sqlite3changeset_invert_strm=y.sqlite3changeset_invert_strm)(e,t,n,o),Aa=r._sqlite3changeset_apply_v2=(e,t,n,o,s,i,g,q,B)=>(Aa=r._sqlite3changeset_apply_v2=y.sqlite3changeset_apply_v2)(e,t,n,o,s,i,g,q,B),Ia=r._sqlite3changeset_apply=(e,t,n,o,s,i)=>(Ia=r._sqlite3changeset_apply=y.sqlite3changeset_apply)(e,t,n,o,s,i),ka=r._sqlite3changeset_apply_v2_strm=(e,t,n,o,s,i,g,q,B)=>(ka=r._sqlite3changeset_apply_v2_strm=y.sqlite3changeset_apply_v2_strm)(e,t,n,o,s,i,g,q,B),Ta=r._sqlite3changeset_apply_strm=(e,t,n,o,s,i)=>(Ta=r._sqlite3changeset_apply_strm=y.sqlite3changeset_apply_strm)(e,t,n,o,s,i),Fa=r._sqlite3changegroup_new=e=>(Fa=r._sqlite3changegroup_new=y.sqlite3changegroup_new)(e),Oa=r._sqlite3changegroup_add=(e,t,n)=>(Oa=r._sqlite3changegroup_add=y.sqlite3changegroup_add)(e,t,n),Pa=r._sqlite3changegroup_output=(e,t,n)=>(Pa=r._sqlite3changegroup_output=y.sqlite3changegroup_output)(e,t,n),La=r._sqlite3changegroup_add_strm=(e,t,n)=>(La=r._sqlite3changegroup_add_strm=y.sqlite3changegroup_add_strm)(e,t,n),Ca=r._sqlite3changegroup_output_strm=(e,t,n)=>(Ca=r._sqlite3changegroup_output_strm=y.sqlite3changegroup_output_strm)(e,t,n),Ra=r._sqlite3changegroup_delete=e=>(Ra=r._sqlite3changegroup_delete=y.sqlite3changegroup_delete)(e),Da=r._sqlite3changeset_concat=(e,t,n,o,s,i)=>(Da=r._sqlite3changeset_concat=y.sqlite3changeset_concat)(e,t,n,o,s,i),Na=r._sqlite3changeset_concat_strm=(e,t,n,o,s,i)=>(Na=r._sqlite3changeset_concat_strm=y.sqlite3changeset_concat_strm)(e,t,n,o,s,i),Ma=r._sqlite3session_config=(e,t)=>(Ma=r._sqlite3session_config=y.sqlite3session_config)(e,t),Ua=r._sqlite3_sourceid=()=>(Ua=r._sqlite3_sourceid=y.sqlite3_sourceid)(),Ba=r._sqlite3__wasm_pstack_ptr=()=>(Ba=r._sqlite3__wasm_pstack_ptr=y.sqlite3__wasm_pstack_ptr)(),ja=r._sqlite3__wasm_pstack_restore=e=>(ja=r._sqlite3__wasm_pstack_restore=y.sqlite3__wasm_pstack_restore)(e),za=r._sqlite3__wasm_pstack_alloc=e=>(za=r._sqlite3__wasm_pstack_alloc=y.sqlite3__wasm_pstack_alloc)(e),Wa=r._sqlite3__wasm_pstack_remaining=()=>(Wa=r._sqlite3__wasm_pstack_remaining=y.sqlite3__wasm_pstack_remaining)(),Qa=r._sqlite3__wasm_pstack_quota=()=>(Qa=r._sqlite3__wasm_pstack_quota=y.sqlite3__wasm_pstack_quota)(),Va=r._sqlite3__wasm_db_error=(e,t,n)=>(Va=r._sqlite3__wasm_db_error=y.sqlite3__wasm_db_error)(e,t,n),Ha=r._sqlite3__wasm_test_struct=e=>(Ha=r._sqlite3__wasm_test_struct=y.sqlite3__wasm_test_struct)(e),$a=r._sqlite3__wasm_enum_json=()=>($a=r._sqlite3__wasm_enum_json=y.sqlite3__wasm_enum_json)(),Ga=r._sqlite3__wasm_vfs_unlink=(e,t)=>(Ga=r._sqlite3__wasm_vfs_unlink=y.sqlite3__wasm_vfs_unlink)(e,t),Ka=r._sqlite3__wasm_db_vfs=(e,t)=>(Ka=r._sqlite3__wasm_db_vfs=y.sqlite3__wasm_db_vfs)(e,t),Ja=r._sqlite3__wasm_db_reset=e=>(Ja=r._sqlite3__wasm_db_reset=y.sqlite3__wasm_db_reset)(e),Xa=r._sqlite3__wasm_db_export_chunked=(e,t)=>(Xa=r._sqlite3__wasm_db_export_chunked=y.sqlite3__wasm_db_export_chunked)(e,t),Ya=r._sqlite3__wasm_db_serialize=(e,t,n,o,s)=>(Ya=r._sqlite3__wasm_db_serialize=y.sqlite3__wasm_db_serialize)(e,t,n,o,s),Za=r._sqlite3__wasm_vfs_create_file=(e,t,n,o)=>(Za=r._sqlite3__wasm_vfs_create_file=y.sqlite3__wasm_vfs_create_file)(e,t,n,o),ec=r._sqlite3__wasm_posix_create_file=(e,t,n)=>(ec=r._sqlite3__wasm_posix_create_file=y.sqlite3__wasm_posix_create_file)(e,t,n),tc=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(tc=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=y.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),rc=r._sqlite3__wasm_kvvfs_methods=()=>(rc=r._sqlite3__wasm_kvvfs_methods=y.sqlite3__wasm_kvvfs_methods)(),nc=r._sqlite3__wasm_vtab_config=(e,t,n)=>(nc=r._sqlite3__wasm_vtab_config=y.sqlite3__wasm_vtab_config)(e,t,n),sc=r._sqlite3__wasm_db_config_ip=(e,t,n,o)=>(sc=r._sqlite3__wasm_db_config_ip=y.sqlite3__wasm_db_config_ip)(e,t,n,o),ic=r._sqlite3__wasm_db_config_pii=(e,t,n,o,s)=>(ic=r._sqlite3__wasm_db_config_pii=y.sqlite3__wasm_db_config_pii)(e,t,n,o,s),oc=r._sqlite3__wasm_db_config_s=(e,t,n)=>(oc=r._sqlite3__wasm_db_config_s=y.sqlite3__wasm_db_config_s)(e,t,n),lc=r._sqlite3__wasm_config_i=(e,t)=>(lc=r._sqlite3__wasm_config_i=y.sqlite3__wasm_config_i)(e,t),ac=r._sqlite3__wasm_config_ii=(e,t,n)=>(ac=r._sqlite3__wasm_config_ii=y.sqlite3__wasm_config_ii)(e,t,n),cc=r._sqlite3__wasm_config_j=(e,t)=>(cc=r._sqlite3__wasm_config_j=y.sqlite3__wasm_config_j)(e,t),_c=r._sqlite3__wasm_qfmt_token=(e,t)=>(_c=r._sqlite3__wasm_qfmt_token=y.sqlite3__wasm_qfmt_token)(e,t),uc=r._sqlite3__wasm_init_wasmfs=e=>(uc=r._sqlite3__wasm_init_wasmfs=y.sqlite3__wasm_init_wasmfs)(e),fc=r._sqlite3__wasm_test_intptr=e=>(fc=r._sqlite3__wasm_test_intptr=y.sqlite3__wasm_test_intptr)(e),dc=r._sqlite3__wasm_test_voidptr=e=>(dc=r._sqlite3__wasm_test_voidptr=y.sqlite3__wasm_test_voidptr)(e),pc=r._sqlite3__wasm_test_int64_max=()=>(pc=r._sqlite3__wasm_test_int64_max=y.sqlite3__wasm_test_int64_max)(),hc=r._sqlite3__wasm_test_int64_min=()=>(hc=r._sqlite3__wasm_test_int64_min=y.sqlite3__wasm_test_int64_min)(),mc=r._sqlite3__wasm_test_int64_times2=e=>(mc=r._sqlite3__wasm_test_int64_times2=y.sqlite3__wasm_test_int64_times2)(e),gc=r._sqlite3__wasm_test_int64_minmax=(e,t)=>(gc=r._sqlite3__wasm_test_int64_minmax=y.sqlite3__wasm_test_int64_minmax)(e,t),yc=r._sqlite3__wasm_test_int64ptr=e=>(yc=r._sqlite3__wasm_test_int64ptr=y.sqlite3__wasm_test_int64ptr)(e),qc=r._sqlite3__wasm_test_stack_overflow=e=>(qc=r._sqlite3__wasm_test_stack_overflow=y.sqlite3__wasm_test_stack_overflow)(e),bc=r._sqlite3__wasm_test_str_hello=e=>(bc=r._sqlite3__wasm_test_str_hello=y.sqlite3__wasm_test_str_hello)(e),wc=r._sqlite3__wasm_SQLTester_strglob=(e,t)=>(wc=r._sqlite3__wasm_SQLTester_strglob=y.sqlite3__wasm_SQLTester_strglob)(e,t),xc=r._malloc=e=>(xc=r._malloc=y.malloc)(e),vc=r._free=e=>(vc=r._free=y.free)(e),Ec=r._realloc=(e,t)=>(Ec=r._realloc=y.realloc)(e,t),Hr=(e,t)=>(Hr=y.emscripten_builtin_memalign)(e,t),$r=e=>($r=y._emscripten_stack_restore)(e),Sc=e=>(Sc=y._emscripten_stack_alloc)(e),Gr=()=>(Gr=y.emscripten_stack_get_current)();r.wasmMemory=ut;var er,Kr;Wt=function e(){er||Jr(),er||(Wt=e)};function Jr(){if(Tt>0||!Kr&&(Kr=1,Pn(),Tt>0))return;function e(){er||(er=1,r.calledRun=1,!jt&&(Ln(),S(r),r.onRuntimeInitialized?.(),Cn()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),e()},1)):e()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Jr(),r.runSQLite3PostLoadInit=function(e){"use strict";"use strict";if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;let o=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof r<"u"&&r.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(o,{allocExportName:o.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:o.useStdAlloc?"free":"sqlite3_free",reallocExportName:o.useStdAlloc?"realloc":"sqlite3_realloc"},o),["exports","memory","wasmfsOpfsDir"].forEach(a=>{typeof o[a]=="function"&&(o[a]=o[a]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;let s=Object.create(null),i=Object.create(null),g=a=>s.sqlite3_js_rc_str&&s.sqlite3_js_rc_str(a)||"Unknown result code #"+a,q=a=>typeof a=="number"&&a===(a|0);class B extends Error{constructor(...f){let _;if(f.length)if(q(f[0]))if(_=f[0],f.length===1)super(g(f[0]));else{let x=g(_);typeof f[1]=="object"?super(x,f[1]):(f[0]=x+":",super(f.join(" ")))}else f.length===2&&typeof f[1]=="object"?super(...f):super(f.join(" "));this.resultCode=_||s.SQLITE_ERROR,this.name="SQLite3Error"}}B.toss=(...a)=>{throw new B(...a)};let H=B.toss;o.wasmfsOpfsDir&&!/^\/[^/]+$/.test(o.wasmfsOpfsDir)&&H("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");let te=a=>typeof a!="bigint"&&a===(a|0)&&a<=2147483647&&a>=-2147483648,Y=function a(f){return a._max||(a._max=BigInt("0x7fffffffffffffff"),a._min=~a._max),f>=a._min&&f<=a._max},ie=a=>a>=-0x7fffffffn-1n&&a<=0x7fffffffn,L=function a(f){return a._min||(a._min=Number.MIN_SAFE_INTEGER,a._max=Number.MAX_SAFE_INTEGER),f>=a._min&&f<=a._max},C=a=>a&&a.constructor&&te(a.constructor.BYTES_PER_ELEMENT)?a:!1,M=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,I=a=>a.buffer instanceof M,w=(a,f,_)=>I(a)?a.slice(f,_):a.subarray(f,_),U=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),V=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),$=a=>U(a)||H("Value is not of a supported TypedArray type."),E=new TextDecoder("utf-8"),K=function(a,f,_){return E.decode(w(a,f,_))},d=function(a){return V(a)?K(a instanceof ArrayBuffer?new Uint8Array(a):a):Array.isArray(a)?a.join(""):(i.isPtr(a)&&(a=i.cstrToJs(a)),a)};class h extends Error{constructor(...f){f.length===2&&typeof f[1]=="object"?super(...f):f.length?super(f.join(" ")):super("Allocation failed."),this.resultCode=s.SQLITE_NOMEM,this.name="WasmAllocError"}}h.toss=(...a)=>{throw new h(...a)},Object.assign(s,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(a,f,_,x,J,ce,we,he,Ee)=>{},sqlite3_create_function:(a,f,_,x,J,ce,we,he)=>{},sqlite3_create_window_function:(a,f,_,x,J,ce,we,he,Ee,Te)=>{},sqlite3_prepare_v3:(a,f,_,x,J,ce)=>{},sqlite3_prepare_v2:(a,f,_,x,J)=>{},sqlite3_exec:(a,f,_,x,J)=>{},sqlite3_randomness:(a,f)=>{}});let k={affirmBindableTypedArray:$,flexibleString:d,bigIntFits32:ie,bigIntFits64:Y,bigIntFitsDouble:L,isBindableTypedArray:U,isInt32:te,isSQLableTypedArray:V,isTypedArray:C,typedArrayToString:K,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:I,toss:function(...a){throw new Error(a.join(" "))},toss3:H,typedArrayPart:w,affirmDbHeader:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));let f="SQLite format 3";f.length>a.byteLength&&H("Input does not contain an SQLite3 database header.");for(let _=0;_<f.length;++_)f.charCodeAt(_)!==a[_]&&H("Input does not contain an SQLite3 database header.")},affirmIsDb:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));let f=a.byteLength;(f<512||f%512!==0)&&H("Byte array size",f,"is invalid for an SQLite3 db."),k.affirmDbHeader(a)}};Object.assign(i,{ptrSizeof:o.wasmPtrSizeof||4,ptrIR:o.wasmPtrIR||"i32",bigIntEnabled:!!o.bigIntEnabled,exports:o.exports||H("Missing API config.exports (WASM module exports)."),memory:o.memory||o.exports.memory||H("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),i.allocFromTypedArray=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a)),$(a);let f=i.alloc(a.byteLength||1);return i.heapForSize(a.constructor).set(a.byteLength?a:[0],f),f};{let a=o.allocExportName,f=o.deallocExportName,_=o.reallocExportName;for(let x of[a,f,_])i.exports[x]instanceof Function||H("Missing required exports[",x,"] function.");i.alloc=function x(J){return x.impl(J)||h.toss("Failed to allocate",J," bytes.")},i.alloc.impl=i.exports[a],i.realloc=function x(J,ce){let we=x.impl(J,ce);return ce?we||h.toss("Failed to reallocate",ce," bytes."):0},i.realloc.impl=i.exports[_],i.dealloc=i.exports[f]}i.compileOptionUsed=function a(f){if(arguments.length){if(Array.isArray(f)){let _={};return f.forEach(x=>{_[x]=s.sqlite3_compileoption_used(x)}),_}else if(typeof f=="object")return Object.keys(f).forEach(_=>{f[_]=s.sqlite3_compileoption_used(_)}),f}else{if(a._result)return a._result;a._opt||(a._rx=/^([^=]+)=(.+)/,a._rxInt=/^-?\d+$/,a._opt=function(we,he){let Ee=a._rx.exec(we);he[0]=Ee?Ee[1]:we,he[1]=Ee?a._rxInt.test(Ee[2])?+Ee[2]:Ee[2]:!0});let _={},x=[0,0],J=0,ce;for(;ce=s.sqlite3_compileoption_get(J++);)a._opt(ce,x),_[x[0]]=x[1];return a._result=_}return typeof f=="string"?!!s.sqlite3_compileoption_used(f):!1},i.pstack=Object.assign(Object.create(null),{restore:i.exports.sqlite3__wasm_pstack_restore,alloc:function(a){return typeof a=="string"&&!(a=i.sizeofIR(a))&&h.toss("Invalid value for pstack.alloc(",arguments[0],")"),i.exports.sqlite3__wasm_pstack_alloc(a)||h.toss("Could not allocate",a,"bytes from the pstack.")},allocChunks:function(a,f){typeof f=="string"&&!(f=i.sizeofIR(f))&&h.toss("Invalid size value for allocChunks(",arguments[1],")");let _=i.pstack.alloc(a*f),x=[],J=0,ce=0;for(;J<a;++J,ce+=f)x.push(_+ce);return x},allocPtr:(a=1,f=!0)=>a===1?i.pstack.alloc(f?8:i.ptrSizeof):i.pstack.allocChunks(a,f?8:i.ptrSizeof),call:function(a){let f=i.pstack.pointer;try{return a(m)}finally{i.pstack.restore(f)}}}),Object.defineProperties(i.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3__wasm_pstack_remaining}}),s.sqlite3_randomness=(...a)=>{if(a.length===1&&k.isTypedArray(a[0])&&a[0].BYTES_PER_ELEMENT===1){let f=a[0];if(f.byteLength===0)return i.exports.sqlite3_randomness(0,0),f;let _=i.pstack.pointer;try{let x=f.byteLength,J=0,ce=i.exports.sqlite3_randomness,we=i.heap8u(),he=x<512?x:512,Ee=i.pstack.alloc(he);do{let Te=x>he?he:x;ce(Te,Ee),f.set(w(we,Ee,Ee+Te),J),x-=Te,J+=Te}while(x>0)}catch(x){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",x)}finally{i.pstack.restore(_)}return f}i.exports.sqlite3_randomness(...a)};let z;if(s.sqlite3_wasmfs_opfs_dir=function(){if(z!==void 0)return z;let a=o.wasmfsOpfsDir;if(!a||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return z="";try{return a&&i.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],a)===0?z=a:z=""}catch{return z=""}},s.sqlite3_wasmfs_filename_is_persistent=function(a){let f=s.sqlite3_wasmfs_opfs_dir();return f&&a?a.startsWith(f+"/"):!1},s.sqlite3_js_db_uses_vfs=function(a,f,_=0){try{let x=s.sqlite3_vfs_find(f);return x?a?x===s.sqlite3_js_db_vfs(a,_)?x:!1:x===s.sqlite3_vfs_find(0)?x:!1:!1}catch{return!1}},s.sqlite3_js_vfs_list=function(){let a=[],f=s.sqlite3_vfs_find(0);for(;f;){let _=new s.sqlite3_vfs(f);a.push(i.cstrToJs(_.$zName)),f=_.$pNext,_.dispose()}return a},s.sqlite3_js_db_export=function(a,f=0){a=i.xWrap.testConvertArg("sqlite3*",a),a||H("Invalid sqlite3* argument."),i.bigIntEnabled||H("BigInt64 support is not enabled.");let _=i.scopedAllocPush(),x;try{let J=i.scopedAlloc(8+i.ptrSizeof),ce=J+8,we=f?i.isPtr(f)?f:i.scopedAllocCString(""+f):0,he=i.exports.sqlite3__wasm_db_serialize(a,we,ce,J,0);he&&H("Database serialization failed with code",m.capi.sqlite3_js_rc_str(he)),x=i.peekPtr(ce);let Ee=i.peek(J,"i64");return he=Ee?i.heap8u().slice(x,x+Number(Ee)):new Uint8Array,he}finally{x&&i.exports.sqlite3_free(x),i.scopedAllocPop(_)}},s.sqlite3_js_db_vfs=(a,f=0)=>k.sqlite3__wasm_db_vfs(a,f),s.sqlite3_js_aggregate_context=(a,f)=>s.sqlite3_aggregate_context(a,f)||(f?h.toss("Cannot allocate",f,"bytes for sqlite3_aggregate_context()"):0),s.sqlite3_js_posix_create_file=function(a,f,_){let x;f&&i.isPtr(f)?x=f:f instanceof ArrayBuffer||f instanceof Uint8Array?(x=i.allocFromTypedArray(f),(arguments.length<3||!k.isInt32(_)||_<0)&&(_=f.byteLength)):B.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!k.isInt32(_)||_<0)&&B.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");let J=k.sqlite3__wasm_posix_create_file(a,x,_);J&&B.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(J))}finally{i.dealloc(x)}},s.sqlite3_js_vfs_create_file=function(a,f,_,x){o.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let J;_?(i.isPtr(_)?J=_:_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),_ instanceof Uint8Array?(J=i.allocFromTypedArray(_),(arguments.length<4||!k.isInt32(x)||x<0)&&(x=_.byteLength)):B.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):J=0,(!k.isInt32(x)||x<0)&&(i.dealloc(J),B.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{let ce=k.sqlite3__wasm_vfs_create_file(a,f,J,x);ce&&B.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(ce))}finally{i.dealloc(J)}},s.sqlite3_js_sql_to_string=a=>{if(typeof a=="string")return a;let f=d(v);return f===v?void 0:f},k.isUIThread()){let a=function(f){let _=Object.create(null);return _.prefix="kvvfs-"+f,_.stores=[],(f==="session"||f==="")&&_.stores.push(globalThis.sessionStorage),(f==="local"||f==="")&&_.stores.push(globalThis.localStorage),_};s.sqlite3_js_kvvfs_clear=function(f=""){let _=0,x=a(f);return x.stores.forEach(J=>{let ce=[],we;for(we=0;we<J.length;++we){let he=J.key(we);he.startsWith(x.prefix)&&ce.push(he)}ce.forEach(he=>J.removeItem(he)),_+=ce.length}),_},s.sqlite3_js_kvvfs_size=function(f=""){let _=0,x=a(f);return x.stores.forEach(J=>{let ce;for(ce=0;ce<J.length;++ce){let we=J.key(ce);we.startsWith(x.prefix)&&(_+=we.length,_+=J.getItem(we).length)}}),_*2}}s.sqlite3_db_config=function(a,f,..._){switch(f){case s.SQLITE_DBCONFIG_ENABLE_FKEY:case s.SQLITE_DBCONFIG_ENABLE_TRIGGER:case s.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case s.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case s.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case s.SQLITE_DBCONFIG_ENABLE_QPSG:case s.SQLITE_DBCONFIG_TRIGGER_EQP:case s.SQLITE_DBCONFIG_RESET_DATABASE:case s.SQLITE_DBCONFIG_DEFENSIVE:case s.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case s.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case s.SQLITE_DBCONFIG_DQS_DML:case s.SQLITE_DBCONFIG_DQS_DDL:case s.SQLITE_DBCONFIG_ENABLE_VIEW:case s.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case s.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case s.SQLITE_DBCONFIG_STMT_SCANSTATUS:case s.SQLITE_DBCONFIG_REVERSE_SCANORDER:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case s.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=i.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(a,f,_[0],_[1]||0);case s.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=i.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(a,f,_[0],_[1],_[2]);case s.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=i.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(a,f,_[0]);default:return s.SQLITE_MISUSE}}.bind(Object.create(null)),s.sqlite3_value_to_js=function(a,f=!0){let _,x=s.sqlite3_value_type(a);switch(x){case s.SQLITE_INTEGER:i.bigIntEnabled?(_=s.sqlite3_value_int64(a),k.bigIntFitsDouble(_)&&(_=Number(_))):_=s.sqlite3_value_double(a);break;case s.SQLITE_FLOAT:_=s.sqlite3_value_double(a);break;case s.SQLITE_TEXT:_=s.sqlite3_value_text(a);break;case s.SQLITE_BLOB:{let J=s.sqlite3_value_bytes(a),ce=s.sqlite3_value_blob(a);J&&!ce&&m.WasmAllocError.toss("Cannot allocate memory for blob argument of",J,"byte(s)"),_=J?i.heap8u().slice(ce,ce+Number(J)):null;break}case s.SQLITE_NULL:_=null;break;default:f&&H(s.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",x),_=void 0}return _},s.sqlite3_values_to_js=function(a,f,_=!0){let x,J=[];for(x=0;x<a;++x)J.push(s.sqlite3_value_to_js(i.peekPtr(f+i.ptrSizeof*x),_));return J},s.sqlite3_result_error_js=function(a,f){f instanceof h?s.sqlite3_result_error_nomem(a):s.sqlite3_result_error(a,""+f,-1)},s.sqlite3_result_js=function(a,f){if(f instanceof Error){s.sqlite3_result_error_js(a,f);return}try{switch(typeof f){case"undefined":break;case"boolean":s.sqlite3_result_int(a,f?1:0);break;case"bigint":k.bigIntFits32(f)?s.sqlite3_result_int(a,Number(f)):k.bigIntFitsDouble(f)?s.sqlite3_result_double(a,Number(f)):i.bigIntEnabled?k.bigIntFits64(f)?s.sqlite3_result_int64(a,f):H("BigInt value",f.toString(),"is too BigInt for int64."):H("BigInt value",f.toString(),"is too BigInt.");break;case"number":{let _;k.isInt32(f)?_=s.sqlite3_result_int:i.bigIntEnabled&&Number.isInteger(f)&&k.bigIntFits64(BigInt(f))?_=s.sqlite3_result_int64:_=s.sqlite3_result_double,_(a,f);break}case"string":{let[_,x]=i.allocCString(f,!0);s.sqlite3_result_text(a,_,x,s.SQLITE_WASM_DEALLOC);break}case"object":if(f===null){s.sqlite3_result_null(a);break}else if(k.isBindableTypedArray(f)){let _=i.allocFromTypedArray(f);s.sqlite3_result_blob(a,_,f.byteLength,s.SQLITE_WASM_DEALLOC);break}default:H("Don't not how to handle this UDF result value:",typeof f,f)}}catch(_){s.sqlite3_result_error_js(a,_)}},s.sqlite3_column_js=function(a,f,_=!0){let x=s.sqlite3_column_value(a,f);return x===0?void 0:s.sqlite3_value_to_js(x,_)};let Q=function(a,f,_){_=s[_],this.ptr?i.pokePtr(this.ptr,0):this.ptr=i.allocPtr();let x=_(a,f,this.ptr);if(x)return B.toss(x,arguments[2]+"() failed with code "+x);let J=i.peekPtr(this.ptr);return J?s.sqlite3_value_to_js(J,!0):void 0}.bind(Object.create(null));s.sqlite3_preupdate_new_js=(a,f)=>Q(a,f,"sqlite3_preupdate_new"),s.sqlite3_preupdate_old_js=(a,f)=>Q(a,f,"sqlite3_preupdate_old"),s.sqlite3changeset_new_js=(a,f)=>Q(a,f,"sqlite3changeset_new"),s.sqlite3changeset_old_js=(a,f)=>Q(a,f,"sqlite3changeset_old");let m={WasmAllocError:h,SQLite3Error:B,capi:s,util:k,wasm:i,config:o,version:Object.create(null),client:void 0,asyncPostInit:async function a(){if(a.isReady instanceof Promise)return a.isReady;let f=t.initializersAsync;delete t.initializersAsync;let _=async()=>(m.__isUnderTest||(delete m.util,delete m.StructBinder),m),x=ce=>{throw o.error("an async sqlite3 initializer failed:",ce),ce};if(!f||!f.length)return a.isReady=_().catch(x);f=f.map(ce=>ce instanceof Function?async we=>ce(m):ce),f.push(_);let J=Promise.resolve(m);for(;f.length;)J=J.then(f.shift());return a.isReady=J.catch(x)},scriptInfo:void 0};try{t.initializers.forEach(a=>{a(m)})}catch(a){throw console.error("sqlite3 bootstrap initializer threw:",a),a}return delete t.initializers,t.sqlite3=m,m},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){"use strict";t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);let n=(...d)=>{throw new Error(d.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});let o=t.pointerIR||"i32",s=t.ptrSizeof=o==="i32"?4:o==="i64"?8:n("Unhandled ptrSizeof:",o),i=Object.create(null);i.heapSize=0,i.memory=null,i.freeFuncIndexes=[],i.scopedAlloc=[],i.utf8Decoder=new TextDecoder,i.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=d=>{switch(d){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return s;default:return(""+d).endsWith("*")?s:void 0}};let g=function(){if(!i.memory)i.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(i.heapSize===i.memory.buffer.byteLength)return i;let d=i.memory.buffer;return i.HEAP8=new Int8Array(d),i.HEAP8U=new Uint8Array(d),i.HEAP16=new Int16Array(d),i.HEAP16U=new Uint16Array(d),i.HEAP32=new Int32Array(d),i.HEAP32U=new Uint32Array(d),t.bigIntEnabled&&(i.HEAP64=new BigInt64Array(d),i.HEAP64U=new BigUint64Array(d)),i.HEAP32F=new Float32Array(d),i.HEAP64F=new Float64Array(d),i.heapSize=d.byteLength,i};t.heap8=()=>g().HEAP8,t.heap8u=()=>g().HEAP8U,t.heap16=()=>g().HEAP16,t.heap16u=()=>g().HEAP16U,t.heap32=()=>g().HEAP32,t.heap32u=()=>g().HEAP32U,t.heapForSize=function(d,h=!0){let k,z=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:g();switch(d){case Int8Array:return z.HEAP8;case Uint8Array:return z.HEAP8U;case Int16Array:return z.HEAP16;case Uint16Array:return z.HEAP16U;case Int32Array:return z.HEAP32;case Uint32Array:return z.HEAP32U;case 8:return h?z.HEAP8U:z.HEAP8;case 16:return h?z.HEAP16U:z.HEAP16;case 32:return h?z.HEAP32U:z.HEAP32;case 64:if(z.HEAP64)return h?z.HEAP64U:z.HEAP64;break;default:if(t.bigIntEnabled){if(d===globalThis.BigUint64Array)return z.HEAP64U;if(d===globalThis.BigInt64Array)return z.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(d){let h=t.functionTable();return d<h.length?h.get(d):void 0},t.jsFuncToWasm=function d(h,k){if(d._||(d._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(m,a,f){f<128?m[a](f):m[a](f%128|128,f>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(m){let a=d._.rxJSig.exec(m);return a?a[2]:m.substr(1)},letterType:m=>d._.sigTypes[m]||n("Invalid signature letter:",m),pushSigType:(m,a)=>m.push(d._.typeCodes[d._.letterType(a)])}),typeof h=="string"){let m=k;k=h,h=m}let z=d._.sigParams(k),Q=[1,96];d._.uleb128Encode(Q,"push",z.length);for(let m of z)d._.pushSigType(Q,m);return k[0]==="v"?Q.push(0):(Q.push(1),d._.pushSigType(Q,k[0])),d._.uleb128Encode(Q,"unshift",Q.length),Q.unshift(0,97,115,109,1,0,0,0,1),Q.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(Q)),{e:{f:h}}).exports.f};let q=function(h,k,z){if(z&&!i.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof h=="string"){let f=k;k=h,h=f}(typeof k!="string"||!(h instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");let Q=t.functionTable(),m=Q.length,a;for(;i.freeFuncIndexes.length&&(a=i.freeFuncIndexes.pop(),Q.get(a));){a=null;continue}a||(a=m,Q.grow(1));try{return Q.set(a,h),z&&i.scopedAlloc[i.scopedAlloc.length-1].push(a),a}catch(f){if(!(f instanceof TypeError))throw a===m&&i.freeFuncIndexes.push(m),f}try{let f=t.jsFuncToWasm(h,k);Q.set(a,f),z&&i.scopedAlloc[i.scopedAlloc.length-1].push(a)}catch(f){throw a===m&&i.freeFuncIndexes.push(m),f}return a};t.installFunction=(d,h)=>q(d,h,!1),t.scopedInstallFunction=(d,h)=>q(d,h,!0),t.uninstallFunction=function(d){if(!d&&d!==0)return;let h=i.freeFuncIndexes,k=t.functionTable();h.push(d);let z=k.get(d);return k.set(d,null),z},t.peek=function(h,k="i8"){k.endsWith("*")&&(k=o);let z=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:g(),Q=Array.isArray(h)?[]:void 0,m;do{switch(Q&&(h=arguments[0].shift()),k){case"i1":case"i8":m=z.HEAP8[h>>0];break;case"i16":m=z.HEAP16[h>>1];break;case"i32":m=z.HEAP32[h>>2];break;case"float":case"f32":m=z.HEAP32F[h>>2];break;case"double":case"f64":m=Number(z.HEAP64F[h>>3]);break;case"i64":if(t.bigIntEnabled){m=BigInt(z.HEAP64[h>>3]);break}default:n("Invalid type for peek():",k)}Q&&Q.push(m)}while(Q&&arguments[0].length);return Q||m},t.poke=function(d,h,k="i8"){k.endsWith("*")&&(k=o);let z=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:g();for(let Q of Array.isArray(d)?d:[d])switch(k){case"i1":case"i8":z.HEAP8[Q>>0]=h;continue;case"i16":z.HEAP16[Q>>1]=h;continue;case"i32":z.HEAP32[Q>>2]=h;continue;case"float":case"f32":z.HEAP32F[Q>>2]=h;continue;case"double":case"f64":z.HEAP64F[Q>>3]=h;continue;case"i64":if(z.HEAP64){z.HEAP64[Q>>3]=BigInt(h);continue}default:n("Invalid type for poke(): "+k)}return this},t.peekPtr=(...d)=>t.peek(d.length===1?d[0]:d,o),t.pokePtr=(d,h=0)=>t.poke(d,h,o),t.peek8=(...d)=>t.peek(d.length===1?d[0]:d,"i8"),t.poke8=(d,h)=>t.poke(d,h,"i8"),t.peek16=(...d)=>t.peek(d.length===1?d[0]:d,"i16"),t.poke16=(d,h)=>t.poke(d,h,"i16"),t.peek32=(...d)=>t.peek(d.length===1?d[0]:d,"i32"),t.poke32=(d,h)=>t.poke(d,h,"i32"),t.peek64=(...d)=>t.peek(d.length===1?d[0]:d,"i64"),t.poke64=(d,h)=>t.poke(d,h,"i64"),t.peek32f=(...d)=>t.peek(d.length===1?d[0]:d,"f32"),t.poke32f=(d,h)=>t.poke(d,h,"f32"),t.peek64f=(...d)=>t.peek(d.length===1?d[0]:d,"f64"),t.poke64f=(d,h)=>t.poke(d,h,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=d=>typeof d=="number"&&d===(d|0)&&d>=0,t.isPtr=t.isPtr32,t.cstrlen=function(d){if(!d||!t.isPtr(d))return null;let h=g().HEAP8U,k=d;for(;h[k]!==0;++k);return k-d};let B=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,H=function(d,h,k){return i.utf8Decoder.decode(d.buffer instanceof B?d.slice(h,k):d.subarray(h,k))};t.cstrToJs=function(d){let h=t.cstrlen(d);return h?H(g().HEAP8U,d,d+h):h===null?h:""},t.jstrlen=function(d){if(typeof d!="string")return null;let h=d.length,k=0;for(let z=0;z<h;++z){let Q=d.charCodeAt(z);Q>=55296&&Q<=57343&&(Q=65536+((Q&1023)<<10)|d.charCodeAt(++z)&1023),Q<=127?++k:Q<=2047?k+=2:Q<=65535?k+=3:k+=4}return k},t.jstrcpy=function(d,h,k=0,z=-1,Q=!0){if((!h||!(h instanceof Int8Array)&&!(h instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),z<0&&(z=h.length-k),!(z>0)||!(k>=0))return 0;let m=0,a=d.length,f=k,_=k+z-(Q?1:0);for(;m<a&&k<_;++m){let x=d.charCodeAt(m);if(x>=55296&&x<=57343&&(x=65536+((x&1023)<<10)|d.charCodeAt(++m)&1023),x<=127){if(k>=_)break;h[k++]=x}else if(x<=2047){if(k+1>=_)break;h[k++]=192|x>>6,h[k++]=128|x&63}else if(x<=65535){if(k+2>=_)break;h[k++]=224|x>>12,h[k++]=128|x>>6&63,h[k++]=128|x&63}else{if(k+3>=_)break;h[k++]=240|x>>18,h[k++]=128|x>>12&63,h[k++]=128|x>>6&63,h[k++]=128|x&63}}return Q&&(h[k++]=0),k-f},t.cstrncpy=function(d,h,k){if((!d||!h)&&n("cstrncpy() does not accept NULL strings."),k<0)k=t.cstrlen(strPtr)+1;else if(!(k>0))return 0;let z=t.heap8u(),Q=0,m;for(;Q<k&&(m=z[h+Q]);++Q)z[d+Q]=m;return Q<k&&(z[d+Q++]=0),Q},t.jstrToUintArray=(d,h=!1)=>i.utf8Encoder.encode(h?d+"\0":d);let te=(d,h)=>{(!(d.alloc instanceof Function)||!(d.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",h+"().")},Y=function(d,h,k,z){if(te(t,z),typeof d!="string")return null;{let Q=i.utf8Encoder.encode(d),m=k(Q.length+1),a=g().HEAP8U;return a.set(Q,m),a[m+Q.length]=0,h?[m,Q.length]:m}};t.allocCString=(d,h=!1)=>Y(d,h,t.alloc,"allocCString()"),t.scopedAllocPush=function(){te(t,"scopedAllocPush");let d=[];return i.scopedAlloc.push(d),d},t.scopedAllocPop=function(d){te(t,"scopedAllocPop");let h=arguments.length?i.scopedAlloc.indexOf(d):i.scopedAlloc.length-1;h<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(d=i.scopedAlloc[h]),i.scopedAlloc.splice(h,1);for(let k;k=d.pop();)t.functionEntry(k)?t.uninstallFunction(k):t.dealloc(k)},t.scopedAlloc=function(d){i.scopedAlloc.length||n("No scopedAllocPush() scope is active.");let h=t.alloc(d);return i.scopedAlloc[i.scopedAlloc.length-1].push(h),h},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>i.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(d,h=!1)=>Y(d,h,t.scopedAlloc,"scopedAllocCString()");let ie=function(d,h){let k=t[d?"scopedAlloc":"alloc"]((h.length+1)*t.ptrSizeof),z=0;return h.forEach(Q=>{t.pokePtr(k+t.ptrSizeof*z++,t[d?"scopedAllocCString":"allocCString"](""+Q))}),t.pokePtr(k+t.ptrSizeof*z,0),k};t.scopedAllocMainArgv=d=>ie(!0,d),t.allocMainArgv=d=>ie(!1,d),t.cArgvToJs=(d,h)=>{let k=[];for(let z=0;z<d;++z){let Q=t.peekPtr(h+t.ptrSizeof*z);k.push(Q?t.cstrToJs(Q):null)}return k},t.scopedAllocCall=function(d){t.scopedAllocPush();try{return d()}finally{t.scopedAllocPop()}};let L=function(d,h,k){te(t,k);let z=h?"i64":o,Q=t[k](d*(h?8:s));if(t.poke(Q,0,z),d===1)return Q;let m=[Q];for(let a=1;a<d;++a)Q+=h?8:s,m[a]=Q,t.poke(Q,0,z);return m};t.allocPtr=(d=1,h=!0)=>L(d,h,"alloc"),t.scopedAllocPtr=(d=1,h=!0)=>L(d,h,"scopedAlloc"),t.xGet=function(d){return t.exports[d]||n("Cannot find exported symbol:",d)};let C=(d,h)=>n(d+"() requires",h,"argument(s).");t.xCall=function(d,...h){let k=d instanceof Function?d:t.xGet(d);return k instanceof Function||n("Exported symbol",d,"is not a function."),k.length!==h.length&&C(k===d?k.name:d,k.length),arguments.length===2&&Array.isArray(arguments[1])?k.apply(null,arguments[1]):k.apply(null,h)},i.xWrap=Object.create(null),i.xWrap.convert=Object.create(null),i.xWrap.convert.arg=new Map,i.xWrap.convert.result=new Map;let M=i.xWrap.convert.arg,I=i.xWrap.convert.result;t.bigIntEnabled&&M.set("i64",d=>BigInt(d));let w=o==="i32"?d=>d|0:d=>BigInt(d)|BigInt(0);M.set("i32",w).set("i16",d=>(d|0)&65535).set("i8",d=>(d|0)&255).set("f32",d=>Number(d).valueOf()).set("float",M.get("f32")).set("f64",M.get("f32")).set("double",M.get("f64")).set("int",M.get("i32")).set("null",d=>d).set(null,M.get("null")).set("**",w).set("*",w),I.set("*",w).set("pointer",w).set("number",d=>Number(d)).set("void",d=>{}).set("null",d=>d).set(null,I.get("null"));{let d=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&d.push("i64");let h=M.get(o);for(let k of d)M.set(k+"*",h),I.set(k+"*",h),I.set(k,M.get(k)||n("Missing arg converter:",k))}let U=function(d){return typeof d=="string"?t.scopedAllocCString(d):d?w(d):null};M.set("string",U).set("utf8",U).set("pointer",U),I.set("string",d=>t.cstrToJs(d)).set("utf8",I.get("string")).set("string:dealloc",d=>{try{return d?t.cstrToJs(d):null}finally{t.dealloc(d)}}).set("utf8:dealloc",I.get("string:dealloc")).set("json",d=>JSON.parse(t.cstrToJs(d))).set("json:dealloc",d=>{try{return d?JSON.parse(t.cstrToJs(d)):null}finally{t.dealloc(d)}});let V=class{constructor(d){this.name=d.name||"unnamed adapter"}convertArg(d,h,k){n("AbstractArgAdapter must be subclassed.")}};M.FuncPtrAdapter=class gt extends V{constructor(h){super(h),M.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",h),this.name=h.name||"unnamed",this.signature=h.signature,h.contextKey instanceof Function&&(this.contextKey=h.contextKey,h.bindScope||(h.bindScope="context")),this.bindScope=h.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),gt.bindScopes.indexOf(h.bindScope)<0&&n("Invalid options.bindScope ("+h.bindMod+") for FuncPtrAdapter. Expecting one of: ("+gt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=h.callProxy instanceof Function?h.callProxy:void 0}contextKey(h,k){return this}contextMap(h){let k=this.__cmap||(this.__cmap=new Map),z=k.get(h);return z===void 0&&k.set(h,z=[]),z}convertArg(h,k,z){let Q=this.singleton;if(!Q&&this.isContext&&(Q=this.contextMap(this.contextKey(k,z))),Q&&Q[0]===h)return Q[1];if(h instanceof Function){this.callProxy&&(h=this.callProxy(h));let m=q(h,this.signature,this.isTransient);if(gt.debugFuncInstall&&gt.debugOut("FuncPtrAdapter installed",this,this.contextKey(k,z),"@"+m,h),Q){if(Q[1]){gt.debugFuncInstall&&gt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,z),"@"+Q[1],h);try{i.scopedAlloc[i.scopedAlloc.length-1].push(Q[1])}catch{}}Q[0]=h,Q[1]=m}return m}else if(t.isPtr(h)||h===null||h===void 0){if(Q&&Q[1]&&Q[1]!==h){gt.debugFuncInstall&&gt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,z),"@"+Q[1],h);try{i.scopedAlloc[i.scopedAlloc.length-1].push(Q[1])}catch{}Q[0]=Q[1]=h|0}return h||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},M.FuncPtrAdapter.warnOnUse=!1,M.FuncPtrAdapter.debugFuncInstall=!1,M.FuncPtrAdapter.debugOut=console.debug.bind(console),M.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];let $=d=>M.get(d)||n("Argument adapter not found:",d),E=d=>I.get(d)||n("Result adapter not found:",d);i.xWrap.convertArg=(d,...h)=>$(d)(...h),i.xWrap.convertArgNoCheck=(d,...h)=>M.get(d)(...h),i.xWrap.convertResult=(d,h)=>d===null?h:d?E(d)(h):void 0,i.xWrap.convertResultNoCheck=(d,h)=>d===null?h:d?I.get(d)(h):void 0,t.xWrap=function(d,h,...k){arguments.length===3&&Array.isArray(arguments[2])&&(k=arguments[2]),t.isPtr(d)&&(d=t.functionEntry(d)||n("Function pointer not found in WASM function table."));let z=d instanceof Function,Q=z?d:t.xGet(d);if(z&&(d=Q.name||"unnamed function"),k.length!==Q.length&&C(d,Q.length),h===null&&Q.length===0)return Q;h!=null&&E(h);for(let a of k)a instanceof V?M.set(a,(...f)=>a.convertArg(...f)):$(a);let m=i.xWrap;return Q.length===0?(...a)=>a.length?C(d,Q.length):m.convertResult(h,Q.call(null)):function(...a){a.length!==Q.length&&C(d,Q.length);let f=t.scopedAllocPush();try{let _=0;for(;_<a.length;++_)a[_]=m.convertArgNoCheck(k[_],a[_],a,_);return m.convertResultNoCheck(h,Q.apply(null,a))}finally{t.scopedAllocPop(f)}}};let K=function(d,h,k,z,Q,m){if(typeof k=="string"){if(h===1)return m.get(k);if(h===2){if(z)z instanceof Function||n(Q,"requires a function argument.");else return m.delete(k),d;return m.set(k,z),d}}n("Invalid arguments to",Q)};return t.xWrap.resultAdapter=function d(h,k){return K(d,arguments.length,h,k,"resultAdapter()",I)},t.xWrap.argAdapter=function d(h,k){return K(d,arguments.length,h,k,"argAdapter()",M)},t.xWrap.FuncPtrAdapter=M.FuncPtrAdapter,t.xCallWrapped=function(d,h,k,...z){return Array.isArray(arguments[3])&&(z=arguments[3]),t.xWrap(d,h,k||[]).apply(null,z||[])},t.xWrap.testConvertArg=i.xWrap.convertArg,t.xWrap.testConvertResult=i.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=function(t){let n=()=>fetch(t.uri,{credentials:"same-origin"}),o=this,s=function(g){if(t.wasmUtilTarget){let q=(...H)=>{throw new Error(H.join(" "))},B=t.wasmUtilTarget;if(B.module=g.module,B.instance=g.instance,B.instance.exports.memory||(B.memory=t.imports&&t.imports.env&&t.imports.env.memory||q("Missing 'memory' object!")),!B.alloc&&g.instance.exports.malloc){let H=g.instance.exports;B.alloc=function(te){return H.malloc(te)||q("Allocation of",te,"bytes failed.")},B.dealloc=function(te){H.free(te)}}o(B)}return t.onload&&t.onload(g,t),g};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(s)}:function(){return n().then(q=>q.arrayBuffer()).then(q=>WebAssembly.instantiate(q,t.imports||{})).then(s)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){let o=(...R)=>{throw new Error(R.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&o("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(R){n[R]instanceof Function||o("Config option '"+R+"' must be a function.")});let s=t,i=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),g=n.alloc,q=n.dealloc,B=n.log||console.log.bind(console),H=n.memberPrefix||"",te=n.memberSuffix||"",Y=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,ie=globalThis.BigInt,L=globalThis.BigInt64Array,C=n.ptrSizeof||4,M=n.ptrIR||"i32";s.debugFlags||(s.__makeDebugFlags=function(R=null){R&&R.__flags&&(R=R.__flags);let le=function ae(de){return arguments.length===0?ae.__flags:(de<0?(delete ae.__flags.getter,delete ae.__flags.setter,delete ae.__flags.alloc,delete ae.__flags.dealloc):(ae.__flags.getter=(1&de)!==0,ae.__flags.setter=(2&de)!==0,ae.__flags.alloc=(4&de)!==0,ae.__flags.dealloc=(8&de)!==0),ae._flags)};return Object.defineProperty(le,"__flags",{iterable:!1,writable:!1,value:Object.create(R)}),R||le(0),le},s.debugFlags=s.__makeDebugFlags());let I=function(){let R=new ArrayBuffer(2);return new DataView(R).setInt16(0,256,!0),new Int16Array(R)[0]===256}(),w=R=>R[1]==="(",U=R=>R==="p"||R==="P",V=R=>R==="P",$=R=>w(R)?"p":R[0],E=function(R){switch($(R)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return M;case"j":return"i64";case"f":return"float";case"d":return"double"}o("Unhandled signature IR:",R)},K=L?()=>!0:()=>o("BigInt64Array is not available."),d=function(R){switch($(R)){case"p":case"P":case"s":{switch(C){case 4:return"getInt32";case 8:return K()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return K()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}o("Unhandled DataView getter for signature:",R)},h=function(R){switch($(R)){case"p":case"P":case"s":{switch(C){case 4:return"setInt32";case 8:return K()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return K()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}o("Unhandled DataView setter for signature:",R)},k=function(R){switch($(R)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return K()&&ie;case"p":case"P":case"s":switch(C){case 4:return Number;case 8:return K()&&ie}break}o("Unhandled DataView set wrapper for signature:",R)},z=(R,le)=>R+"::"+le,Q=function(R,le){return()=>o(z(R,le),"is read-only.")},m=new WeakMap,a="(pointer-is-external)",f=function(R,le,ae){if(ae||(ae=m.get(le)),ae){if(m.delete(le),Array.isArray(le.ondispose)){let de;for(;de=le.ondispose.shift();)try{de instanceof Function?de.call(le):de instanceof ve?de.dispose():typeof de=="number"&&q(de)}catch(Me){console.warn("ondispose() for",R.structName,"@",ae,"threw. NOT propagating it.",Me)}}else if(le.ondispose instanceof Function)try{le.ondispose()}catch(de){console.warn("ondispose() for",R.structName,"@",ae,"threw. NOT propagating it.",de)}delete le.ondispose,R.debugFlags.__flags.dealloc&&B("debug.dealloc:",le[a]?"EXTERNAL":"",R.structName,"instance:",R.structInfo.sizeof,"bytes @"+ae),le[a]||q(ae)}},_=R=>({configurable:!1,writable:!1,iterable:!1,value:R}),x=function(R,le,ae){let de=!ae;ae?Object.defineProperty(le,a,_(ae)):(ae=g(R.structInfo.sizeof),ae||o("Allocation of",R.structName,"structure failed."));try{R.debugFlags.__flags.alloc&&B("debug.alloc:",de?"":"EXTERNAL",R.structName,"instance:",R.structInfo.sizeof,"bytes @"+ae),de&&i().fill(0,ae,ae+R.structInfo.sizeof),m.set(le,ae)}catch(Me){throw f(R,le,ae),Me}},J=function(){let R=this.pointer;return R?new Uint8Array(i().slice(R,R+this.structInfo.sizeof)):null},we=_(R=>H+R+te),he=function(R,le,ae=!0){let de=R.members[le];if(!de&&(H||te)){for(let Me of Object.values(R.members))if(Me.key===le){de=Me;break}!de&&ae&&o(z(R.name,le),"is not a mapped struct member.")}return de},Ee=function R(le,ae,de=!1){R._||(R._=Qe=>Qe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));let Me=he(le.structInfo,ae,!0);return de?R._(Me.signature):Me.signature},Te={configurable:!1,enumerable:!1,get:function(){return m.get(this)},set:()=>o("Cannot assign the 'pointer' property of a struct.")},ke=_(function(){let R=[];for(let le of Object.keys(this.structInfo.members))R.push(this.memberKey(le));return R}),ne=new TextDecoder("utf-8"),A=new TextEncoder,W=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,re=function(R,le,ae){return ne.decode(R.buffer instanceof W?R.slice(le,ae):R.subarray(le,ae))},b=function(R,le,ae=!1){let de=he(R.structInfo,le,ae);return de&&de.signature.length===1&&de.signature[0]==="s"?de:!1},O=function(R){R.signature!=="s"&&o("Invalid member type signature for C-string value:",JSON.stringify(R))},j=function(le,ae){let de=he(le.structInfo,ae,!0);O(de);let Me=le[de.key];if(!Me)return null;let Qe=Me,je=i();for(;je[Qe]!==0;++Qe);return Me===Qe?"":re(je,Me,Qe)},se=function(R,...le){R.ondispose?Array.isArray(R.ondispose)||(R.ondispose=[R.ondispose]):R.ondispose=[],R.ondispose.push(...le)},ee=function(R){let le=A.encode(R),ae=g(le.length+1);ae||o("Allocation error while duplicating string:",R);let de=i();return de.set(le,ae),de[ae+le.length]=0,ae},ge=function(R,le,ae){let de=he(R.structInfo,le,!0);O(de);let Me=ee(ae);return R[de.key]=Me,se(R,Me),R},ve=function(le,ae){arguments[2]!==_&&o("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:_(le),structInfo:_(ae)})};ve.prototype=Object.create(null,{dispose:_(function(){f(this.constructor,this)}),lookupMember:_(function(R,le=!0){return he(this.structInfo,R,le)}),memberToJsString:_(function(R){return j(this,R)}),memberIsString:_(function(R,le=!0){return b(this,R,le)}),memberKey:we,memberKeys:ke,memberSignature:_(function(R,le=!1){return Ee(this,R,le)}),memoryDump:_(J),pointer:Te,setMemberCString:_(function(R,le){return ge(this,R,le)})}),Object.assign(ve.prototype,{addOnDispose:function(...R){return se(this,...R),this}}),Object.defineProperties(ve,{allocCString:_(ee),isA:_(R=>R instanceof ve),hasExternalPointer:_(R=>R instanceof ve&&!!R[a]),memberKey:we});let pe=R=>Number.isFinite(R)||R instanceof(ie||Number),Ze=function R(le,ae,de){if(!R._){R._={getters:{},setters:{},sw:{}};let nt=["i","c","C","p","P","s","f","d","v()"];Y&&nt.push("j"),nt.forEach(function(dt){R._.getters[dt]=d(dt),R._.setters[dt]=h(dt),R._.sw[dt]=k(dt)});let Ac=/^[ipPsjfdcC]$/,Ic=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;R.sigCheck=function(dt,kc,Xr,mr){Object.prototype.hasOwnProperty.call(dt,Xr)&&o(dt.structName,"already has a property named",Xr+"."),Ac.test(mr)||Ic.test(mr)||o("Malformed signature for",z(dt.structName,kc)+":",mr)}}let Me=le.memberKey(ae);R.sigCheck(le.prototype,ae,Me,de.signature),de.key=Me,de.name=ae;let Qe=$(de.signature),je=z(le.prototype.structName,Me),$e=le.prototype.debugFlags.__flags,Nt=Object.create(null);Nt.configurable=!1,Nt.enumerable=!1,Nt.get=function(){$e.getter&&B("debug.getter:",R._.getters[Qe],"for",E(Qe),je,"@",this.pointer,"+",de.offset,"sz",de.sizeof);let nt=new DataView(i().buffer,this.pointer+de.offset,de.sizeof)[R._.getters[Qe]](0,I);return $e.getter&&B("debug.getter:",je,"result =",nt),nt},de.readOnly?Nt.set=Q(le.prototype.structName,Me):Nt.set=function(nt){if($e.setter&&B("debug.setter:",R._.setters[Qe],"for",E(Qe),je,"@",this.pointer,"+",de.offset,"sz",de.sizeof,nt),this.pointer||o("Cannot set struct property on disposed instance."),nt===null)nt=0;else for(;!pe(nt);){if(V(de.signature)&&nt instanceof ve){nt=nt.pointer||0,$e.setter&&B("debug.setter:",je,"resolved to",nt);break}o("Invalid value for pointer-type",je+".")}new DataView(i().buffer,this.pointer+de.offset,de.sizeof)[R._.setters[Qe]](0,R._.sw[Qe](nt),I)},Object.defineProperty(le.prototype,Me,Nt)},Xe=function R(le,ae){arguments.length===1?(ae=le,le=ae.name):ae.name||(ae.name=le),le||o("Struct name is required.");let de=!1;Object.keys(ae.members).forEach(je=>{let $e=ae.members[je];$e.sizeof?$e.sizeof===1?$e.signature==="c"||$e.signature==="C"||o("Unexpected sizeof==1 member",z(ae.name,je),"with signature",$e.signature):($e.sizeof%4!==0&&(console.warn("Invalid struct member description =",$e,"from",ae),o(le,"member",je,"sizeof is not aligned. sizeof="+$e.sizeof)),$e.offset%4!==0&&(console.warn("Invalid struct member description =",$e,"from",ae),o(le,"member",je,"offset is not aligned. offset="+$e.offset))):o(le,"member",je,"is missing sizeof."),(!de||de.offset<$e.offset)&&(de=$e)}),de?ae.sizeof<de.offset+de.sizeof&&o("Invalid struct config:",le,"max member offset ("+de.offset+") ","extends past end of struct (sizeof="+ae.sizeof+")."):o("No member property descriptions found.");let Me=_(s.__makeDebugFlags(R.debugFlags)),Qe=function je($e){this instanceof je?arguments.length?(($e!==($e|0)||$e<=0)&&o("Invalid pointer value for",le,"constructor."),x(je,this,$e)):x(je,this):o("The",le,"constructor may only be called via 'new'.")};return Object.defineProperties(Qe,{debugFlags:Me,isA:_(je=>je instanceof Qe),memberKey:we,memberKeys:ke,methodInfoForKey:_(function(je){}),structInfo:_(ae),structName:_(le)}),Qe.prototype=new ve(le,ae,_),Object.defineProperties(Qe.prototype,{debugFlags:Me,constructor:_(Qe)}),Object.keys(ae.members).forEach(je=>Ze(Qe,je,ae.members[je])),Qe};return Xe.StructType=ve,Xe.config=n,Xe.allocCString=ee,Xe.debugFlags||(Xe.debugFlags=s.__makeDebugFlags(s.debugFlags)),Xe},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=(...I)=>{throw new Error(I.join(" "))},o=t.SQLite3Error.toss,s=t.capi,i=t.wasm,g=t.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(I,w)=>I[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:I=>I[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:I=>{let w;return(U,V,$,E)=>{try{let K=i.cArgvToJs(V,$);return w||(w=i.cArgvToJs(V,E)),I(K,w)|0}catch(K){return K.resultCode||s.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:I=>I[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(I,w)=>I[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_progress_handler&&i.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(I,w)=>I[0]}),"*"]]),i.exports.sqlite3_stmt_explain&&i.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),i.exports.sqlite3_set_authorizer&&i.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(I,w)=>I[0],callProxy:I=>(w,U,V,$,E,K)=>{try{return V=V&&i.cstrToJs(V),$=$&&i.cstrToJs($),E=E&&i.cstrToJs(E),K=K&&i.cstrToJs(K),I(w,U,V,$,E,K)||0}catch(d){return d.resultCode||s.SQLITE_ERROR}}}),"*"]]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:I=>I[0],callProxy:I=>(w,U,V,$,E)=>{I(w,U,i.cstrToJs(V),i.cstrToJs($),E)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],i.bigIntEnabled&&i.exports.sqlite3_declare_vtab&&i.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),i.bigIntEnabled&&i.exports.sqlite3_preupdate_hook&&i.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:I=>I[0],callProxy:I=>(w,U,V,$,E,K,d)=>{I(w,U,V,i.cstrToJs($),i.cstrToJs(E),K,d)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),i.bigIntEnabled&&i.exports.sqlite3changegroup_add&&i.exports.sqlite3session_create&&i.exports.sqlite3_preupdate_hook){let I={signature:"i(ps)",callProxy:w=>(U,V)=>{try{return w(U,i.cstrToJs(V))|0}catch($){return $.resultCode||s.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...I,contextKey:(w,U)=>w[0]}),"*"]])}i.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{let I=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",E=>I(g.flexibleString(E))),i.xWrap.argAdapter("string:static",function(E){return i.isPtr(E)?E:(E=""+E,this[E]||(this[E]=i.allocCString(E)))}.bind(Object.create(null)));let w=i.xWrap.argAdapter("*"),U=function(){};i.xWrap.argAdapter("sqlite3_filename",w)("sqlite3_context*",w)("sqlite3_value*",w)("void*",w)("sqlite3_changegroup*",w)("sqlite3_changeset_iter*",w)("sqlite3_session*",w)("sqlite3_stmt*",E=>w(E instanceof(t?.oo1?.Stmt||U)?E.pointer:E))("sqlite3*",E=>w(E instanceof(t?.oo1?.DB||U)?E.pointer:E))("sqlite3_vfs*",E=>typeof E=="string"?s.sqlite3_vfs_find(E)||t.SQLite3Error.toss(s.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",E):w(E instanceof(s.sqlite3_vfs||U)?E.pointer:E)),i.exports.sqlite3_declare_vtab&&i.xWrap.argAdapter("sqlite3_index_info*",E=>w(E instanceof(s.sqlite3_index_info||U)?E.pointer:E))("sqlite3_module*",E=>w(E instanceof(s.sqlite3_module||U)?E.pointer:E));let V=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",V)("sqlite3_context*",V)("sqlite3_stmt*",V)("sqlite3_value*",V)("sqlite3_vfs*",V)("void*",V),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(let E of i.bindingSignatures)s[E[0]]=i.xWrap.apply(null,E);for(let E of i.bindingSignatures.wasmInternal)g[E[0]]=i.xWrap.apply(null,E);let $=function(E){return()=>n(E+"() is unavailable due to lack","of BigInt support in this build.")};for(let E of i.bindingSignatures.int64)s[E[0]]=i.bigIntEnabled?i.xWrap.apply(null,E):$(E[0]);if(delete i.bindingSignatures,i.exports.sqlite3__wasm_db_error){let E=i.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");g.sqlite3__wasm_db_error=function(K,d,h){return d instanceof t.WasmAllocError?(d=s.SQLITE_NOMEM,h=0):d instanceof Error&&(h=h||""+d,d=d.resultCode||s.SQLITE_ERROR),K?E(K,d,h):d}}else g.sqlite3__wasm_db_error=function(E,K,d){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),K}}{let I=i.xCall("sqlite3__wasm_enum_json");I||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(I));let w=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&w.push("serialize","session","vtab");for(let $ of w)for(let E of Object.entries(i.ctype[$]))s[E[0]]=E[1];i.functionEntry(s.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+s.SQLITE_WASM_DEALLOC+").");let U=Object.create(null);for(let $ of["resultCodes"])for(let E of Object.entries(i.ctype[$]))U[E[1]]=E[0];s.sqlite3_js_rc_str=$=>U[$];let V=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!g.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(let $ of i.ctype.structs)V[$.name]||(s[$.name]=t.StructBinder($));if(s.sqlite3_index_info){for(let $ of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])s.sqlite3_index_info[$]=s[$],delete s[$];s.sqlite3_vtab_config=i.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}let q=(I,w,U)=>g.sqlite3__wasm_db_error(I,s.SQLITE_MISUSE,w+"() requires "+U+" argument"+(U===1?"":"s")+"."),B=I=>g.sqlite3__wasm_db_error(I,s.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),H=I=>i.xWrap.argAdapter("sqlite3*")(I),te=I=>i.isPtr(I)?i.cstrToJs(I):I,Y=function(I,w){I=H(I);let U=this.dbMap.get(I);if(w)!U&&w>0&&this.dbMap.set(I,U=Object.create(null));else return this.dbMap.delete(I),U;return U}.bind(Object.assign(Object.create(null),{dbMap:new Map}));Y.addCollation=function(I,w){let U=Y(I,1);U.collation||(U.collation=new Set),U.collation.add(te(w).toLowerCase())},Y._addUDF=function(I,w,U,V){w=te(w).toLowerCase();let $=V.get(w);$||V.set(w,$=new Set),$.add(U<0?-1:U)},Y.addFunction=function(I,w,U){let V=Y(I,1);V.udf||(V.udf=new Map),this._addUDF(I,w,U,V.udf)},i.exports.sqlite3_create_window_function&&(Y.addWindowFunc=function(I,w,U){let V=Y(I,1);V.wudf||(V.wudf=new Map),this._addUDF(I,w,U,V.wudf)}),Y.cleanup=function(I){I=H(I);let w=[I];for(let $ of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){let E=i.exports[$];if(E){w.length=E.length;try{s[$](...w)}catch(K){t.config.warn("close-time call of",$+"(",w,") threw:",K)}}}let U=Y(I,0);if(!U)return;if(U.collation){for(let $ of U.collation)try{s.sqlite3_create_collation_v2(I,$,s.SQLITE_UTF8,0,0,0)}catch{}delete U.collation}let V;for(V=0;V<2;++V){let $=V?U.wudf:U.udf;if(!$)continue;let E=V?s.sqlite3_create_window_function:s.sqlite3_create_function_v2;for(let K of $){let d=K[0],h=K[1],k=[I,d,0,s.SQLITE_UTF8,0,0,0,0,0];V&&k.push(0);for(let z of h)try{k[2]=z,E.apply(null,k)}catch{}h.clear()}$.clear()}delete U.udf,delete U.wudf};{let I=i.xWrap("sqlite3_close_v2","int","sqlite3*");s.sqlite3_close_v2=function(w){if(arguments.length!==1)return q(w,"sqlite3_close_v2",1);if(w)try{Y.cleanup(w)}catch{}return I(w)}}if(s.sqlite3session_create){let I=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);s.sqlite3session_delete=function(w){if(arguments.length!==1)return q(pDb,"sqlite3session_delete",1);w&&s.sqlite3session_table_filter(w,0,0),I(w)}}{let I=(U,V)=>"argv["+V+"]:"+U[0]+":"+i.cstrToJs(U[1]).toLowerCase(),w=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:I}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:I})]);s.sqlite3_create_collation_v2=function(U,V,$,E,K,d){if(arguments.length!==6)return q(U,"sqlite3_create_collation_v2",6);if(!($&15))$|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==($&15))return B(U);try{let h=w(U,V,$,E,K,d);return h===0&&K instanceof Function&&Y.addCollation(U,V),h}catch(h){return g.sqlite3__wasm_db_error(U,h)}},s.sqlite3_create_collation=(U,V,$,E,K)=>arguments.length===5?s.sqlite3_create_collation_v2(U,V,$,E,K,0):q(U,"sqlite3_create_collation",5)}{let I=function($,E){return $[0]+":"+($[2]<0?-1:$[2])+":"+E+":"+i.cstrToJs($[1]).toLowerCase()},w=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:I,callProxy:$=>(E,K,d)=>{try{$(E,...s.sqlite3_values_to_js(K,d))}catch(h){s.sqlite3_result_error_js(E,h)}}},xFinalAndValue:{signature:"v(p)",contextKey:I,callProxy:$=>E=>{try{s.sqlite3_result_js(E,$(E))}catch(K){s.sqlite3_result_error_js(E,K)}}},xFunc:{signature:"v(pip)",contextKey:I,callProxy:$=>(E,K,d)=>{try{s.sqlite3_result_js(E,$(E,...s.sqlite3_values_to_js(K,d)))}catch(h){s.sqlite3_result_error_js(E,h)}}},xDestroy:{signature:"v(p)",contextKey:I,callProxy:$=>E=>{try{$(E)}catch(K){console.error("UDF xDestroy method threw:",K)}}}}),U=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...w.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]),V=i.exports.sqlite3_create_window_function?i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]):void 0;s.sqlite3_create_function_v2=function $(E,K,d,h,k,z,Q,m,a){if($.length!==arguments.length)return q(E,"sqlite3_create_function_v2",$.length);if(!(h&15))h|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(h&15))return B(E);try{let f=U(E,K,d,h,k,z,Q,m,a);return f===0&&(z instanceof Function||Q instanceof Function||m instanceof Function||a instanceof Function)&&Y.addFunction(E,K,d),f}catch(f){return console.error("sqlite3_create_function_v2() setup threw:",f),g.sqlite3__wasm_db_error(E,f,"Creation of UDF threw: "+f)}},s.sqlite3_create_function=function $(E,K,d,h,k,z,Q,m){return $.length===arguments.length?s.sqlite3_create_function_v2(E,K,d,h,k,z,Q,m,0):q(E,"sqlite3_create_function",$.length)},V?s.sqlite3_create_window_function=function $(E,K,d,h,k,z,Q,m,a,f){if($.length!==arguments.length)return q(E,"sqlite3_create_window_function",$.length);if(!(h&15))h|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(h&15))return B(E);try{let _=V(E,K,d,h,k,z,Q,m,a,f);return _===0&&(z instanceof Function||Q instanceof Function||m instanceof Function||a instanceof Function||f instanceof Function)&&Y.addWindowFunc(E,K,d),_}catch(_){return console.error("sqlite3_create_window_function() setup threw:",_),g.sqlite3__wasm_db_error(E,_,"Creation of UDF threw: "+_)}}:delete s.sqlite3_create_window_function,s.sqlite3_create_function_v2.udfSetResult=s.sqlite3_create_function.udfSetResult=s.sqlite3_result_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetResult=s.sqlite3_result_js),s.sqlite3_create_function_v2.udfConvertArgs=s.sqlite3_create_function.udfConvertArgs=s.sqlite3_values_to_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfConvertArgs=s.sqlite3_values_to_js),s.sqlite3_create_function_v2.udfSetError=s.sqlite3_create_function.udfSetError=s.sqlite3_result_error_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetError=s.sqlite3_result_error_js)}{let I=(U,V)=>(typeof U=="string"?V=-1:g.isSQLableTypedArray(U)?(V=U.byteLength,U=g.typedArrayToString(U instanceof ArrayBuffer?new Uint8Array(U):U)):Array.isArray(U)&&(U=U.join(""),V=-1),[U,V]),w={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};s.sqlite3_prepare_v3=function U(V,$,E,K,d,h){if(U.length!==arguments.length)return q(V,"sqlite3_prepare_v3",U.length);let[k,z]=I($,E);switch(typeof k){case"string":return w.basic(V,k,z,K,d,null);case"number":return w.full(V,k,z,K,d,h);default:return g.sqlite3__wasm_db_error(V,s.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},s.sqlite3_prepare_v2=function U(V,$,E,K,d){return U.length===arguments.length?s.sqlite3_prepare_v3(V,$,E,0,K,d):q(V,"sqlite3_prepare_v2",U.length)}}{let I=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),w=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);s.sqlite3_bind_text=function U(V,$,E,K,d){if(U.length!==arguments.length)return q(s.sqlite3_db_handle(V),"sqlite3_bind_text",U.length);if(i.isPtr(E)||E===null)return I(V,$,E,K,d);E instanceof ArrayBuffer?E=new Uint8Array(E):Array.isArray(pMem)&&(E=pMem.join(""));let h,k;try{if(g.isSQLableTypedArray(E))h=i.allocFromTypedArray(E),k=E.byteLength;else if(typeof E=="string")[h,k]=i.allocCString(E);else return g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return I(V,$,h,k,s.SQLITE_WASM_DEALLOC)}catch(z){return i.dealloc(h),g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),z)}},s.sqlite3_bind_blob=function U(V,$,E,K,d){if(U.length!==arguments.length)return q(s.sqlite3_db_handle(V),"sqlite3_bind_blob",U.length);if(i.isPtr(E)||E===null)return w(V,$,E,K,d);E instanceof ArrayBuffer?E=new Uint8Array(E):Array.isArray(E)&&(E=E.join(""));let h,k;try{if(g.isBindableTypedArray(E))h=i.allocFromTypedArray(E),k=K>=0?K:E.byteLength;else if(typeof E=="string")[h,k]=i.allocCString(E);else return g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return w(V,$,h,k,s.SQLITE_WASM_DEALLOC)}catch(z){return i.dealloc(h),g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),z)}}}s.sqlite3_config=function(I,...w){if(arguments.length<2)return s.SQLITE_MISUSE;switch(I){case s.SQLITE_CONFIG_COVERING_INDEX_SCAN:case s.SQLITE_CONFIG_MEMSTATUS:case s.SQLITE_CONFIG_SMALL_MALLOC:case s.SQLITE_CONFIG_SORTERREF_SIZE:case s.SQLITE_CONFIG_STMTJRNL_SPILL:case s.SQLITE_CONFIG_URI:return i.exports.sqlite3__wasm_config_i(I,w[0]);case s.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3__wasm_config_ii(I,w[0],w[1]);case s.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3__wasm_config_j(I,w[0]);case s.SQLITE_CONFIG_GETMALLOC:case s.SQLITE_CONFIG_GETMUTEX:case s.SQLITE_CONFIG_GETPCACHE2:case s.SQLITE_CONFIG_GETPCACHE:case s.SQLITE_CONFIG_HEAP:case s.SQLITE_CONFIG_LOG:case s.SQLITE_CONFIG_MALLOC:case s.SQLITE_CONFIG_MMAP_SIZE:case s.SQLITE_CONFIG_MULTITHREAD:case s.SQLITE_CONFIG_MUTEX:case s.SQLITE_CONFIG_PAGECACHE:case s.SQLITE_CONFIG_PCACHE2:case s.SQLITE_CONFIG_PCACHE:case s.SQLITE_CONFIG_PCACHE_HDRSZ:case s.SQLITE_CONFIG_PMASZ:case s.SQLITE_CONFIG_SERIALIZED:case s.SQLITE_CONFIG_SINGLETHREAD:case s.SQLITE_CONFIG_SQLLOG:case s.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return s.SQLITE_NOTFOUND}};{let I=new Set;s.sqlite3_auto_extension=function(w){if(w instanceof Function)w=i.installFunction("i(ppp)",w);else if(arguments.length!==1||!i.isPtr(w))return s.SQLITE_MISUSE;let U=i.exports.sqlite3_auto_extension(w);return w!==arguments[0]&&(U===0?I.add(w):i.uninstallFunction(w)),U},s.sqlite3_cancel_auto_extension=function(w){return!w||arguments.length!==1||!i.isPtr(w)?0:i.exports.sqlite3_cancel_auto_extension(w)},s.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(let w of I)i.uninstallFunction(w);I.clear()}}let ie=s.sqlite3_vfs_find("kvvfs");if(ie)if(g.isUIThread()){let I=new s.sqlite3_kvvfs_methods(i.exports.sqlite3__wasm_kvvfs_methods());delete s.sqlite3_kvvfs_methods;let w=i.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,U=i.pstack,V=E=>i.peek(E)===115?sessionStorage:localStorage,$={xRead:(E,K,d,h)=>{let k=U.pointer,z=i.scopedAllocPush();try{let Q=w(E,K);if(!Q)return-3;let m=i.cstrToJs(Q),a=V(E).getItem(m);if(!a)return-1;let f=a.length;if(h<=0)return f;if(h===1)return i.poke(d,0),f;let _=i.scopedAllocCString(a);return h>f+1&&(h=f+1),i.heap8u().copyWithin(d,_,_+h-1),i.poke(d+h-1,0),h-1}catch(Q){return console.error("kvstorageRead()",Q),-2}finally{U.restore(k),i.scopedAllocPop(z)}},xWrite:(E,K,d)=>{let h=U.pointer;try{let k=w(E,K);if(!k)return 1;let z=i.cstrToJs(k);return V(E).setItem(z,i.cstrToJs(d)),0}catch(k){return console.error("kvstorageWrite()",k),s.SQLITE_IOERR}finally{U.restore(h)}},xDelete:(E,K)=>{let d=U.pointer;try{let h=w(E,K);return h?(V(E).removeItem(i.cstrToJs(h)),0):1}catch(h){return console.error("kvstorageDelete()",h),s.SQLITE_IOERR}finally{U.restore(d)}}};for(let E of Object.keys($))I[I.memberKey(E)]=i.installFunction(I.memberSignature(E),$[E])}else s.sqlite3_vfs_unregister(ie);i.xWrap.FuncPtrAdapter.warnOnUse=!0;let L=t.StructBinder,C=function I(w,U,V,$=I.installMethodArgcCheck){if(w instanceof L.StructType?!(V instanceof Function)&&!i.isPtr(V)&&n("Usage error: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(h,k)=>I(w,h,k,$);I.argcProxy||(I.argcProxy=function(h,k,z,Q){return function(...m){return z.length!==arguments.length&&n("Argument mismatch for",h.structInfo.name+"::"+k+": Native signature is:",Q),z.apply(this,m)}},I.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((h,k)=>{if(typeof h=="number")try{i.uninstallFunction(h)}catch{}}),delete this.ondispose.__removeFuncList)});let E=w.memberSignature(U);E.length<2&&n("Member",U,"does not have a function pointer signature:",E);let K=w.memberKey(U),d=$&&!i.isPtr(V)?I.argcProxy(w,K,V,E):V;if(i.isPtr(d))d&&!i.functionEntry(d)&&n("Pointer",d,"is not a WASM function table entry."),w[K]=d;else{let h=i.installFunction(d,w.memberSignature(U,!0));w[K]=h,(!w.ondispose||!w.ondispose.__removeFuncList)&&(w.addOnDispose("ondispose.__removeFuncList handler",I.removeFuncList),w.ondispose.__removeFuncList=[]),w.ondispose.__removeFuncList.push(K,h)}return(h,k)=>I(w,h,k,$)};C.installMethodArgcCheck=!1;let M=function(I,w,U=C.installMethodArgcCheck){let V=new Map;for(let $ of Object.keys(w)){let E=w[$],K=V.get(E);if(K){let d=I.memberKey($);I[d]=I[I.memberKey(K)]}else C(I,$,E,U),V.set(E,$)}return I};L.StructType.prototype.installMethod=function(w,U,V=C.installMethodArgcCheck){return arguments.length<3&&w&&typeof w=="object"?M(this,...arguments):C(this,...arguments)},L.StructType.prototype.installMethods=function(I,w=C.installMethodArgcCheck){return M(this,I,w)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.50.4",libVersionNumber:3050004,sourceId:"2025-07-30 19:33:53 4d8adfb30e03f9cf27f800a2c1ba3c48fb4ca1b08b0f5ed59a4d5ecbf45e20a3",downloadVersion:3500400}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=(...m)=>{throw new Error(m.join(" "))},o=(...m)=>{throw new t.SQLite3Error(...m)},s=t.capi,i=t.wasm,g=t.util,q=new WeakMap,B=new WeakMap,H=(m,a,f)=>{let _=Object.getOwnPropertyDescriptor(m,a);return _?_.value:f},te=function(m,a){return a&&(m instanceof C&&(m=m.pointer),o(a,"sqlite3 result code",a+":",m?s.sqlite3_errmsg(m):s.sqlite3_errstr(a))),arguments[0]},Y=i.installFunction("i(ippp)",function(m,a,f,_){s.SQLITE_TRACE_STMT===m&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+a+":",i.cstrToJs(_))}.bind({counter:0})),ie=Object.create(null),L=function m(...a){if(!m._name2vfs){m._name2vfs=Object.create(null);let ke=typeof importScripts=="function"?ne=>o("The VFS for",ne,"is only available in the main window thread."):!1;m._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:ke||(()=>"local")},m._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:ke||(()=>"session")}}let f=m.normalizeArgs(...a),_=f.filename,x=f.vfs,J=f.flags;(typeof _!="string"&&typeof _!="number"||typeof J!="string"||x&&typeof x!="string"&&typeof x!="number")&&(t.config.error("Invalid DB ctor args",f,arguments),o("Invalid arguments for DB constructor."));let ce=typeof _=="number"?i.cstrToJs(_):_,we=m._name2vfs[ce];we&&(x=we.vfs,_=ce=we.filename(ce));let he,Ee=0;J.indexOf("c")>=0&&(Ee|=s.SQLITE_OPEN_CREATE|s.SQLITE_OPEN_READWRITE),J.indexOf("w")>=0&&(Ee|=s.SQLITE_OPEN_READWRITE),Ee===0&&(Ee|=s.SQLITE_OPEN_READONLY),Ee|=s.SQLITE_OPEN_EXRESCODE;let Te=i.pstack.pointer;try{let ke=i.pstack.allocPtr(),ne=s.sqlite3_open_v2(_,ke,Ee,x||0);he=i.peekPtr(ke),te(he,ne),s.sqlite3_extended_result_codes(he,1),J.indexOf("t")>=0&&s.sqlite3_trace_v2(he,s.SQLITE_TRACE_STMT,Y,he)}catch(ke){throw he&&s.sqlite3_close_v2(he),ke}finally{i.pstack.restore(Te)}this.filename=ce,q.set(this,he),B.set(this,Object.create(null));try{let ke=s.sqlite3_js_db_vfs(he)||o("Internal error: cannot get VFS for new db handle."),ne=ie[ke];ne&&(ne instanceof Function?ne(this,t):te(he,s.sqlite3_exec(he,ne,0,0,0)))}catch(ke){throw this.close(),ke}};L.setVfsPostOpenCallback=function(m,a){a instanceof Function||o("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),ie[m]=a},L.normalizeArgs=function(m=":memory:",a="c",f=null){let _={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(_,arguments[0]),_.flags===void 0&&(_.flags="c"),_.vfs===void 0&&(_.vfs=null),_.filename===void 0&&(_.filename=":memory:")):(_.filename=m,_.flags=a,_.vfs=f),_};let C=function(...m){L.apply(this,m)};C.dbCtorHelper=L;let M={null:1,number:2,string:3,boolean:4,blob:5};M.undefined==M.null,i.bigIntEnabled&&(M.bigint=M.number);let I=function(){M!==arguments[2]&&o(s.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],q.set(this,arguments[1]),this.parameterCount=s.sqlite3_bind_parameter_count(this.pointer)},w=function(m){return m.pointer||o("DB has been closed."),m},U=function(m,a){return(a!==(a|0)||a<0||a>=m.columnCount)&&o("Column index",a,"is out of range."),m},V=function(m,a){let f=Object.create(null);switch(f.opt=Object.create(null),a.length){case 1:typeof a[0]=="string"||g.isSQLableTypedArray(a[0])||Array.isArray(a[0])?f.sql=a[0]:a[0]&&typeof a[0]=="object"&&(f.opt=a[0],f.sql=f.opt.sql);break;case 2:f.sql=a[0],f.opt=a[1];break;default:o("Invalid argument count for exec().")}f.sql=g.flexibleString(f.sql),typeof f.sql!="string"&&o("Missing SQL argument or unsupported SQL value type.");let _=f.opt;switch(_.returnValue){case"resultRows":_.resultRows||(_.resultRows=[]),f.returnVal=()=>_.resultRows;break;case"saveSql":_.saveSql||(_.saveSql=[]),f.returnVal=()=>_.saveSql;break;case void 0:case"this":f.returnVal=()=>m;break;default:o("Invalid returnValue value:",_.returnValue)}if(!_.callback&&!_.returnValue&&_.rowMode!==void 0&&(_.resultRows||(_.resultRows=[]),f.returnVal=()=>_.resultRows),_.callback||_.resultRows)switch(_.rowMode===void 0?"array":_.rowMode){case"object":f.cbArg=(x,J)=>{J.columnNames||(J.columnNames=x.getColumnNames([]));let ce=x.get([]),we=Object.create(null);for(let he in J.columnNames)we[J.columnNames[he]]=ce[he];return we};break;case"array":f.cbArg=x=>x.get([]);break;case"stmt":Array.isArray(_.resultRows)&&o("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),f.cbArg=x=>x;break;default:if(g.isInt32(_.rowMode)){f.cbArg=x=>x.get(_.rowMode);break}else if(typeof _.rowMode=="string"&&_.rowMode.length>1&&_.rowMode[0]==="$"){let x=_.rowMode.substr(1);f.cbArg=J=>{let ce=J.get(Object.create(null))[x];return ce===void 0?o(s.SQLITE_NOTFOUND,"exec(): unknown result column:",x):ce};break}o("Invalid rowMode:",_.rowMode)}return f},$=(m,a,f,..._)=>{let x=m.prepare(a);try{let J=x.bind(f).step()?x.get(..._):void 0;return x.reset(),J}finally{x.finalize()}},E=(m,a,f,_)=>m.exec({sql:a,bind:f,rowMode:_,returnValue:"resultRows"});C.checkRc=(m,a)=>te(m,a),C.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return w(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}let m=this.pointer;if(Object.keys(B.get(this)).forEach((a,f)=>{if(f&&f.pointer)try{f.finalize()}catch{}}),q.delete(this),B.delete(this),s.sqlite3_close_v2(m),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(m=!1,a=!1){let f=w(this).pointer;return m?a?s.sqlite3_total_changes64(f):s.sqlite3_total_changes(f):a?s.sqlite3_changes64(f):s.sqlite3_changes(f)},dbFilename:function(m="main"){return s.sqlite3_db_filename(w(this).pointer,m)},dbName:function(m=0){return s.sqlite3_db_name(w(this).pointer,m)},dbVfsName:function(m=0){let a,f=s.sqlite3_js_db_vfs(w(this).pointer,m);if(f){let _=new s.sqlite3_vfs(f);try{a=i.cstrToJs(_.$zName)}finally{_.dispose()}}return a},prepare:function(m){w(this);let a=i.pstack.pointer,f,_;try{f=i.pstack.alloc(8),C.checkRc(this,s.sqlite3_prepare_v2(this.pointer,m,-1,f,null)),_=i.peekPtr(f)}finally{i.pstack.restore(a)}_||o("Cannot prepare empty SQL.");let x=new I(this,_,M);return B.get(this)[_]=x,x},exec:function(){w(this);let m=V(this,arguments);if(!m.sql)return o("exec() requires an SQL string.");let a=m.opt,f=a.callback,_=Array.isArray(a.resultRows)?a.resultRows:void 0,x,J=a.bind,ce=!!(m.cbArg||a.columnNames||_),we=i.scopedAllocPush(),he=Array.isArray(a.saveSql)?a.saveSql:void 0;try{let Ee=g.isSQLableTypedArray(m.sql),Te=Ee?m.sql.byteLength:i.jstrlen(m.sql),ke=i.scopedAlloc(2*i.ptrSizeof+(Te+1)),ne=ke+i.ptrSizeof,A=ne+i.ptrSizeof,W=A+Te;for(Ee?i.heap8().set(m.sql,A):i.jstrcpy(m.sql,i.heap8(),A,Te,!1),i.poke(A+Te,0);A&&i.peek(A,"i8");){i.pokePtr([ke,ne],0),C.checkRc(this,s.sqlite3_prepare_v3(this.pointer,A,Te,0,ke,ne));let re=i.peekPtr(ke);if(A=i.peekPtr(ne),Te=W-A,!!re){if(he&&he.push(s.sqlite3_sql(re).trim()),x=new I(this,re,M),J&&x.parameterCount&&(x.bind(J),J=null),ce&&x.columnCount){let b=Array.isArray(a.columnNames)?0:1;if(ce=!1,m.cbArg||_){let O=Object.create(null);for(;x.step();x._lockedByExec=!1){b++===0&&x.getColumnNames(O.columnNames=a.columnNames||[]),x._lockedByExec=!0;let j=m.cbArg(x,O);if(_&&_.push(j),f&&f.call(a,j,x)===!1)break}x._lockedByExec=!1}b===0&&x.getColumnNames(a.columnNames)}else x.step();x.reset().finalize(),x=null}}}finally{i.scopedAllocPop(we),x&&(delete x._lockedByExec,x.finalize())}return m.returnVal()},createFunction:function(a,f,_){let x=O=>O instanceof Function;switch(arguments.length){case 1:_=a,a=_.name,f=_.xFunc||0;break;case 2:x(f)||(_=f,f=_.xFunc||0);break;case 3:break;default:break}_||(_={}),typeof a!="string"&&o("Invalid arguments: missing function name.");let J=_.xStep||0,ce=_.xFinal||0,we=_.xValue||0,he=_.xInverse||0,Ee;x(f)?(Ee=!1,(x(J)||x(ce))&&o("Ambiguous arguments: scalar or aggregate?"),J=ce=null):x(J)?(x(ce)||o("Missing xFinal() callback for aggregate or window UDF."),f=null):x(ce)?o("Missing xStep() callback for aggregate or window UDF."):o("Missing function-type properties."),Ee===!1?(x(we)||x(he))&&o("xValue and xInverse are not permitted for non-window UDFs."):x(we)?(x(he)||o("xInverse must be provided if xValue is."),Ee=!0):x(he)&&o("xValue must be provided if xInverse is.");let Te=_.pApp;Te!=null&&(typeof Te!="number"||!g.isInt32(Te))&&o("Invalid value for pApp property. Must be a legal WASM pointer value.");let ke=_.xDestroy||0;ke&&!x(ke)&&o("xDestroy property must be a function.");let ne=0;H(_,"deterministic")&&(ne|=s.SQLITE_DETERMINISTIC),H(_,"directOnly")&&(ne|=s.SQLITE_DIRECTONLY),H(_,"innocuous")&&(ne|=s.SQLITE_INNOCUOUS),a=a.toLowerCase();let A=f||J,W=H(_,"arity"),re=typeof W=="number"?W:A.length?A.length-1:0,b;return Ee?b=s.sqlite3_create_window_function(this.pointer,a,re,s.SQLITE_UTF8|ne,Te||0,J,ce,we,he,ke):b=s.sqlite3_create_function_v2(this.pointer,a,re,s.SQLITE_UTF8|ne,Te||0,f,J,ce,ke),C.checkRc(this,b),this},selectValue:function(m,a,f){return $(this,m,a,0,f)},selectValues:function(m,a,f){let _=this.prepare(m),x=[];try{for(_.bind(a);_.step();)x.push(_.get(0,f));_.reset()}finally{_.finalize()}return x},selectArray:function(m,a){return $(this,m,a,[])},selectObject:function(m,a){return $(this,m,a,{})},selectArrays:function(m,a){return E(this,m,a,"array")},selectObjects:function(m,a){return E(this,m,a,"object")},openStatementCount:function(){return this.pointer?Object.keys(B.get(this)).length:0},transaction:function(m){let a="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&o(s.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),a+=" "+arguments[0],m=arguments[1]),w(this).exec(a);try{let f=m(this);return this.exec("COMMIT"),f}catch(f){throw this.exec("ROLLBACK"),f}},savepoint:function(m){w(this).exec("SAVEPOINT oo1");try{let a=m(this);return this.exec("RELEASE oo1"),a}catch(a){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),a}},checkRc:function(m){return te(this,m)}};let K=function(m){return m.pointer||o("Stmt has been closed."),m},d=function(m){let a=M[m==null?"null":typeof m];switch(a){case M.boolean:case M.null:case M.number:case M.string:return a;case M.bigint:if(i.bigIntEnabled)return a;default:return g.isBindableTypedArray(m)?M.blob:void 0}},h=function(m){return d(m)||o("Unsupported bind() argument type:",typeof m)},k=function(m,a){let f=typeof a=="number"?a:s.sqlite3_bind_parameter_index(m.pointer,a);return f===0||!g.isInt32(f)?o("Invalid bind() parameter name: "+a):(f<1||f>m.parameterCount)&&o("Bind index",a,"is out of range."),f},z=function(m,a){return m._lockedByExec&&o("Operation is illegal when statement is locked:",a),m},Q=function m(a,f,_,x){z(K(a),"bind()"),m._||(m._tooBigInt=ce=>o("BigInt value is too big to store without precision loss:",ce),m._={string:function(ce,we,he,Ee){let[Te,ke]=i.allocCString(he,!0);return(Ee?s.sqlite3_bind_blob:s.sqlite3_bind_text)(ce.pointer,we,Te,ke,s.SQLITE_WASM_DEALLOC)}}),h(x),f=k(a,f);let J=0;switch(x==null?M.null:_){case M.null:J=s.sqlite3_bind_null(a.pointer,f);break;case M.string:J=m._.string(a,f,x,!1);break;case M.number:{let ce;g.isInt32(x)?ce=s.sqlite3_bind_int:typeof x=="bigint"?g.bigIntFits64(x)?i.bigIntEnabled?ce=s.sqlite3_bind_int64:g.bigIntFitsDouble(x)?(x=Number(x),ce=s.sqlite3_bind_double):m._tooBigInt(x):m._tooBigInt(x):(x=Number(x),i.bigIntEnabled&&Number.isInteger(x)?ce=s.sqlite3_bind_int64:ce=s.sqlite3_bind_double),J=ce(a.pointer,f,x);break}case M.boolean:J=s.sqlite3_bind_int(a.pointer,f,x?1:0);break;case M.blob:{if(typeof x=="string"){J=m._.string(a,f,x,!0);break}else x instanceof ArrayBuffer?x=new Uint8Array(x):g.isBindableTypedArray(x)||o("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");let ce=i.alloc(x.byteLength||1);i.heap8().set(x.byteLength?x:[0],ce),J=s.sqlite3_bind_blob(a.pointer,f,ce,x.byteLength,s.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",x),o("Unsupported bind() argument type: "+typeof x)}return J&&C.checkRc(a.db.pointer,J),a._mayGet=!1,a};I.prototype={finalize:function(){if(this.pointer){z(this,"finalize()");let m=s.sqlite3_finalize(this.pointer);return delete B.get(this.db)[this.pointer],q.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,m}},clearBindings:function(){return z(K(this),"clearBindings()"),s.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(m){z(this,"reset()"),m&&this.clearBindings();let a=s.sqlite3_reset(K(this).pointer);return this._mayGet=!1,te(this.db,a),this},bind:function(){K(this);let m,a;switch(arguments.length){case 1:m=1,a=arguments[0];break;case 2:m=arguments[0],a=arguments[1];break;default:o("Invalid bind() arguments.")}return a===void 0?this:(this.parameterCount||o("This statement has no bindable parameters."),this._mayGet=!1,a===null?Q(this,m,M.null,a):Array.isArray(a)?(arguments.length!==1&&o("When binding an array, an index argument is not permitted."),a.forEach((f,_)=>Q(this,_+1,h(f),f)),this):(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),typeof a=="object"&&!g.isBindableTypedArray(a)?(arguments.length!==1&&o("When binding an object, an index argument is not permitted."),Object.keys(a).forEach(f=>Q(this,f,h(a[f]),a[f])),this):Q(this,m,h(a),a)))},bindAsBlob:function(m,a){K(this),arguments.length===1&&(a=m,m=1);let f=h(a);return M.string!==f&&M.blob!==f&&M.null!==f&&o("Invalid value type for bindAsBlob()"),Q(this,m,M.blob,a)},step:function(){z(this,"step()");let m=s.sqlite3_step(K(this).pointer);switch(m){case s.SQLITE_DONE:return this._mayGet=!1;case s.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",m,s.sqlite3_js_rc_str(m),"SQL =",s.sqlite3_sql(this.pointer)),C.checkRc(this.db.pointer,m)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{let m=this.step();return this.reset(),m}finally{try{this.finalize()}catch{}}},get:function(m,a){if(K(this)._mayGet||o("Stmt.step() has not (recently) returned true."),Array.isArray(m)){let f=0,_=this.columnCount;for(;f<_;)m[f]=this.get(f++);return m}else if(m&&typeof m=="object"){let f=0,_=this.columnCount;for(;f<_;)m[s.sqlite3_column_name(this.pointer,f)]=this.get(f++);return m}switch(U(this,m),a===void 0?s.sqlite3_column_type(this.pointer,m):a){case s.SQLITE_NULL:return null;case s.SQLITE_INTEGER:if(i.bigIntEnabled){let f=s.sqlite3_column_int64(this.pointer,m);return f>=Number.MIN_SAFE_INTEGER&&f<=Number.MAX_SAFE_INTEGER?Number(f).valueOf():f}else{let f=s.sqlite3_column_double(this.pointer,m);return(f>Number.MAX_SAFE_INTEGER||f<Number.MIN_SAFE_INTEGER)&&o("Integer is out of range for JS integer range: "+f),g.isInt32(f)?f|0:f}case s.SQLITE_FLOAT:return s.sqlite3_column_double(this.pointer,m);case s.SQLITE_TEXT:return s.sqlite3_column_text(this.pointer,m);case s.SQLITE_BLOB:{let f=s.sqlite3_column_bytes(this.pointer,m),_=s.sqlite3_column_blob(this.pointer,m),x=new Uint8Array(f);return f&&x.set(i.heap8u().slice(_,_+f),0),f&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(x.buffer),x}default:o("Don't know how to translate","type of result column #"+m+".")}o("Not reached.")},getInt:function(m){return this.get(m,s.SQLITE_INTEGER)},getFloat:function(m){return this.get(m,s.SQLITE_FLOAT)},getString:function(m){return this.get(m,s.SQLITE_TEXT)},getBlob:function(m){return this.get(m,s.SQLITE_BLOB)},getJSON:function(m){let a=this.get(m,s.SQLITE_STRING);return a===null?a:JSON.parse(a)},getColumnName:function(m){return s.sqlite3_column_name(U(K(this),m).pointer,m)},getColumnNames:function(m=[]){U(K(this),0);let a=this.columnCount;for(let f=0;f<a;++f)m.push(s.sqlite3_column_name(this.pointer,f));return m},getParamIndex:function(m){return K(this).parameterCount?s.sqlite3_bind_parameter_index(this.pointer,m):void 0},getParamName:function(m){return K(this).parameterCount?s.sqlite3_bind_parameter_name(this.pointer,m):void 0},isBusy:function(){return s.sqlite3_stmt_busy(K(this))!==0},isReadOnly:function(){return s.sqlite3_stmt_readonly(K(this))!==0}};{let m={enumerable:!0,get:function(){return q.get(this)},set:()=>o("The pointer property is read-only.")};Object.defineProperty(I.prototype,"pointer",m),Object.defineProperty(C.prototype,"pointer",m)}if(Object.defineProperty(I.prototype,"columnCount",{enumerable:!1,get:function(){return s.sqlite3_column_count(this.pointer)},set:()=>o("The columnCount property is read-only.")}),t.oo1={DB:C,Stmt:I},g.isUIThread()){t.oo1.JsStorageDb=function(a="session"){let f=L.normalizeArgs(...arguments);a=f.filename,a!=="session"&&a!=="local"&&o("JsStorageDb db name must be one of 'session' or 'local'."),f.vfs="kvvfs",L.call(this,f)};let m=t.oo1.JsStorageDb;m.prototype=Object.create(C.prototype),m.clearStorage=s.sqlite3_js_kvvfs_clear,m.prototype.clearStorage=function(){return m.clearStorage(w(this).filename)},m.storageSize=s.sqlite3_js_kvvfs_size,m.prototype.storageSize=function(){return m.storageSize(w(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.util;t.initWorker1API=function(){"use strict";let o=(...L)=>{throw new Error(L.join(" "))};globalThis.WorkerGlobalScope instanceof Function||o("initWorker1API() must be run from a Worker thread.");let s=this.sqlite3||o("Missing this.sqlite3 object."),i=s.oo1.DB,g=function(L){let C=q.idMap.get(L);return C||(C="db#"+ ++q.idSeq+"@"+L.pointer,q.idMap.set(L,C),C)},q={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(L){let C=new i(L);return this.dbs[g(C)]=C,this.dbList.indexOf(C)<0&&this.dbList.push(C),C},close:function(L,C){if(L){delete this.dbs[g(L)];let M=L.filename,I=n.sqlite3__wasm_db_vfs(L.pointer,0);L.close();let w=this.dbList.indexOf(L);w>=0&&this.dbList.splice(w,1),C&&M&&I&&n.sqlite3__wasm_vfs_unlink(I,M)}},post:function(L,C){C&&C.length?(globalThis.postMessage(L,Array.from(C)),C.length=0):globalThis.postMessage(L)},dbs:Object.create(null),getDb:function(L,C=!0){return this.dbs[L]||(C?o("Unknown (or closed) DB ID:",L):void 0)}},B=function(L=q.dbList[0]){return L&&L.pointer?L:o("DB is not opened.")},H=function(L,C=!0){let M=q.getDb(L.dbId,!1)||q.dbList[0];return C?B(M):M},te=function(){return q.dbList[0]&&g(q.dbList[0])},Y=L=>L===""||L[0]===":",ie={open:function(L){let C=Object.create(null),M=L.args||Object.create(null);M.simulateError&&o("Throwing because of simulateError flag.");let I=Object.create(null);C.vfs=M.vfs,C.filename=M.filename||"";let w=q.open(C);return I.filename=w.filename,I.persistent=!!s.capi.sqlite3_js_db_uses_vfs(w.pointer,"opfs"),I.dbId=g(w),I.vfs=w.dbVfsName(),I},close:function(L){let C=H(L,!1),M={filename:C&&C.filename};if(C){let I=L.args&&typeof L.args=="object"?!!L.args.unlink:!1;q.close(C,I)}return M},exec:function(L){let C=typeof L.args=="string"?{sql:L.args}:L.args||Object.create(null);C.rowMode==="stmt"?o("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):C.sql||o("'exec' requires input SQL.");let M=H(L);(C.callback||Array.isArray(C.resultRows))&&(M._blobXfer=q.xfer);let I=C.callback,w=0,U=!!C.columnNames;typeof I=="string"&&(U||(C.columnNames=[]),C.callback=function(V,$){q.post({type:I,columnNames:C.columnNames,rowNumber:++w,row:V},q.xfer)});try{let V=C.countChanges?M.changes(!0,C.countChanges===64):void 0;M.exec(C),V!==void 0&&(C.changeCount=M.changes(!0,C.countChanges===64)-V);let $=C.lastInsertRowId?s.capi.sqlite3_last_insert_rowid(M):void 0;$!==void 0&&(C.lastInsertRowId=$),C.callback instanceof Function&&(C.callback=I,q.post({type:I,columnNames:C.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,C.callback&&(C.callback=I)}return C},"config-get":function(){let L=Object.create(null),C=s.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(C,M)&&(L[M]=C[M])}),L.version=s.version,L.vfsList=s.capi.sqlite3_js_vfs_list(),L},export:function(L){let C=H(L),M={byteArray:s.capi.sqlite3_js_db_export(C.pointer),filename:C.filename,mimetype:"application/x-sqlite3"};return q.xfer.push(M.byteArray.buffer),M},toss:function(L){o("Testing worker exception")}};globalThis.onmessage=async function(L){L=L.data;let C,M=L.dbId,I=L.type,w=performance.now();try{ie.hasOwnProperty(I)&&ie[I]instanceof Function?C=await ie[I](L):o("Unknown db worker message type:",L.type)}catch(U){I="error",C={operation:L.type,message:U.message,errorClass:U.name,input:L},U.stack&&(C.stack=typeof U.stack=="string"?U.stack.split(/\n\s*/):U.stack)}M||(M=C.dbId||te()),q.post({type:I,dbId:M,messageId:L.messageId,workerReceivedTime:w,workerRespondTime:performance.now(),departureTime:L.departureTime,result:C},q.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.wasm,o=t.capi,s=t.util.toss3,i=Object.create(null);t.vfs=i,o.sqlite3_vfs.prototype.registerVfs=function(g=!1){this instanceof t.capi.sqlite3_vfs||s("Expecting a sqlite3_vfs-type argument.");let q=o.sqlite3_vfs_register(this,g?1:0);return q&&s("sqlite3_vfs_register(",this,") failed with rc",q),this.pointer!==o.sqlite3_vfs_find(this.$zName)&&s("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},i.installVfs=function(g){let q=0,B=["io","vfs"];for(let H of B){let te=g[H];te&&(++q,te.struct.installMethods(te.methods,!!te.applyArgcCheck),H==="vfs"&&(!te.struct.$zName&&typeof te.name=="string"&&te.struct.addOnDispose(te.struct.$zName=n.allocCString(te.name)),te.struct.registerVfs(!!te.asDefault)))}return q||s("Misuse: installVfs() options object requires at least","one of:",B),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;let n=t.wasm,o=t.capi,s=t.util.toss3,i=Object.create(null);t.vtab=i;let g=o.sqlite3_index_info;g.prototype.nthConstraint=function(H,te=!1){if(H<0||H>=this.$nConstraint)return!1;let Y=this.$aConstraint+g.sqlite3_index_constraint.structInfo.sizeof*H;return te?Y:new g.sqlite3_index_constraint(Y)},g.prototype.nthConstraintUsage=function(H,te=!1){if(H<0||H>=this.$nConstraint)return!1;let Y=this.$aConstraintUsage+g.sqlite3_index_constraint_usage.structInfo.sizeof*H;return te?Y:new g.sqlite3_index_constraint_usage(Y)},g.prototype.nthOrderBy=function(H,te=!1){if(H<0||H>=this.$nOrderBy)return!1;let Y=this.$aOrderBy+g.sqlite3_index_orderby.structInfo.sizeof*H;return te?Y:new g.sqlite3_index_orderby(Y)};let q=function(H,te){return function(Y,ie=!1){if(arguments.length===0&&(Y=new te),Y instanceof te)return this.set(Y.pointer,Y),Y;n.isPtr(Y)||t.SQLite3Error.toss("Invalid argument to",H+"()");let L=this.get(Y);return ie&&this.delete(Y),L}.bind(new Map)},B=function(H,te){let Y=q(H,te);return Object.assign(Object.create(null),{StructType:te,create:ie=>{let L=Y();return n.pokePtr(ie,L.pointer),L},get:ie=>Y(ie),unget:ie=>Y(ie,!0),dispose:ie=>{let L=Y(ie,!0);L&&L.dispose()}})};i.xVtab=B("xVtab",o.sqlite3_vtab),i.xCursor=B("xCursor",o.sqlite3_vtab_cursor),i.xIndexInfo=H=>new o.sqlite3_index_info(H),i.xError=function H(te,Y,ie){if(H.errorReporter instanceof Function)try{H.errorReporter("sqlite3_module::"+te+"(): "+Y.message)}catch{}let L;return Y instanceof t.WasmAllocError?L=o.SQLITE_NOMEM:arguments.length>2?L=ie:Y instanceof t.SQLite3Error&&(L=Y.resultCode),L||o.SQLITE_ERROR},i.xError.errorReporter=console.error.bind(console),i.xRowid=(H,te)=>n.poke(H,te,"i64"),i.setupModule=function(H){let te=!1,Y=this instanceof o.sqlite3_module?this:H.struct||(te=new o.sqlite3_module);try{let ie=H.methods||s("Missing 'methods' object.");for(let L of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){let C=L[0],M=L[1];ie[C]===!0?ie[C]=ie[M]:ie[M]===!0&&(ie[M]=ie[C])}if(H.catchExceptions){let L=function(I,w){return["xConnect","xCreate"].indexOf(I)>=0?function(U,V,$,E,K,d){try{return w(...arguments)||0}catch(h){return h instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(d)),n.pokePtr(d,n.allocCString(h.message))),i.xError(I,h)}}:function(...U){try{return w(...U)||0}catch(V){return i.xError(I,V)}}},C=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],M=Object.create(null);for(let I of C){let w=ie[I];if(w instanceof Function)I==="xConnect"&&ie.xCreate===w?M[I]=ie.xCreate:I==="xCreate"&&ie.xConnect===w?M[I]=ie.xConnect:M[I]=L(I,w);else continue}Y.installMethods(M,!1)}else Y.installMethods(ie,!!H.applyArgcCheck);if(Y.$iVersion===0){let L;typeof H.iVersion=="number"?L=H.iVersion:Y.$xShadowName?L=3:Y.$xSavePoint||Y.$xRelease||Y.$xRollbackTo?L=2:L=1,Y.$iVersion=L}}catch(ie){throw te&&te.dispose(),ie}return Y},o.sqlite3_module.prototype.setupModule=function(H){return i.setupModule.call(this,H)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=function o(s){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!s||typeof s!="object")&&(s=Object.create(null));let i=new URL(globalThis.location.href).searchParams;return i.has("opfs-disable")?Promise.resolve(t):(s.verbose===void 0&&(s.verbose=i.has("opfs-verbose")?+i.get("opfs-verbose")||2:1),s.sanityChecks===void 0&&(s.sanityChecks=i.has("opfs-sanity-check")),s.proxyUri===void 0&&(s.proxyUri=o.defaultProxyUri),typeof s.proxyUri=="function"&&(s.proxyUri=s.proxyUri()),new Promise(function(q,B){let H=[t.config.error,t.config.warn,t.config.log],te=(b,...O)=>{s.verbose>b&&H[b]("OPFS syncer:",...O)},Y=(...b)=>te(2,...b),ie=(...b)=>te(1,...b),L=(...b)=>te(0,...b),C=t.util.toss,M=t.capi,I=t.util,w=t.wasm,U=M.sqlite3_vfs,V=M.sqlite3_file,$=M.sqlite3_io_methods,E=Object.create(null),K=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;E.metrics={dump:function(){let b,O=0,j=0,se=0;for(b in _.opIds){let ee=x[b];O+=ee.count,j+=ee.time,se+=ee.wait,ee.avgTime=ee.count&&ee.time?ee.time/ee.count:0,ee.avgWait=ee.count&&ee.wait?ee.wait/ee.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",x,`
Total of`,O,"op(s) for",j,"ms (incl. "+se+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",x.s11n),m.postMessage({type:"opfs-async-metrics"})},reset:function(){let b,O=se=>se.count=se.time=se.wait=0;for(b in _.opIds)O(x[b]=Object.create(null));let j=x.s11n=Object.create(null);j=j.serialize=Object.create(null),j.count=j.time=0,j=x.s11n.deserialize=Object.create(null),j.count=j.time=0}};let d=new $,h=new U().addOnDispose(()=>d.dispose()),k,z=b=>(k=!0,h.dispose(),B(b)),Q=()=>(k=!1,q(t)),m=new Worker(new URL("sqlite3-opfs-async-proxy.js",import.meta.url));setTimeout(()=>{k===void 0&&z(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),m._originalOnError=m.onerror,m.onerror=function(b){L("Error initializing OPFS asyncer:",b),z(new Error("Loading OPFS async Worker failed for unknown reasons."))};let a=M.sqlite3_vfs_find(null),f=a?new U(a):null;d.$iVersion=1,h.$iVersion=2,h.$szOsFile=M.sqlite3_file.structInfo.sizeof,h.$mxPathname=1024,h.$zName=w.allocCString("opfs"),h.$xDlOpen=h.$xDlError=h.$xDlSym=h.$xDlClose=null,h.addOnDispose("$zName",h.$zName,"cleanup default VFS wrapper",()=>f?f.dispose():null);let _=Object.create(null);_.verbose=s.verbose,_.littleEndian=(()=>{let b=new ArrayBuffer(2);return new DataView(b).setInt16(0,256,!0),new Int16Array(b)[0]===256})(),_.asyncIdleWaitTime=150,_.asyncS11nExceptions=1,_.fileBufferSize=1024*64,_.sabS11nOffset=_.fileBufferSize,_.sabS11nSize=h.$mxPathname*2,_.sabIO=new SharedArrayBuffer(_.fileBufferSize+_.sabS11nSize),_.opIds=Object.create(null);let x=Object.create(null);{let b=0;_.opIds.whichOp=b++,_.opIds.rc=b++,_.opIds.xAccess=b++,_.opIds.xClose=b++,_.opIds.xDelete=b++,_.opIds.xDeleteNoWait=b++,_.opIds.xFileSize=b++,_.opIds.xLock=b++,_.opIds.xOpen=b++,_.opIds.xRead=b++,_.opIds.xSleep=b++,_.opIds.xSync=b++,_.opIds.xTruncate=b++,_.opIds.xUnlock=b++,_.opIds.xWrite=b++,_.opIds.mkdir=b++,_.opIds["opfs-async-metrics"]=b++,_.opIds["opfs-async-shutdown"]=b++,_.opIds.retry=b++,_.sabOP=new SharedArrayBuffer(b*4),E.metrics.reset()}_.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(b=>{(_.sq3Codes[b]=M[b])===void 0&&C("Maintenance required: not found:",b)}),_.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});let J=(b,...O)=>{let j=_.opIds[b]||C("Invalid op ID:",b);_.s11n.serialize(...O),Atomics.store(_.sabOPView,_.opIds.rc,-1),Atomics.store(_.sabOPView,_.opIds.whichOp,j),Atomics.notify(_.sabOPView,_.opIds.whichOp);let se=performance.now();for(;Atomics.wait(_.sabOPView,_.opIds.rc,-1)!=="not-equal";);let ee=Atomics.load(_.sabOPView,_.opIds.rc);if(x[b].wait+=performance.now()-se,ee&&_.asyncS11nExceptions){let ge=_.s11n.deserialize();ge&&L(b+"() async error:",...ge)}return ee};E.debug={asyncShutdown:()=>{ie("Shutting down OPFS async listener. The OPFS VFS will no longer work."),J("opfs-async-shutdown")},asyncRestart:()=>{ie("Attempting to restart OPFS VFS async listener. Might work, might not."),m.postMessage({type:"opfs-async-restart"})}};let ce=()=>{if(_.s11n)return _.s11n;let b=new TextDecoder,O=new TextEncoder("utf-8"),j=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),se=new DataView(_.sabIO,_.sabS11nOffset,_.sabS11nSize);_.s11n=Object.create(null);let ee=Object.create(null);ee.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},ee.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},ee.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},ee.string={id:4};let ge=pe=>ee[typeof pe]||C("Maintenance required: this value type cannot be serialized.",pe),ve=pe=>{switch(pe){case ee.number.id:return ee.number;case ee.bigint.id:return ee.bigint;case ee.boolean.id:return ee.boolean;case ee.string.id:return ee.string;default:C("Invalid type ID:",pe)}};return _.s11n.deserialize=function(pe=!1){++x.s11n.deserialize.count;let Ze=performance.now(),Xe=j[0],R=Xe?[]:null;if(Xe){let le=[],ae=1,de,Me,Qe;for(de=0;de<Xe;++de,++ae)le.push(ve(j[ae]));for(de=0;de<Xe;++de){let je=le[de];je.getter?(Qe=se[je.getter](ae,_.littleEndian),ae+=je.size):(Me=se.getInt32(ae,_.littleEndian),ae+=4,Qe=b.decode(j.slice(ae,ae+Me)),ae+=Me),R.push(Qe)}}return pe&&(j[0]=0),x.s11n.deserialize.time+=performance.now()-Ze,R},_.s11n.serialize=function(...pe){let Ze=performance.now();if(++x.s11n.serialize.count,pe.length){let Xe=[],R=0,le=1;for(j[0]=pe.length&255;R<pe.length;++R,++le)Xe.push(ge(pe[R])),j[le]=Xe[R].id;for(R=0;R<pe.length;++R){let ae=Xe[R];if(ae.setter)se[ae.setter](le,pe[R],_.littleEndian),le+=ae.size;else{let de=O.encode(pe[R]);se.setInt32(le,de.byteLength,_.littleEndian),le+=4,j.set(de,le),le+=de.byteLength}}}else j[0]=0;x.s11n.serialize.time+=performance.now()-Ze},_.s11n},we=function b(O=16){b._chars||(b._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",b._n=b._chars.length);let j=[],se=0;for(;se<O;++se){let ee=Math.random()*(b._n*64)%b._n|0;j[se]=b._chars[ee]}return j.join("")},he=Object.create(null),Ee=Object.create(null);Ee.op=void 0,Ee.start=void 0;let Te=b=>{Ee.start=performance.now(),Ee.op=b,++x[b].count},ke=()=>x[Ee.op].time+=performance.now()-Ee.start,ne={xCheckReservedLock:function(b,O){return w.poke(O,0,"i32"),0},xClose:function(b){Te("xClose");let O=0,j=he[b];return j&&(delete he[b],O=J("xClose",b),j.sq3File&&j.sq3File.dispose()),ke(),O},xDeviceCharacteristics:function(b){return M.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(b,O,j){return M.SQLITE_NOTFOUND},xFileSize:function(b,O){Te("xFileSize");let j=J("xFileSize",b);if(j==0)try{let se=_.s11n.deserialize()[0];w.poke(O,se,"i64")}catch(se){L("Unexpected error reading xFileSize() result:",se),j=_.sq3Codes.SQLITE_IOERR}return ke(),j},xLock:function(b,O){Te("xLock");let j=he[b],se=0;return j.lockType?j.lockType=O:(se=J("xLock",b,O),se===0&&(j.lockType=O)),ke(),se},xRead:function(b,O,j,se){Te("xRead");let ee=he[b],ge;try{ge=J("xRead",b,j,Number(se)),(ge===0||M.SQLITE_IOERR_SHORT_READ===ge)&&w.heap8u().set(ee.sabView.subarray(0,j),O)}catch(ve){L("xRead(",arguments,") failed:",ve,ee),ge=M.SQLITE_IOERR_READ}return ke(),ge},xSync:function(b,O){Te("xSync"),++x.xSync.count;let j=J("xSync",b,O);return ke(),j},xTruncate:function(b,O){Te("xTruncate");let j=J("xTruncate",b,Number(O));return ke(),j},xUnlock:function(b,O){Te("xUnlock");let j=he[b],se=0;return M.SQLITE_LOCK_NONE===O&&j.lockType&&(se=J("xUnlock",b,O)),se===0&&(j.lockType=O),ke(),se},xWrite:function(b,O,j,se){Te("xWrite");let ee=he[b],ge;try{ee.sabView.set(w.heap8u().subarray(O,O+j)),ge=J("xWrite",b,j,Number(se))}catch(ve){L("xWrite(",arguments,") failed:",ve,ee),ge=M.SQLITE_IOERR_WRITE}return ke(),ge}},A={xAccess:function(b,O,j,se){Te("xAccess");let ee=J("xAccess",w.cstrToJs(O));return w.poke(se,ee?0:1,"i32"),ke(),0},xCurrentTime:function(b,O){return w.poke(O,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(b,O){return w.poke(O,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(b,O,j){Te("xDelete");let se=J("xDelete",w.cstrToJs(O),j,!1);return ke(),se},xFullPathname:function(b,O,j,se){return w.cstrncpy(se,O,j)<j?0:M.SQLITE_CANTOPEN},xGetLastError:function(b,O,j){return ie("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(O,j,se,ee,ge){Te("xOpen");let ve=0;j===0?j=we():w.isPtr(j)&&(M.sqlite3_uri_boolean(j,"opfs-unlock-asap",0)&&(ve|=_.opfsFlags.OPFS_UNLOCK_ASAP),M.sqlite3_uri_boolean(j,"delete-before-open",0)&&(ve|=_.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),j=w.cstrToJs(j));let pe=Object.create(null);pe.fid=se,pe.filename=j,pe.sab=new SharedArrayBuffer(_.fileBufferSize),pe.flags=ee,pe.readOnly=!(t.SQLITE_OPEN_CREATE&ee)&&!!(ee&M.SQLITE_OPEN_READONLY);let Ze=J("xOpen",se,j,ee,ve);return Ze||(pe.readOnly&&w.poke(ge,M.SQLITE_OPEN_READONLY,"i32"),he[se]=pe,pe.sabView=_.sabFileBufView,pe.sq3File=new V(se),pe.sq3File.$pMethods=d.pointer,pe.lockType=M.SQLITE_LOCK_NONE),ke(),Ze}};f&&(h.$xRandomness=f.$xRandomness,h.$xSleep=f.$xSleep),h.$xRandomness||(A.xRandomness=function(b,O,j){let se=w.heap8u(),ee=0;for(;ee<O;++ee)se[j+ee]=Math.random()*255e3&255;return ee}),h.$xSleep||(A.xSleep=function(b,O){return Atomics.wait(_.sabOPView,_.opIds.xSleep,0,O),0}),E.getResolvedPath=function(b,O){let j=new URL(b,"file://irrelevant").pathname;return O?j.split("/").filter(se=>!!se):j},E.getDirForFilename=async function(O,j=!1){let se=E.getResolvedPath(O,!0),ee=se.pop(),ge=E.rootDirectory;for(let ve of se)ve&&(ge=await ge.getDirectoryHandle(ve,{create:!!j}));return[ge,ee]},E.mkdir=async function(b){try{return await E.getDirForFilename(b+"/filepart",!0),!0}catch{return!1}},E.entryExists=async function(b){try{let[O,j]=await E.getDirForFilename(b);return await O.getFileHandle(j),!0}catch{return!1}},E.randomFilename=we,E.treeList=async function(){let b=async function j(se,ee){ee.name=se.name,ee.dirs=[],ee.files=[];for await(let ge of se.values())if(ge.kind==="directory"){let ve=Object.create(null);ee.dirs.push(ve),await j(ge,ve)}else ee.files.push(ge.name)},O=Object.create(null);return await b(E.rootDirectory,O),O},E.rmfr=async function(){let b=E.rootDirectory,O={recurse:!0};for await(let j of b.values())b.removeEntry(j.name,O)},E.unlink=async function(b,O=!1,j=!1){try{let[se,ee]=await E.getDirForFilename(b,!1);return await se.removeEntry(ee,{recursive:O}),!0}catch(se){if(j)throw new Error("unlink(",arguments[0],") failed: "+se.message,{cause:se});return!1}},E.traverse=async function(b){let O={recursive:!0,directory:E.rootDirectory};typeof b=="function"&&(b={callback:b}),b=Object.assign(O,b||{}),async function se(ee,ge){for await(let ve of ee.values()){if(b.callback(ve,ee,ge)===!1)return!1;if(b.recursive&&ve.kind==="directory"&&await se(ve,ge+1)===!1)break}}(b.directory,0)};let W=async function(b,O){let[j,se]=await E.getDirForFilename(b,!0),ge=await(await j.getFileHandle(se,{create:!0})).createSyncAccessHandle(),ve=0,pe,Ze=!1,Xe=!1;try{for(ge.truncate(0);(pe=await O())!==void 0;)pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),ve===0&&pe.byteLength>=15&&(I.affirmDbHeader(pe),Ze=!0),ge.write(pe,{at:ve}),ve+=pe.byteLength;if((ve<512||ve%512!==0)&&C("Input size",ve,"is not correct for an SQLite database."),!Ze){let R=new Uint8Array(20);ge.read(R,{at:0}),I.affirmDbHeader(R)}return ge.write(new Uint8Array([1,1]),{at:18}),ve}catch(R){throw await ge.close(),ge=void 0,await j.removeEntry(se).catch(()=>{}),R}finally{ge&&await ge.close()}};if(E.importDb=async function(b,O){if(O instanceof Function)return W(b,O);O instanceof ArrayBuffer&&(O=new Uint8Array(O)),I.affirmIsDb(O);let j=O.byteLength,[se,ee]=await E.getDirForFilename(b,!0),ge,ve,pe=0;try{return ge=await(await se.getFileHandle(ee,{create:!0})).createSyncAccessHandle(),ge.truncate(0),pe=ge.write(O,{at:0}),pe!=j&&C("Expected to write "+j+" bytes but wrote "+pe+"."),ge.write(new Uint8Array([1,1]),{at:18}),pe}catch(Ze){throw ge&&(await ge.close(),ge=void 0),await se.removeEntry(ee).catch(()=>{}),Ze}finally{ge&&await ge.close()}},t.oo1){let b=function(...O){let j=t.oo1.DB.dbCtorHelper.normalizeArgs(...O);j.vfs=h.$zName,t.oo1.DB.dbCtorHelper.call(this,j)};b.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=b,b.importDb=E.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(h.pointer,function(O,j){j.capi.sqlite3_busy_timeout(O,1e4)})}let re=function(){let b=w.scopedAllocPush(),O=new V;try{let j=O.pointer,se=M.SQLITE_OPEN_CREATE|M.SQLITE_OPEN_READWRITE|M.SQLITE_OPEN_MAIN_DB,ee=w.scopedAlloc(8),ge="/sanity/check/file"+we(8),ve=w.scopedAllocCString(ge),pe;if(_.s11n.serialize("This is \xE4 string."),pe=_.s11n.deserialize(),Y("deserialize() says:",pe),pe[0]!=="This is \xE4 string."&&C("String d13n error."),A.xAccess(h.pointer,ve,0,ee),pe=w.peek(ee,"i32"),Y("xAccess(",ge,") exists ?=",pe),pe=A.xOpen(h.pointer,ve,j,se,ee),Y("open rc =",pe,"state.sabOPView[xOpen] =",_.sabOPView[_.opIds.xOpen]),pe!==0){L("open failed with code",pe);return}A.xAccess(h.pointer,ve,0,ee),pe=w.peek(ee,"i32"),pe||C("xAccess() failed to detect file."),pe=ne.xSync(O.pointer,0),pe&&C("sync failed w/ rc",pe),pe=ne.xTruncate(O.pointer,1024),pe&&C("truncate failed w/ rc",pe),w.poke(ee,0,"i64"),pe=ne.xFileSize(O.pointer,ee),pe&&C("xFileSize failed w/ rc",pe),Y("xFileSize says:",w.peek(ee,"i64")),pe=ne.xWrite(O.pointer,ve,10,1),pe&&C("xWrite() failed!");let Ze=w.scopedAlloc(16);pe=ne.xRead(O.pointer,Ze,6,2),w.poke(Ze+6,0);let Xe=w.cstrToJs(Ze);Y("xRead() got:",Xe),Xe!=="sanity"&&C("Unexpected xRead() value."),A.xSleep&&(Y("xSleep()ing before close()ing..."),A.xSleep(h.pointer,2e3),Y("waking up from xSleep()")),pe=ne.xClose(j),Y("xClose rc =",pe,"sabOPView =",_.sabOPView),Y("Deleting file:",ge),A.xDelete(h.pointer,ve,4660),A.xAccess(h.pointer,ve,0,ee),pe=w.peek(ee,"i32"),pe&&C("Expecting 0 from xAccess(",ge,") after xDelete()."),ie("End of OPFS sanity checks.")}finally{O.dispose(),w.scopedAllocPop(b)}};m.onmessage=function({data:b}){switch(b.type){case"opfs-unavailable":z(new Error(b.payload.join(" ")));break;case"opfs-async-loaded":m.postMessage({type:"opfs-async-init",args:_});break;case"opfs-async-inited":{if(k===!0)break;try{t.vfs.installVfs({io:{struct:d,methods:ne},vfs:{struct:h,methods:A}}),_.sabOPView=new Int32Array(_.sabOP),_.sabFileBufView=new Uint8Array(_.sabIO,0,_.fileBufferSize),_.sabS11nView=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),ce(),s.sanityChecks&&(ie("Running sanity checks because of opfs-sanity-check URL arg..."),re()),K()?navigator.storage.getDirectory().then(O=>{m.onerror=m._originalOnError,delete m._originalOnError,t.opfs=E,E.rootDirectory=O,Y("End of OPFS sqlite3_vfs setup.",h),Q()}).catch(z):Q()}catch(O){L(O),z(O)}break}default:{let O="Unexpected message from the OPFS async worker: "+JSON.stringify(b);L(O),z(new Error(O));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async o=>{try{let s=n.defaultProxyUri;return o.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=o.scriptInfo.sqlite3Dir+s),n().catch(i=>{o.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",i.message)})}catch(s){return o.config.error("installOpfsVfs() exception:",s),Promise.reject(s)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=t.util.toss,o=t.util.toss3,s=Object.create(null),i=t.capi,g=t.util,q=t.wasm,B=4096,H=512,te=4,Y=8,ie=H+te,L=H,C=ie,M=B,I=i.SQLITE_OPEN_MAIN_DB|i.SQLITE_OPEN_MAIN_JOURNAL|i.SQLITE_OPEN_SUPER_JOURNAL|i.SQLITE_OPEN_WAL,w=i.SQLITE_OPEN_MEMORY,U=".opaque",V=()=>Math.random().toString(36).slice(2),$=new TextDecoder,E=new TextEncoder,K=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),d=[t.config.error,t.config.warn,t.config.log],h=t.config.log,k=t.config.warn,z=t.config.error,Q=new Map,m=ne=>Q.get(ne),a=(ne,A)=>{A?Q.set(ne,A):Q.delete(ne)},f=new Map,_=ne=>f.get(ne),x=(ne,A)=>{A?f.set(ne,A):f.delete(ne)},J={xCheckReservedLock:function(ne,A){let W=_(ne);return W.log("xCheckReservedLock"),W.storeErr(),q.poke32(A,1),0},xClose:function(ne){let A=_(ne);A.storeErr();let W=A.getOFileForS3File(ne);if(W)try{A.log(`xClose ${W.path}`),A.mapS3FileToOFile(ne,!1),W.sah.flush(),W.flags&i.SQLITE_OPEN_DELETEONCLOSE&&A.deletePath(W.path)}catch(re){return A.storeErr(re,i.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(ne){return i.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(ne,A,W){return i.SQLITE_NOTFOUND},xFileSize:function(ne,A){let W=_(ne);W.log("xFileSize");let b=W.getOFileForS3File(ne).sah.getSize()-M;return q.poke64(A,BigInt(b)),0},xLock:function(ne,A){let W=_(ne);W.log(`xLock ${A}`),W.storeErr();let re=W.getOFileForS3File(ne);return re.lockType=A,0},xRead:function(ne,A,W,re){let b=_(ne);b.storeErr();let O=b.getOFileForS3File(ne);b.log(`xRead ${O.path} ${W} @ ${re}`);try{let j=O.sah.read(q.heap8u().subarray(A,A+W),{at:M+Number(re)});return j<W?(q.heap8u().fill(0,A+j,A+W),i.SQLITE_IOERR_SHORT_READ):0}catch(j){return b.storeErr(j,i.SQLITE_IOERR)}},xSectorSize:function(ne){return B},xSync:function(ne,A){let W=_(ne);W.log(`xSync ${A}`),W.storeErr();let re=W.getOFileForS3File(ne);try{return re.sah.flush(),0}catch(b){return W.storeErr(b,i.SQLITE_IOERR)}},xTruncate:function(ne,A){let W=_(ne);W.log(`xTruncate ${A}`),W.storeErr();let re=W.getOFileForS3File(ne);try{return re.sah.truncate(M+Number(A)),0}catch(b){return W.storeErr(b,i.SQLITE_IOERR)}},xUnlock:function(ne,A){let W=_(ne);W.log("xUnlock");let re=W.getOFileForS3File(ne);return re.lockType=A,0},xWrite:function(ne,A,W,re){let b=_(ne);b.storeErr();let O=b.getOFileForS3File(ne);b.log(`xWrite ${O.path} ${W} ${re}`);try{let j=O.sah.write(q.heap8u().subarray(A,A+W),{at:M+Number(re)});return W===j?0:n("Unknown write() failure.")}catch(j){return b.storeErr(j,i.SQLITE_IOERR)}}},ce=new i.sqlite3_io_methods;ce.$iVersion=1,t.vfs.installVfs({io:{struct:ce,methods:J}});let we={xAccess:function(ne,A,W,re){let b=m(ne);b.storeErr();try{let O=b.getPath(A);q.poke32(re,b.hasFilename(O)?1:0)}catch{q.poke32(re,0)}return 0},xCurrentTime:function(ne,A){return q.poke(A,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(ne,A){return q.poke(A,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(ne,A,W){let re=m(ne);re.log(`xDelete ${q.cstrToJs(A)}`),re.storeErr();try{return re.deletePath(re.getPath(A)),0}catch(b){return re.storeErr(b),i.SQLITE_IOERR_DELETE}},xFullPathname:function(ne,A,W,re){return q.cstrncpy(re,A,W)<W?0:i.SQLITE_CANTOPEN},xGetLastError:function(ne,A,W){let re=m(ne),b=re.popErr();if(re.log(`xGetLastError ${A} e =`,b),b){let O=q.scopedAllocPush();try{let[j,se]=q.scopedAllocCString(b.message,!0);q.cstrncpy(W,j,A),se>A&&q.poke8(W+A-1,0)}catch{return i.SQLITE_NOMEM}finally{q.scopedAllocPop(O)}}return b?b.sqlite3Rc||i.SQLITE_IOERR:0},xOpen:function(A,W,re,b,O){let j=m(A);try{b&=~w,j.log(`xOpen ${q.cstrToJs(W)} ${b}`);let se=W&&q.peek8(W)?j.getPath(W):V(),ee=j.getSAHForPath(se);!ee&&b&i.SQLITE_OPEN_CREATE&&(j.getFileCount()<j.getCapacity()?(ee=j.nextAvailableSAH(),j.setAssociatedPath(ee,se,b)):n("SAH pool is full. Cannot create file",se)),ee||n("file not found:",se);let ge={path:se,flags:b,sah:ee};j.mapS3FileToOFile(re,ge),ge.lockType=i.SQLITE_LOCK_NONE;let ve=new i.sqlite3_file(re);return ve.$pMethods=ce.pointer,ve.dispose(),q.poke32(O,b),0}catch(se){return j.storeErr(se),i.SQLITE_CANTOPEN}}},he=function(ne){t.capi.sqlite3_vfs_find(ne)&&o("VFS name is already registered:",ne);let A=new i.sqlite3_vfs,W=i.sqlite3_vfs_find(null),re=W?new i.sqlite3_vfs(W):null;return A.$iVersion=2,A.$szOsFile=i.sqlite3_file.structInfo.sizeof,A.$mxPathname=H,A.addOnDispose(A.$zName=q.allocCString(ne),()=>a(A.pointer,0)),re&&(A.$xRandomness=re.$xRandomness,A.$xSleep=re.$xSleep,re.dispose()),!A.$xRandomness&&!we.xRandomness&&(we.xRandomness=function(b,O,j){let se=q.heap8u(),ee=0;for(;ee<O;++ee)se[j+ee]=Math.random()*255e3&255;return ee}),!A.$xSleep&&!we.xSleep&&(we.xSleep=(b,O)=>0),t.vfs.installVfs({vfs:{struct:A,methods:we}}),A};class Ee{vfsDir;#e;#o;#a;#n=new Map;#t=new Map;#s=new Set;#l=new Map;#r=new Uint8Array(ie);#c;#i;#u;constructor(A=Object.create(null)){this.#u=A.verbosity??K.verbosity,this.vfsName=A.name||K.name,this.#i=he(this.vfsName),a(this.#i.pointer,this),this.vfsDir=A.directory||"."+this.vfsName,this.#c=new DataView(this.#r.buffer,this.#r.byteOffset),this.isReady=this.reset(!!(A.clearOnInit??K.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(A.initialCapacity||K.initialCapacity)})}#_(A,...W){this.#u>A&&d[A](this.vfsName+":",...W)}log(...A){this.#_(2,...A)}warn(...A){this.#_(1,...A)}error(...A){this.#_(0,...A)}getVfs(){return this.#i}getCapacity(){return this.#n.size}getFileCount(){return this.#t.size}getFileNames(){let A=[];for(let W of this.#t.keys())A.push(W);return A}async addCapacity(A){for(let W=0;W<A;++W){let re=V(),O=await(await this.#o.getFileHandle(re,{create:!0})).createSyncAccessHandle();this.#n.set(O,re),this.setAssociatedPath(O,"",0)}return this.getCapacity()}async reduceCapacity(A){let W=0;for(let re of Array.from(this.#s)){if(W===A||this.getFileCount()===this.getCapacity())break;let b=this.#n.get(re);re.close(),await this.#o.removeEntry(b),this.#n.delete(re),this.#s.delete(re),++W}return W}releaseAccessHandles(){for(let A of this.#n.keys())A.close();this.#n.clear(),this.#t.clear(),this.#s.clear()}async acquireAccessHandles(A=!1){let W=[];for await(let[re,b]of this.#o)b.kind==="file"&&W.push([re,b]);return Promise.all(W.map(async([re,b])=>{try{let O=await b.createSyncAccessHandle();if(this.#n.set(O,re),A)O.truncate(M),this.setAssociatedPath(O,"",0);else{let j=this.getAssociatedPath(O);j?this.#t.set(j,O):this.#s.add(O)}}catch(O){throw this.storeErr(O),this.releaseAccessHandles(),O}}))}getAssociatedPath(A){A.read(this.#r,{at:0});let W=this.#c.getUint32(L);if(this.#r[0]&&(W&i.SQLITE_OPEN_DELETEONCLOSE||!(W&I)))return k(`Removing file with unexpected flags ${W.toString(16)}`,this.#r),this.setAssociatedPath(A,"",0),"";let re=new Uint32Array(Y/4);A.read(re,{at:C});let b=this.computeDigest(this.#r,W);if(re.every((O,j)=>O===b[j])){let O=this.#r.findIndex(j=>j===0);return O===0&&A.truncate(M),O?$.decode(this.#r.subarray(0,O)):""}else return k("Disassociating file with bad digest."),this.setAssociatedPath(A,"",0),""}setAssociatedPath(A,W,re){let b=E.encodeInto(W,this.#r);H<=b.written+1&&n("Path too long:",W),W&&re&&(re|=w),this.#r.fill(0,b.written,H),this.#c.setUint32(L,re);let O=this.computeDigest(this.#r,re);A.write(this.#r,{at:0}),A.write(O,{at:C}),A.flush(),W?(this.#t.set(W,A),this.#s.delete(A)):(A.truncate(M),this.#s.add(A))}computeDigest(A,W){if(W&w){let re=3735928559,b=1103547991;for(let O of A)re=Math.imul(re^O,2654435761),b=Math.imul(b^O,104729);return new Uint32Array([re>>>0,b>>>0])}else return new Uint32Array([0,0])}async reset(A){await this.isReady;let W=await navigator.storage.getDirectory(),re,b;for(let O of this.vfsDir.split("/"))O&&(re=W,W=await W.getDirectoryHandle(O,{create:!0}));return this.#e=W,this.#a=re,this.#o=await this.#e.getDirectoryHandle(U,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(A)}getPath(A){return q.isPtr(A)&&(A=q.cstrToJs(A)),(A instanceof URL?A:new URL(A,"file://localhost/")).pathname}deletePath(A){let W=this.#t.get(A);return W&&(this.#t.delete(A),this.setAssociatedPath(W,"",0)),!!W}storeErr(A,W){return A&&(A.sqlite3Rc=W||i.SQLITE_IOERR,this.error(A)),this.$error=A,W}popErr(){let A=this.$error;return this.$error=void 0,A}nextAvailableSAH(){let[A]=this.#s.keys();return A}getOFileForS3File(A){return this.#l.get(A)}mapS3FileToOFile(A,W){W?(this.#l.set(A,W),x(A,this)):(this.#l.delete(A),x(A,!1))}hasFilename(A){return this.#t.has(A)}getSAHForPath(A){return this.#t.get(A)}async removeVfs(){if(!this.#i.pointer||!this.#o)return!1;i.sqlite3_vfs_unregister(this.#i.pointer),this.#i.dispose(),delete s[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(U,{recursive:!0}),this.#o=void 0,await this.#a.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#a=void 0}catch(A){t.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",A)}return!0}pauseVfs(){return this.#l.size>0&&t.SQLite3Error.toss(i.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),this.#n.size>0&&(i.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return this.#n.size===0}async unpauseVfs(){return this.#n.size===0?this.acquireAccessHandles(!1).then(()=>i.sqlite3_vfs_register(this.#i,0),this):this}exportFile(A){let W=this.#t.get(A)||n("File not found:",A),re=W.getSize()-M,b=new Uint8Array(re>0?re:0);if(re>0){let O=W.read(b,{at:M});O!=re&&n("Expected to read "+re+" bytes but read "+O+".")}return b}async importDbChunked(A,W){let re=this.#t.get(A)||this.nextAvailableSAH()||n("No available handles to import to.");re.truncate(0);let b=0,O,j=!1,se=!1;try{for(;(O=await W())!==void 0;)O instanceof ArrayBuffer&&(O=new Uint8Array(O)),b===0&&O.byteLength>=15&&(g.affirmDbHeader(O),j=!0),re.write(O,{at:M+b}),b+=O.byteLength;if((b<512||b%512!==0)&&n("Input size",b,"is not correct for an SQLite database."),!j){let ee=new Uint8Array(20);re.read(ee,{at:0}),g.affirmDbHeader(ee)}re.write(new Uint8Array([1,1]),{at:M+18})}catch(ee){throw this.setAssociatedPath(re,"",0),ee}return this.setAssociatedPath(re,A,i.SQLITE_OPEN_MAIN_DB),b}importDb(A,W){if(W instanceof ArrayBuffer)W=new Uint8Array(W);else if(W instanceof Function)return this.importDbChunked(A,W);let re=this.#t.get(A)||this.nextAvailableSAH()||n("No available handles to import to."),b=W.byteLength;(b<512||b%512!=0)&&n("Byte array size is invalid for an SQLite db.");let O="SQLite format 3";for(let se=0;se<O.length;++se)O.charCodeAt(se)!==W[se]&&n("Input does not contain an SQLite database header.");let j=re.write(W,{at:M});return j!=b?(this.setAssociatedPath(re,"",0),n("Expected to write "+b+" bytes but wrote "+j+".")):(re.write(new Uint8Array([1,1]),{at:M+18}),this.setAssociatedPath(re,A,i.SQLITE_OPEN_MAIN_DB)),j}}class Te{#e;constructor(A){this.#e=A,this.vfsName=A.vfsName}async addCapacity(A){return this.#e.addCapacity(A)}async reduceCapacity(A){return this.#e.reduceCapacity(A)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(A){let W=this.#e.getCapacity();return W<A?this.#e.addCapacity(A-W):W}exportFile(A){return this.#e.exportFile(A)}importDb(A,W){return this.#e.importDb(A,W)}async wipeFiles(){return this.#e.reset(!0)}unlink(A){return this.#e.deletePath(A)}async removeVfs(){return this.#e.removeVfs()}pauseVfs(){return this.#e.pauseVfs(),this}async unpauseVfs(){return this.#e.unpauseVfs().then(()=>this)}isPaused(){return this.#e.isPaused()}}let ke=async()=>{let ne=await navigator.storage.getDirectory(),A=".opfs-sahpool-sync-check-"+V(),b=(await(await ne.getFileHandle(A,{create:!0})).createSyncAccessHandle()).close();return await b,await ne.removeEntry(A),b?.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(ne=Object.create(null)){ne=Object.assign(Object.create(null),K,ne||{});let A=ne.name;if(ne.$testThrowPhase1)throw ne.$testThrowPhase1;if(s[A])try{return await s[A]}catch(W){if(ne.forceReinitIfPreviouslyFailed)delete s[A];else throw W}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?s[A]=Promise.reject(new Error("Missing required OPFS APIs.")):s[A]=ke().then(async function(){if(ne.$testThrowPhase2)throw ne.$testThrowPhase2;let W=new Ee(ne);return W.isReady.then(async()=>{let re=new Te(W);if(t.oo1){let b=t.oo1,O=W.getVfs(),j=function(...se){let ee=b.DB.dbCtorHelper.normalizeArgs(...se);ee.vfs=O.$zName,b.DB.dbCtorHelper.call(this,ee)};j.prototype=Object.create(b.DB.prototype),re.OpfsSAHPoolDb=j}return W.log("VFS initialized."),re}).catch(async re=>{throw await W.removeVfs().catch(()=>{}),re})}).catch(W=>s[A]=Promise.reject(W))}}),typeof r<"u"){let t=Object.assign(Object.create(null),{exports:typeof y>"u"?r.asm:y,memory:r.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(o){throw console.error("sqlite3ApiBootstrap() error:",o),o}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}r.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},p=Z,p}})(),Tc=function(){let u=gr;if(!u)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");let l=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(l.debugModule=l.urlParams.has("sqlite3.debugModule")?(...p)=>console.warn("sqlite3.debugModule:",...p):()=>{},l.urlParams.has("sqlite3.dir"))l.sqlite3Dir=l.urlParams.get("sqlite3.dir")+"/";else if(l.moduleScript){let p=l.moduleScript.src.split("/");p.pop(),l.sqlite3Dir=p.join("/")+"/"}if(globalThis.sqlite3InitModule=function p(...r){return u(...r).then(S=>{S.runSQLite3PostLoadInit(S);let P=S.sqlite3;P.scriptInfo=l,p.__isUnderTest&&(P.__isUnderTest=!0);let Z=P.asyncPostInit;return delete P.asyncPostInit,Z()}).catch(S=>{throw console.error("Exception loading sqlite3 module:",S),S})},globalThis.sqlite3InitModule.ready=u.ready,globalThis.sqlite3InitModuleState.moduleScript){let p=globalThis.sqlite3InitModuleState,r=p.moduleScript.src.split("/");r.pop(),p.scriptDir=r.join("/")+"/"}return l.debugModule("sqlite3InitModuleState =",l),globalThis.sqlite3InitModule}();gr=Tc;var Yr=gr;globalThis.sqlite3Worker1Promiser=function u(l=u.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){let _e=l;l=Object.assign(Object.create(null),u.defaultConfig),l.onready=_e}else l=Object.assign(Object.create(null),u.defaultConfig,l);let p=Object.create(null),r=function(){},S=l.onerror||r,P=l.debug||r,Z=l.generateMessageId?void 0:Object.create(null),be=l.generateMessageId||function(_e){return _e.type+"#"+(Z[_e.type]=(Z[_e.type]||0)+1)},qe=(..._e)=>{throw new Error(_e.join(" "))};l.worker||(l.worker=u.defaultConfig.worker),typeof l.worker=="function"&&(l.worker=l.worker());let Le,Ue;return l.worker.onmessage=function(_e){_e=_e.data,P("worker1.onmessage",_e);let Se=p[_e.messageId];if(!Se){if(_e&&_e.type==="sqlite3-api"&&_e.result==="worker1-ready"){l.onready&&l.onready(Ue);return}if(Se=p[_e.type],Se&&Se.onrow){Se.onrow(_e);return}l.onunhandled?l.onunhandled(arguments[0]):S("sqlite3Worker1Promiser() unhandled worker message:",_e);return}switch(delete p[_e.messageId],_e.type){case"error":Se.reject(_e);return;case"open":Le||(Le=_e.dbId);break;case"close":_e.dbId===Le&&(Le=void 0);break;default:break}try{Se.resolve(_e)}catch(Oe){Se.reject(Oe)}},Ue=function(){let _e;arguments.length===1?_e=arguments[0]:arguments.length===2?(_e=Object.create(null),_e.type=arguments[0],_e.args=arguments[1],_e.dbId=_e.args.dbId):qe("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!_e.dbId&&_e.type!=="open"&&(_e.dbId=Le),_e.messageId=be(_e),_e.departureTime=performance.now();let Se=Object.create(null);Se.message=_e;let Oe;_e.type==="exec"&&_e.args&&(typeof _e.args.callback=="function"?(Oe=_e.messageId+":row",Se.onrow=_e.args.callback,_e.args.callback=Oe,p[Oe]=Se):typeof _e.args.callback=="string"&&qe("exec callback may not be a string when using the Promise interface."));let Ve=new Promise(function(st,Ce){Se.resolve=st,Se.reject=Ce,p[_e.messageId]=Se,P("Posting",_e.type,"message to Worker dbId="+(Le||"default")+":",_e),l.worker.postMessage(_e)});return Oe&&(Ve=Ve.finally(()=>delete p[Oe])),Ve}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("sqlite3-worker1-bundler-friendly.mjs",import.meta.url),{type:"module"})},onerror:(...u)=>console.error("worker1 promiser error",...u)};sqlite3Worker1Promiser.v2=function(u){let l;typeof u=="function"?(l=u,u={}):typeof u?.onready=="function"&&(l=u.onready,delete u.onready);let p=Object.create(null);u=Object.assign(u||Object.create(null),{onready:async function(S){try{l&&await l(S),p.resolve(S)}catch(P){p.reject(P)}}});let r=new Promise(function(S,P){p.resolve=S,p.reject=P});try{this.original(u)}catch(S){p.reject(S)}return r}.bind({original:sqlite3Worker1Promiser});var w_=sqlite3Worker1Promiser.v2;var S_=globalThis.sqlite3Worker1Promiser,Zr=Yr;var yr=class{logLevel=2;setLogLevel(l){this.logLevel=l}debug(l,...p){this.logLevel>=4&&console.log(`[${l}]`,...p)}info(l,...p){this.logLevel>=3&&console.log(`[${l}] \u2713`,...p)}warn(l,...p){this.logLevel>=2&&console.warn(`[${l}] \u26A0`,...p)}error(l,...p){this.logLevel>=1&&console.error(`[${l}] \u274C`,...p)}},He=new yr;var br;try{br=new TextDecoder}catch{}var ue,at,T=0;var dn=[],wr=dn,xr=0,ze={},Pe,vt,lt=0,pt=0,tt,yt,it=[],Fe,en={useRecords:!1,mapsAsObjects:!0},Ht=class{},Er=new Ht;Er.name="MessagePack 0xC1";var Et=!1,pn=2,tn,rn,nn;try{new Function("")}catch{pn=1/0}var Ot=class u{constructor(l){l&&(l.useRecords===!1&&l.mapsAsObjects===void 0&&(l.mapsAsObjects=!0),l.sequential&&l.trusted!==!1&&(l.trusted=!0,!l.structures&&l.useRecords!=!1&&(l.structures=[],l.maxSharedStructures||(l.maxSharedStructures=0))),l.structures?l.structures.sharedLength=l.structures.length:l.getStructures&&((l.structures=[]).uninitialized=!0,l.structures.sharedLength=0),l.int64AsNumber&&(l.int64AsType="number")),Object.assign(this,l)}unpack(l,p){if(ue)return qn(()=>(rr(),this?this.unpack(l,p):u.prototype.unpack.call(en,l,p)));!l.buffer&&l.constructor===ArrayBuffer&&(l=typeof Buffer<"u"?Buffer.from(l):new Uint8Array(l)),typeof p=="object"?(at=p.end||l.length,T=p.start||0):(T=0,at=p>-1?p:l.length),xr=0,pt=0,vt=null,wr=dn,tt=null,ue=l;try{Fe=l.dataView||(l.dataView=new DataView(l.buffer,l.byteOffset,l.byteLength))}catch(r){throw ue=null,l instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(l&&typeof l=="object"?l.constructor.name:typeof l))}if(this instanceof u){if(ze=this,this.structures)return Pe=this.structures,tr(p);(!Pe||Pe.length>0)&&(Pe=[])}else ze=en,(!Pe||Pe.length>0)&&(Pe=[]);return tr(p)}unpackMultiple(l,p){let r,S=0;try{Et=!0;let P=l.length,Z=this?this.unpack(l,P):sr.unpack(l,P);if(p){if(p(Z,S,T)===!1)return;for(;T<P;)if(S=T,p(tr(),S,T)===!1)return}else{for(r=[Z];T<P;)S=T,r.push(tr());return r}}catch(P){throw P.lastPosition=S,P.values=r,P}finally{Et=!1,rr()}}_mergeStructures(l,p){rn&&(l=rn.call(this,l)),l=l||[],Object.isFrozen(l)&&(l=l.map(r=>r.slice(0)));for(let r=0,S=l.length;r<S;r++){let P=l[r];P&&(P.isShared=!0,r>=32&&(P.highByte=r-32>>5))}l.sharedLength=l.length;for(let r in p||[])if(r>=0){let S=l[r],P=p[r];P&&(S&&((l.restoreStructures||(l.restoreStructures=[]))[r]=S),l[r]=P)}return this.structures=l}decode(l,p){return this.unpack(l,p)}};function tr(u){try{if(!ze.trusted&&!Et){let p=Pe.sharedLength||0;p<Pe.length&&(Pe.length=p)}let l;if(ze.randomAccessStructure&&ue[T]<64&&ue[T]>=32&&tn?(l=tn(ue,T,at,ze),ue=null,!(u&&u.lazy)&&l&&(l=l.toJSON()),T=at):l=Je(),tt&&(T=tt.postBundlePosition,tt=null),Et&&(Pe.restoreStructures=null),T==at)Pe&&Pe.restoreStructures&&sn(),Pe=null,ue=null,yt&&(yt=null);else{if(T>at)throw new Error("Unexpected end of MessagePack data");if(!Et){let p;try{p=JSON.stringify(l,(r,S)=>typeof S=="bigint"?`${S}n`:S).slice(0,100)}catch(r){p="(JSON view not available "+r+")"}throw new Error("Data read, but end of buffer not reached "+p)}}return l}catch(l){throw Pe&&Pe.restoreStructures&&sn(),rr(),(l instanceof RangeError||l.message.startsWith("Unexpected end of buffer")||T>at)&&(l.incomplete=!0),l}}function sn(){for(let u in Pe.restoreStructures)Pe[u]=Pe.restoreStructures[u];Pe.restoreStructures=null}function Je(){let u=ue[T++];if(u<160)if(u<128){if(u<64)return u;{let l=Pe[u&63]||ze.getStructures&&hn()[u&63];return l?(l.read||(l.read=Sr(l,u&63)),l.read()):u}}else if(u<144)if(u-=128,ze.mapsAsObjects){let l={};for(let p=0;p<u;p++){let r=gn();r==="__proto__"&&(r="__proto_"),l[r]=Je()}return l}else{let l=new Map;for(let p=0;p<u;p++)l.set(Je(),Je());return l}else{u-=144;let l=new Array(u);for(let p=0;p<u;p++)l[p]=Je();return ze.freezeData?Object.freeze(l):l}else if(u<192){let l=u-160;if(pt>=T)return vt.slice(T-lt,(T+=l)-lt);if(pt==0&&at<140){let p=l<16?Ar(l):mn(l);if(p!=null)return p}return vr(l)}else{let l;switch(u){case 192:return null;case 193:return tt?(l=Je(),l>0?tt[1].slice(tt.position1,tt.position1+=l):tt[0].slice(tt.position0,tt.position0-=l)):Er;case 194:return!1;case 195:return!0;case 196:if(l=ue[T++],l===void 0)throw new Error("Unexpected end of buffer");return qr(l);case 197:return l=Fe.getUint16(T),T+=2,qr(l);case 198:return l=Fe.getUint32(T),T+=4,qr(l);case 199:return Ft(ue[T++]);case 200:return l=Fe.getUint16(T),T+=2,Ft(l);case 201:return l=Fe.getUint32(T),T+=4,Ft(l);case 202:if(l=Fe.getFloat32(T),ze.useFloat32>2){let p=nr[(ue[T]&127)<<1|ue[T+1]>>7];return T+=4,(p*l+(l>0?.5:-.5)>>0)/p}return T+=4,l;case 203:return l=Fe.getFloat64(T),T+=8,l;case 204:return ue[T++];case 205:return l=Fe.getUint16(T),T+=2,l;case 206:return l=Fe.getUint32(T),T+=4,l;case 207:return ze.int64AsType==="number"?(l=Fe.getUint32(T)*4294967296,l+=Fe.getUint32(T+4)):ze.int64AsType==="string"?l=Fe.getBigUint64(T).toString():ze.int64AsType==="auto"?(l=Fe.getBigUint64(T),l<=BigInt(2)<<BigInt(52)&&(l=Number(l))):l=Fe.getBigUint64(T),T+=8,l;case 208:return Fe.getInt8(T++);case 209:return l=Fe.getInt16(T),T+=2,l;case 210:return l=Fe.getInt32(T),T+=4,l;case 211:return ze.int64AsType==="number"?(l=Fe.getInt32(T)*4294967296,l+=Fe.getUint32(T+4)):ze.int64AsType==="string"?l=Fe.getBigInt64(T).toString():ze.int64AsType==="auto"?(l=Fe.getBigInt64(T),l>=BigInt(-2)<<BigInt(52)&&l<=BigInt(2)<<BigInt(52)&&(l=Number(l))):l=Fe.getBigInt64(T),T+=8,l;case 212:if(l=ue[T++],l==114)return un(ue[T++]&63);{let p=it[l];if(p)return p.read?(T++,p.read(Je())):p.noBuffer?(T++,p()):p(ue.subarray(T,++T));throw new Error("Unknown extension "+l)}case 213:return l=ue[T],l==114?(T++,un(ue[T++]&63,ue[T++])):Ft(2);case 214:return Ft(4);case 215:return Ft(8);case 216:return Ft(16);case 217:return l=ue[T++],pt>=T?vt.slice(T-lt,(T+=l)-lt):Oc(l);case 218:return l=Fe.getUint16(T),T+=2,pt>=T?vt.slice(T-lt,(T+=l)-lt):Pc(l);case 219:return l=Fe.getUint32(T),T+=4,pt>=T?vt.slice(T-lt,(T+=l)-lt):Lc(l);case 220:return l=Fe.getUint16(T),T+=2,ln(l);case 221:return l=Fe.getUint32(T),T+=4,ln(l);case 222:return l=Fe.getUint16(T),T+=2,an(l);case 223:return l=Fe.getUint32(T),T+=4,an(l);default:if(u>=224)return u-256;if(u===void 0){let p=new Error("Unexpected end of MessagePack data");throw p.incomplete=!0,p}throw new Error("Unknown MessagePack token "+u)}}}var Fc=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Sr(u,l){function p(){if(p.count++>pn){let S=u.read=new Function("r","return function(){return "+(ze.freezeData?"Object.freeze":"")+"({"+u.map(P=>P==="__proto__"?"__proto_:r()":Fc.test(P)?P+":r()":"["+JSON.stringify(P)+"]:r()").join(",")+"})}")(Je);return u.highByte===0&&(u.read=on(l,u.read)),S()}let r={};for(let S=0,P=u.length;S<P;S++){let Z=u[S];Z==="__proto__"&&(Z="__proto_"),r[Z]=Je()}return ze.freezeData?Object.freeze(r):r}return p.count=0,u.highByte===0?on(l,p):p}var on=(u,l)=>function(){let p=ue[T++];if(p===0)return l();let r=u<32?-(u+(p<<5)):u+(p<<5),S=Pe[r]||hn()[r];if(!S)throw new Error("Record id is not defined for "+r);return S.read||(S.read=Sr(S,u)),S.read()};function hn(){let u=qn(()=>(ue=null,ze.getStructures()));return Pe=ze._mergeStructures(u,Pe)}var vr=$t,Oc=$t,Pc=$t,Lc=$t;function $t(u){let l;if(u<16&&(l=Ar(u)))return l;if(u>64&&br)return br.decode(ue.subarray(T,T+=u));let p=T+u,r=[];for(l="";T<p;){let S=ue[T++];if(!(S&128))r.push(S);else if((S&224)===192){let P=ue[T++]&63;r.push((S&31)<<6|P)}else if((S&240)===224){let P=ue[T++]&63,Z=ue[T++]&63;r.push((S&31)<<12|P<<6|Z)}else if((S&248)===240){let P=ue[T++]&63,Z=ue[T++]&63,be=ue[T++]&63,qe=(S&7)<<18|P<<12|Z<<6|be;qe>65535&&(qe-=65536,r.push(qe>>>10&1023|55296),qe=56320|qe&1023),r.push(qe)}else r.push(S);r.length>=4096&&(l+=et.apply(String,r),r.length=0)}return r.length>0&&(l+=et.apply(String,r)),l}function ln(u){let l=new Array(u);for(let p=0;p<u;p++)l[p]=Je();return ze.freezeData?Object.freeze(l):l}function an(u){if(ze.mapsAsObjects){let l={};for(let p=0;p<u;p++){let r=gn();r==="__proto__"&&(r="__proto_"),l[r]=Je()}return l}else{let l=new Map;for(let p=0;p<u;p++)l.set(Je(),Je());return l}}var et=String.fromCharCode;function mn(u){let l=T,p=new Array(u);for(let r=0;r<u;r++){let S=ue[T++];if((S&128)>0){T=l;return}p[r]=S}return et.apply(String,p)}function Ar(u){if(u<4)if(u<2){if(u===0)return"";{let l=ue[T++];if((l&128)>1){T-=1;return}return et(l)}}else{let l=ue[T++],p=ue[T++];if((l&128)>0||(p&128)>0){T-=2;return}if(u<3)return et(l,p);let r=ue[T++];if((r&128)>0){T-=3;return}return et(l,p,r)}else{let l=ue[T++],p=ue[T++],r=ue[T++],S=ue[T++];if((l&128)>0||(p&128)>0||(r&128)>0||(S&128)>0){T-=4;return}if(u<6){if(u===4)return et(l,p,r,S);{let P=ue[T++];if((P&128)>0){T-=5;return}return et(l,p,r,S,P)}}else if(u<8){let P=ue[T++],Z=ue[T++];if((P&128)>0||(Z&128)>0){T-=6;return}if(u<7)return et(l,p,r,S,P,Z);let be=ue[T++];if((be&128)>0){T-=7;return}return et(l,p,r,S,P,Z,be)}else{let P=ue[T++],Z=ue[T++],be=ue[T++],qe=ue[T++];if((P&128)>0||(Z&128)>0||(be&128)>0||(qe&128)>0){T-=8;return}if(u<10){if(u===8)return et(l,p,r,S,P,Z,be,qe);{let Le=ue[T++];if((Le&128)>0){T-=9;return}return et(l,p,r,S,P,Z,be,qe,Le)}}else if(u<12){let Le=ue[T++],Ue=ue[T++];if((Le&128)>0||(Ue&128)>0){T-=10;return}if(u<11)return et(l,p,r,S,P,Z,be,qe,Le,Ue);let _e=ue[T++];if((_e&128)>0){T-=11;return}return et(l,p,r,S,P,Z,be,qe,Le,Ue,_e)}else{let Le=ue[T++],Ue=ue[T++],_e=ue[T++],Se=ue[T++];if((Le&128)>0||(Ue&128)>0||(_e&128)>0||(Se&128)>0){T-=12;return}if(u<14){if(u===12)return et(l,p,r,S,P,Z,be,qe,Le,Ue,_e,Se);{let Oe=ue[T++];if((Oe&128)>0){T-=13;return}return et(l,p,r,S,P,Z,be,qe,Le,Ue,_e,Se,Oe)}}else{let Oe=ue[T++],Ve=ue[T++];if((Oe&128)>0||(Ve&128)>0){T-=14;return}if(u<15)return et(l,p,r,S,P,Z,be,qe,Le,Ue,_e,Se,Oe,Ve);let st=ue[T++];if((st&128)>0){T-=15;return}return et(l,p,r,S,P,Z,be,qe,Le,Ue,_e,Se,Oe,Ve,st)}}}}}function cn(){let u=ue[T++],l;if(u<192)l=u-160;else switch(u){case 217:l=ue[T++];break;case 218:l=Fe.getUint16(T),T+=2;break;case 219:l=Fe.getUint32(T),T+=4;break;default:throw new Error("Expected string")}return $t(l)}function qr(u){return ze.copyBuffers?Uint8Array.prototype.slice.call(ue,T,T+=u):ue.subarray(T,T+=u)}function Ft(u){let l=ue[T++];if(it[l]){let p;return it[l](ue.subarray(T,p=T+=u),r=>{T=r;try{return Je()}finally{T=p}})}else throw new Error("Unknown extension type "+l)}var _n=new Array(4096);function gn(){let u=ue[T++];if(u>=160&&u<192){if(u=u-160,pt>=T)return vt.slice(T-lt,(T+=u)-lt);if(!(pt==0&&at<180))return vr(u)}else return T--,yn(Je());let l=(u<<5^(u>1?Fe.getUint16(T):u>0?ue[T]:0))&4095,p=_n[l],r=T,S=T+u-3,P,Z=0;if(p&&p.bytes==u){for(;r<S;){if(P=Fe.getUint32(r),P!=p[Z++]){r=1879048192;break}r+=4}for(S+=3;r<S;)if(P=ue[r++],P!=p[Z++]){r=1879048192;break}if(r===S)return T=r,p.string;S-=3,r=T}for(p=[],_n[l]=p,p.bytes=u;r<S;)P=Fe.getUint32(r),p.push(P),r+=4;for(S+=3;r<S;)P=ue[r++],p.push(P);let be=u<16?Ar(u):mn(u);return be!=null?p.string=be:p.string=vr(u)}function yn(u){if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean"||typeof u=="bigint")return u.toString();if(u==null)return u+"";if(ze.allowArraysInMapKeys&&Array.isArray(u)&&u.flat().every(l=>["string","number","boolean","bigint"].includes(typeof l)))return u.flat().toString();throw new Error(`Invalid property type for record: ${typeof u}`)}var un=(u,l)=>{let p=Je().map(yn),r=u;l!==void 0&&(u=u<32?-((l<<5)+u):(l<<5)+u,p.highByte=l);let S=Pe[u];return S&&(S.isShared||Et)&&((Pe.restoreStructures||(Pe.restoreStructures=[]))[u]=S),Pe[u]=p,p.read=Sr(p,r),p.read()};it[0]=()=>{};it[0].noBuffer=!0;it[66]=u=>{let l=u.byteLength%8||8,p=BigInt(u[0]&128?u[0]-256:u[0]);for(let r=1;r<l;r++)p<<=BigInt(8),p+=BigInt(u[r]);if(u.byteLength!==l){let r=new DataView(u.buffer,u.byteOffset,u.byteLength),S=(P,Z)=>{let be=Z-P;if(be<=40){let _e=r.getBigUint64(P);for(let Se=P+8;Se<Z;Se+=8)_e<<=64n,_e|=r.getBigUint64(Se);return _e}let qe=P+(be>>4<<3),Le=S(P,qe),Ue=S(qe,Z);return Le<<BigInt((Z-qe)*8)|Ue};p=p<<BigInt((r.byteLength-l)*8)|S(l,r.byteLength)}return p};var fn={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};it[101]=()=>{let u=Je();if(!fn[u[0]]){let l=Error(u[1],{cause:u[2]});return l.name=u[0],l}return fn[u[0]](u[1],{cause:u[2]})};it[105]=u=>{if(ze.structuredClone===!1)throw new Error("Structured clone extension is disabled");let l=Fe.getUint32(T-4);yt||(yt=new Map);let p=ue[T],r;p>=144&&p<160||p==220||p==221?r=[]:p>=128&&p<144||p==222||p==223?r=new Map:(p>=199&&p<=201||p>=212&&p<=216)&&ue[T+1]===115?r=new Set:r={};let S={target:r};yt.set(l,S);let P=Je();if(S.used)Object.assign(r,P);else return S.target=P;if(r instanceof Map)for(let[Z,be]of P.entries())r.set(Z,be);if(r instanceof Set)for(let Z of Array.from(P))r.add(Z);return r};it[112]=u=>{if(ze.structuredClone===!1)throw new Error("Structured clone extension is disabled");let l=Fe.getUint32(T-4),p=yt.get(l);return p.used=!0,p.target};it[115]=()=>new Set(Je());var Ir=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(u=>u+"Array"),Cc=typeof globalThis=="object"?globalThis:window;it[116]=u=>{let l=u[0],p=Uint8Array.prototype.slice.call(u,1).buffer,r=Ir[l];if(!r){if(l===16)return p;if(l===17)return new DataView(p);throw new Error("Could not find typed array for code "+l)}return new Cc[r](p)};it[120]=()=>{let u=Je();return new RegExp(u[0],u[1])};var Rc=[];it[98]=u=>{let l=(u[0]<<24)+(u[1]<<16)+(u[2]<<8)+u[3],p=T;return T+=l-u.length,tt=Rc,tt=[cn(),cn()],tt.position0=0,tt.position1=0,tt.postBundlePosition=T,T=p,Je()};it[255]=u=>u.length==4?new Date((u[0]*16777216+(u[1]<<16)+(u[2]<<8)+u[3])*1e3):u.length==8?new Date(((u[0]<<22)+(u[1]<<14)+(u[2]<<6)+(u[3]>>2))/1e6+((u[3]&3)*4294967296+u[4]*16777216+(u[5]<<16)+(u[6]<<8)+u[7])*1e3):u.length==12?new Date(((u[0]<<24)+(u[1]<<16)+(u[2]<<8)+u[3])/1e6+((u[4]&128?-281474976710656:0)+u[6]*1099511627776+u[7]*4294967296+u[8]*16777216+(u[9]<<16)+(u[10]<<8)+u[11])*1e3):new Date("invalid");function qn(u){nn&&nn();let l=at,p=T,r=xr,S=lt,P=pt,Z=vt,be=wr,qe=yt,Le=tt,Ue=new Uint8Array(ue.slice(0,at)),_e=Pe,Se=Pe.slice(0,Pe.length),Oe=ze,Ve=Et,st=u();return at=l,T=p,xr=r,lt=S,pt=P,vt=Z,wr=be,yt=qe,tt=Le,ue=Ue,Et=Ve,Pe=_e,Pe.splice(0,Pe.length,...Se),ze=Oe,Fe=new DataView(ue.buffer,ue.byteOffset,ue.byteLength),st}function rr(){ue=null,yt=null,Pe=null}var nr=new Array(147);for(let u=0;u<256;u++)nr[u]=+("1e"+Math.floor(45.15-u*.30103));var sr=new Ot({useRecords:!1}),Dc=sr.unpack,Nc=sr.unpackMultiple,Mc=sr.unpack,ir={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},Uc=new Float32Array(1),k_=new Uint8Array(Uc.buffer,0,4);var lr;try{lr=new TextEncoder}catch{}var Fr,vn,Ut=typeof Buffer<"u",or=Ut?function(u){return Buffer.allocUnsafeSlow(u)}:Uint8Array,En=Ut?Buffer:Uint8Array,bn=Ut?4294967296:2144337920,D,Gt,We,F=0,rt,Ge=null,Bc,jc=21760,zc=/[\u0080-\uFFFF]/,Mt=Symbol("record-id"),Kt=class extends Ot{constructor(l){super(l),this.offset=0;let p,r,S,P,Z,be=En.prototype.utf8Write?function(N,fe){return D.utf8Write(N,fe,D.byteLength-fe)}:lr&&lr.encodeInto?function(N,fe){return lr.encodeInto(N,D.subarray(fe)).written}:!1,qe=this;l||(l={});let Le=l&&l.sequential,Ue=l.structures||l.saveStructures,_e=l.maxSharedStructures;if(_e==null&&(_e=Ue?32:0),_e>8160)throw new Error("Maximum maxSharedStructure is 8160");l.structuredClone&&l.moreTypes==null&&(this.moreTypes=!0);let Se=l.maxOwnStructures;Se==null&&(Se=Ue?32:64),!this.structures&&l.useRecords!=!1&&(this.structures=[]);let Oe=_e>32||Se+_e>64,Ve=_e+64,st=_e+Se+64;if(st>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let Ce=[],Ye=0,bt=0;this.pack=this.encode=function(N,fe){if(D||(D=new or(8192),We=D.dataView||(D.dataView=new DataView(D.buffer,0,8192)),F=0),rt=D.length-10,rt-F<2048?(D=new or(D.length),We=D.dataView||(D.dataView=new DataView(D.buffer,0,D.length)),rt=D.length-10,F=0):F=F+7&2147483640,r=F,fe&kn&&(F+=fe&255),Z=qe.structuredClone?new Map:null,qe.bundleStrings&&typeof N!="string"?(Ge=[],Ge.size=1/0):Ge=null,P=qe.structures,P){P.uninitialized&&(P=qe._mergeStructures(qe.getStructures()));let X=P.sharedLength||0;if(X>_e)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+P.sharedLength);if(!P.transitions){P.transitions=Object.create(null);for(let oe=0;oe<X;oe++){let me=P[oe];if(!me)continue;let xe,ye=P.transitions;for(let De=0,Ne=me.length;De<Ne;De++){let ot=me[De];xe=ye[ot],xe||(xe=ye[ot]=Object.create(null)),ye=xe}ye[Mt]=oe+64}this.lastNamedStructuresLength=X}Le||(P.nextId=X+64)}S&&(S=!1);let G;try{qe.randomAccessStructure&&N&&N.constructor&&N.constructor===Object?wt(N):Re(N);let X=Ge;if(Ge&&xn(r,Re,0),Z&&Z.idsToInsert){let oe=Z.idsToInsert.sort((De,Ne)=>De.offset>Ne.offset?1:-1),me=oe.length,xe=-1;for(;X&&me>0;){let De=oe[--me].offset+r;De<X.stringsPosition+r&&xe===-1&&(xe=0),De>X.position+r?xe>=0&&(xe+=6):(xe>=0&&(We.setUint32(X.position+r,We.getUint32(X.position+r)+xe),xe=-1),X=X.previous,me++)}xe>=0&&X&&We.setUint32(X.position+r,We.getUint32(X.position+r)+xe),F+=oe.length*6,F>rt&&ft(F),qe.offset=F;let ye=Wc(D.subarray(r,F),oe);return Z=null,ye}return qe.offset=F,fe&An?(D.start=r,D.end=F,D):D.subarray(r,F)}catch(X){throw G=X,X}finally{if(P&&(At(),S&&qe.saveStructures)){let X=P.sharedLength||0,oe=D.subarray(r,F),me=Qc(P,qe);if(!G)return qe.saveStructures(me,me.isCompatible)===!1?qe.pack(N,fe):(qe.lastNamedStructuresLength=X,D.length>1073741824&&(D=null),oe)}D.length>1073741824&&(D=null),fe&In&&(F=r)}};let At=()=>{bt<10&&bt++;let N=P.sharedLength||0;if(P.length>N&&!Le&&(P.length=N),Ye>1e4)P.transitions=null,bt=0,Ye=0,Ce.length>0&&(Ce=[]);else if(Ce.length>0&&!Le){for(let fe=0,G=Ce.length;fe<G;fe++)Ce[fe][Mt]=0;Ce=[]}},It=N=>{var fe=N.length;fe<16?D[F++]=144|fe:fe<65536?(D[F++]=220,D[F++]=fe>>8,D[F++]=fe&255):(D[F++]=221,We.setUint32(F,fe),F+=4);for(let G=0;G<fe;G++)Re(N[G])},Re=N=>{F>rt&&(D=ft(F));var fe=typeof N,G;if(fe==="string"){let X=N.length;if(Ge&&X>=4&&X<4096){if((Ge.size+=X)>jc){let ye,De=(Ge[0]?Ge[0].length*3+Ge[1].length:0)+10;F+De>rt&&(D=ft(F+De));let Ne;Ge.position?(Ne=Ge,D[F]=200,F+=3,D[F++]=98,ye=F-r,F+=4,xn(r,Re,0),We.setUint16(ye+r-3,F-r-ye)):(D[F++]=214,D[F++]=98,ye=F-r,F+=4),Ge=["",""],Ge.previous=Ne,Ge.size=0,Ge.position=ye}let xe=zc.test(N);Ge[xe?0:1]+=N,D[F++]=193,Re(xe?-X:X);return}let oe;X<32?oe=1:X<256?oe=2:X<65536?oe=3:oe=5;let me=X*3;if(F+me>rt&&(D=ft(F+me)),X<64||!be){let xe,ye,De,Ne=F+oe;for(xe=0;xe<X;xe++)ye=N.charCodeAt(xe),ye<128?D[Ne++]=ye:ye<2048?(D[Ne++]=ye>>6|192,D[Ne++]=ye&63|128):(ye&64512)===55296&&((De=N.charCodeAt(xe+1))&64512)===56320?(ye=65536+((ye&1023)<<10)+(De&1023),xe++,D[Ne++]=ye>>18|240,D[Ne++]=ye>>12&63|128,D[Ne++]=ye>>6&63|128,D[Ne++]=ye&63|128):(D[Ne++]=ye>>12|224,D[Ne++]=ye>>6&63|128,D[Ne++]=ye&63|128);G=Ne-F-oe}else G=be(N,F+oe);G<32?D[F++]=160|G:G<256?(oe<2&&D.copyWithin(F+2,F+1,F+1+G),D[F++]=217,D[F++]=G):G<65536?(oe<3&&D.copyWithin(F+3,F+2,F+2+G),D[F++]=218,D[F++]=G>>8,D[F++]=G&255):(oe<5&&D.copyWithin(F+5,F+3,F+3+G),D[F++]=219,We.setUint32(F,G),F+=4),F+=G}else if(fe==="number")if(N>>>0===N)N<32||N<128&&this.useRecords===!1||N<64&&!this.randomAccessStructure?D[F++]=N:N<256?(D[F++]=204,D[F++]=N):N<65536?(D[F++]=205,D[F++]=N>>8,D[F++]=N&255):(D[F++]=206,We.setUint32(F,N),F+=4);else if(N>>0===N)N>=-32?D[F++]=256+N:N>=-128?(D[F++]=208,D[F++]=N+256):N>=-32768?(D[F++]=209,We.setInt16(F,N),F+=2):(D[F++]=210,We.setInt32(F,N),F+=4);else{let X;if((X=this.useFloat32)>0&&N<4294967296&&N>=-2147483648){D[F++]=202,We.setFloat32(F,N);let oe;if(X<4||(oe=N*nr[(D[F]&127)<<1|D[F+1]>>7])>>0===oe){F+=4;return}else F--}D[F++]=203,We.setFloat64(F,N),F+=8}else if(fe==="object"||fe==="function")if(!N)D[F++]=192;else{if(Z){let oe=Z.get(N);if(oe){if(!oe.id){let me=Z.idsToInsert||(Z.idsToInsert=[]);oe.id=me.push(oe)}D[F++]=214,D[F++]=112,We.setUint32(F,oe.id),F+=4;return}else Z.set(N,{offset:F-r})}let X=N.constructor;if(X===Object)zt(N);else if(X===Array)It(N);else if(X===Map)if(this.mapAsEmptyObject)D[F++]=128;else{G=N.size,G<16?D[F++]=128|G:G<65536?(D[F++]=222,D[F++]=G>>8,D[F++]=G&255):(D[F++]=223,We.setUint32(F,G),F+=4);for(let[oe,me]of N)Re(oe),Re(me)}else{for(let oe=0,me=Fr.length;oe<me;oe++){let xe=vn[oe];if(N instanceof xe){let ye=Fr[oe];if(ye.write){ye.type&&(D[F++]=212,D[F++]=ye.type,D[F++]=0);let Pt=ye.write.call(this,N);Pt===N?Array.isArray(N)?It(N):zt(N):Re(Pt);return}let De=D,Ne=We,ot=F;D=null;let _t;try{_t=ye.pack.call(this,N,Pt=>(D=De,De=null,F+=Pt,F>rt&&ft(F),{target:D,targetView:We,position:F-Pt}),Re)}finally{De&&(D=De,We=Ne,F=ot,rt=D.length-10)}_t&&(_t.length+F>rt&&ft(_t.length+F),F=wn(_t,D,F,ye.type));return}}if(Array.isArray(N))It(N);else{if(N.toJSON){let oe=N.toJSON();if(oe!==N)return Re(oe)}if(fe==="function")return Re(this.writeFunction&&this.writeFunction(N));zt(N)}}}else if(fe==="boolean")D[F++]=N?195:194;else if(fe==="bigint"){if(N<9223372036854776e3&&N>=-9223372036854776e3)D[F++]=211,We.setBigInt64(F,N);else if(N<18446744073709552e3&&N>0)D[F++]=207,We.setBigUint64(F,N);else if(this.largeBigIntToFloat)D[F++]=203,We.setFloat64(F,Number(N));else{if(this.largeBigIntToString)return Re(N.toString());if(this.useBigIntExtension||this.moreTypes){let X=N<0?BigInt(-1):BigInt(0),oe;if(N>>BigInt(65536)===X){let me=BigInt(18446744073709552e3)-BigInt(1),xe=[];for(;xe.push(N&me),N>>BigInt(63)!==X;)N>>=BigInt(64);oe=new Uint8Array(new BigUint64Array(xe).buffer),oe.reverse()}else{let me=N<0,xe=(me?~N:N).toString(16);if(xe.length%2?xe="0"+xe:parseInt(xe.charAt(0),16)>=8&&(xe="00"+xe),Ut)oe=Buffer.from(xe,"hex");else{oe=new Uint8Array(xe.length/2);for(let ye=0;ye<oe.length;ye++)oe[ye]=parseInt(xe.slice(ye*2,ye*2+2),16)}if(me)for(let ye=0;ye<oe.length;ye++)oe[ye]=~oe[ye]}oe.length+F>rt&&ft(oe.length+F),F=wn(oe,D,F,66);return}else throw new RangeError(N+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}F+=8}else if(fe==="undefined")this.encodeUndefinedAsNil?D[F++]=192:(D[F++]=212,D[F++]=0,D[F++]=0);else throw new Error("Unknown type: "+fe)},kt=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?N=>{let fe;if(this.skipValues){fe=[];for(let oe in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(oe))&&!this.skipValues.includes(N[oe])&&fe.push(oe)}else fe=Object.keys(N);let G=fe.length;G<16?D[F++]=128|G:G<65536?(D[F++]=222,D[F++]=G>>8,D[F++]=G&255):(D[F++]=223,We.setUint32(F,G),F+=4);let X;if(this.coercibleKeyAsNumber)for(let oe=0;oe<G;oe++){X=fe[oe];let me=Number(X);Re(isNaN(me)?X:me),Re(N[X])}else for(let oe=0;oe<G;oe++)Re(X=fe[oe]),Re(N[X])}:N=>{D[F++]=222;let fe=F-r;F+=2;let G=0;for(let X in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(X))&&(Re(X),Re(N[X]),G++);if(G>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');D[fe+++r]=G>>8,D[fe+r]=G&255},ut=this.useRecords===!1?kt:l.progressiveRecords&&!Oe?N=>{let fe,G=P.transitions||(P.transitions=Object.create(null)),X=F++-r,oe;for(let me in N)if(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(me)){if(fe=G[me],fe)G=fe;else{let xe=Object.keys(N),ye=G;G=P.transitions;let De=0;for(let Ne=0,ot=xe.length;Ne<ot;Ne++){let _t=xe[Ne];fe=G[_t],fe||(fe=G[_t]=Object.create(null),De++),G=fe}X+r+1==F?(F--,Jt(G,xe,De)):Ke(G,xe,X,De),oe=!0,G=ye[me]}Re(N[me])}if(!oe){let me=G[Mt];me?D[X+r]=me:Ke(G,Object.keys(N),X,0)}}:N=>{let fe,G=P.transitions||(P.transitions=Object.create(null)),X=0;for(let me in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(me))&&(fe=G[me],fe||(fe=G[me]=Object.create(null),X++),G=fe);let oe=G[Mt];oe?oe>=96&&Oe?(D[F++]=((oe-=96)&31)+96,D[F++]=oe>>5):D[F++]=oe:Jt(G,G.__keys__||Object.keys(N),X);for(let me in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(me))&&Re(N[me])},jt=typeof this.useRecords=="function"&&this.useRecords,zt=jt?N=>{jt(N)?ut(N):kt(N)}:ut,ft=N=>{let fe;if(N>16777216){if(N-r>bn)throw new Error("Packed buffer would be larger than maximum buffer size");fe=Math.min(bn,Math.round(Math.max((N-r)*(N>67108864?1.25:2),4194304)/4096)*4096)}else fe=(Math.max(N-r<<2,D.length-1)>>12)+1<<12;let G=new or(fe);return We=G.dataView||(G.dataView=new DataView(G.buffer,0,fe)),N=Math.min(N,D.length),D.copy?D.copy(G,0,r,N):G.set(D.slice(r,N)),F-=r,r=0,rt=G.length-10,D=G},Jt=(N,fe,G)=>{let X=P.nextId;X||(X=64),X<Ve&&this.shouldShareStructure&&!this.shouldShareStructure(fe)?(X=P.nextOwnId,X<st||(X=Ve),P.nextOwnId=X+1):(X>=st&&(X=Ve),P.nextId=X+1);let oe=fe.highByte=X>=96&&Oe?X-96>>5:-1;N[Mt]=X,N.__keys__=fe,P[X-64]=fe,X<Ve?(fe.isShared=!0,P.sharedLength=X-63,S=!0,oe>=0?(D[F++]=(X&31)+96,D[F++]=oe):D[F++]=X):(oe>=0?(D[F++]=213,D[F++]=114,D[F++]=(X&31)+96,D[F++]=oe):(D[F++]=212,D[F++]=114,D[F++]=X),G&&(Ye+=bt*G),Ce.length>=Se&&(Ce.shift()[Mt]=0),Ce.push(N),Re(fe))},Ke=(N,fe,G,X)=>{let oe=D,me=F,xe=rt,ye=r;D=Gt,F=0,r=0,D||(Gt=D=new or(8192)),rt=D.length-10,Jt(N,fe,X),Gt=D;let De=F;if(D=oe,F=me,rt=xe,r=ye,De>1){let Ne=F+De-1;Ne>rt&&ft(Ne);let ot=G+r;D.copyWithin(ot+De,ot+1,F),D.set(Gt.slice(0,De),ot),F=Ne}else D[G+r]=Gt[0]},wt=N=>{let fe=Bc(N,D,r,F,P,ft,(G,X,oe)=>{if(oe)return S=!0;F=X;let me=D;return Re(G),At(),me!==D?{position:F,targetView:We,target:D}:F},this);if(fe===0)return zt(N);F=fe}}useBuffer(l){D=l,D.dataView||(D.dataView=new DataView(D.buffer,D.byteOffset,D.byteLength)),We=D.dataView,F=0}set position(l){F=l}get position(){return F}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};vn=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,Ht];Fr=[{pack(u,l,p){let r=u.getTime()/1e3;if((this.useTimestamp32||u.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:S,targetView:P,position:Z}=l(6);S[Z++]=214,S[Z++]=255,P.setUint32(Z,r)}else if(r>0&&r<4294967296){let{target:S,targetView:P,position:Z}=l(10);S[Z++]=215,S[Z++]=255,P.setUint32(Z,u.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),P.setUint32(Z+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return l(0),p(this.onInvalidDate());let{target:S,targetView:P,position:Z}=l(3);S[Z++]=212,S[Z++]=255,S[Z++]=255}else{let{target:S,targetView:P,position:Z}=l(15);S[Z++]=199,S[Z++]=12,S[Z++]=255,P.setUint32(Z,u.getMilliseconds()*1e6),P.setBigInt64(Z+4,BigInt(Math.floor(r)))}}},{pack(u,l,p){if(this.setAsEmptyObject)return l(0),p({});let r=Array.from(u),{target:S,position:P}=l(this.moreTypes?3:0);this.moreTypes&&(S[P++]=212,S[P++]=115,S[P++]=0),p(r)}},{pack(u,l,p){let{target:r,position:S}=l(this.moreTypes?3:0);this.moreTypes&&(r[S++]=212,r[S++]=101,r[S++]=0),p([u.name,u.message,u.cause])}},{pack(u,l,p){let{target:r,position:S}=l(this.moreTypes?3:0);this.moreTypes&&(r[S++]=212,r[S++]=120,r[S++]=0),p([u.source,u.flags])}},{pack(u,l){this.moreTypes?kr(u,16,l):Tr(Ut?Buffer.from(u):new Uint8Array(u),l)}},{pack(u,l){let p=u.constructor;p!==En&&this.moreTypes?kr(u,Ir.indexOf(p.name),l):Tr(u,l)}},{pack(u,l){this.moreTypes?kr(u,17,l):Tr(Ut?Buffer.from(u):new Uint8Array(u),l)}},{pack(u,l){let{target:p,position:r}=l(1);p[r]=193}}];function kr(u,l,p,r){let S=u.byteLength;if(S+1<256){var{target:P,position:Z}=p(4+S);P[Z++]=199,P[Z++]=S+1}else if(S+1<65536){var{target:P,position:Z}=p(5+S);P[Z++]=200,P[Z++]=S+1>>8,P[Z++]=S+1&255}else{var{target:P,position:Z,targetView:be}=p(7+S);P[Z++]=201,be.setUint32(Z,S+1),Z+=4}P[Z++]=116,P[Z++]=l,u.buffer||(u=new Uint8Array(u)),P.set(new Uint8Array(u.buffer,u.byteOffset,u.byteLength),Z)}function Tr(u,l){let p=u.byteLength;var r,S;if(p<256){var{target:r,position:S}=l(p+2);r[S++]=196,r[S++]=p}else if(p<65536){var{target:r,position:S}=l(p+3);r[S++]=197,r[S++]=p>>8,r[S++]=p&255}else{var{target:r,position:S,targetView:P}=l(p+5);r[S++]=198,P.setUint32(S,p),S+=4}r.set(u,S)}function wn(u,l,p,r){let S=u.length;switch(S){case 1:l[p++]=212;break;case 2:l[p++]=213;break;case 4:l[p++]=214;break;case 8:l[p++]=215;break;case 16:l[p++]=216;break;default:S<256?(l[p++]=199,l[p++]=S):S<65536?(l[p++]=200,l[p++]=S>>8,l[p++]=S&255):(l[p++]=201,l[p++]=S>>24,l[p++]=S>>16&255,l[p++]=S>>8&255,l[p++]=S&255)}return l[p++]=r,l.set(u,p),p+=S,p}function Wc(u,l){let p,r=l.length*6,S=u.length-r;for(;p=l.pop();){let P=p.offset,Z=p.id;u.copyWithin(P+r,P,S),r-=6;let be=P+r;u[be++]=214,u[be++]=105,u[be++]=Z>>24,u[be++]=Z>>16&255,u[be++]=Z>>8&255,u[be++]=Z&255,S=P}return u}function xn(u,l,p){if(Ge.length>0){We.setUint32(Ge.position+u,F+p-Ge.position-u),Ge.stringsPosition=F-u;let r=Ge;Ge=null,l(r[0]),l(r[1])}}function Qc(u,l){return u.isCompatible=p=>{let r=!p||(l.lastNamedStructuresLength||0)===p.length;return r||l._mergeStructures(p),r},u}var Sn=new Kt({useRecords:!1}),Or=Sn.pack,Vc=Sn.pack;var{NEVER:Hc,ALWAYS:$c,DECIMAL_ROUND:Gc,DECIMAL_FIT:Kc}=ir,An=512,In=1024,kn=2048;var ct="EF Core Functions";function Tn(u,l){try{He.debug(ct,"Registering EF Core functions..."),Jc(u),Xc(u),Yc(u),Zc(u,l),He.info(ct,"EF Core functions registered successfully")}catch(p){throw He.error(ct,"Failed to register EF Core functions:",p),p}}function Jc(u){u.createFunction({name:"ef_add",xFunc:(l,p,r)=>{if(p===null||r===null)return null;let S=typeof p=="string"?parseFloat(p):p,P=typeof r=="string"?parseFloat(r):r;return(S+P).toString()},arity:2,deterministic:!0}),u.createFunction({name:"ef_multiply",xFunc:(l,p,r)=>{if(p===null||r===null)return null;let S=typeof p=="string"?parseFloat(p):p,P=typeof r=="string"?parseFloat(r):r;return(S*P).toString()},arity:2,deterministic:!0}),u.createFunction({name:"ef_divide",xFunc:(l,p,r)=>{if(p===null||r===null)return null;let S=typeof p=="string"?parseFloat(p):p,P=typeof r=="string"?parseFloat(r):r;return P===0?null:(S/P).toString()},arity:2,deterministic:!0}),u.createFunction({name:"ef_mod",xFunc:(l,p,r)=>{if(p===null||r===null)return null;let S=typeof p=="string"?parseFloat(p):p,P=typeof r=="string"?parseFloat(r):r;return P===0?null:(S%P).toString()},arity:2,deterministic:!0}),u.createFunction({name:"ef_negate",xFunc:(l,p)=>p===null?null:(-(typeof p=="string"?parseFloat(p):p)).toString(),arity:1,deterministic:!0}),He.debug(ct,"Registered 5 arithmetic functions")}function Xc(u){u.createFunction({name:"ef_compare",xFunc:(l,p,r)=>{if(p===null||r===null)return null;let S=typeof p=="string"?parseFloat(p):p,P=typeof r=="string"?parseFloat(r):r;return S<P?-1:S>P?1:0},arity:2,deterministic:!0}),He.debug(ct,"Registered ef_compare function")}function Yc(u){u.createFunction({name:"regexp",xFunc:(l,p,r)=>{if(p===null||r===null)return null;try{return new RegExp(p).test(r)?1:0}catch(S){return He.warn(ct,`Invalid regex pattern: ${p}`,S),null}},arity:2,deterministic:!0}),He.debug(ct,"Registered regexp function")}function Zc(u,l){if(!l||!l.capi){He.error(ct,"sqlite3.capi not available for collation registration");return}try{let p=l.capi.sqlite3_create_collation_v2(u.pointer,"EF_DECIMAL",l.capi.SQLITE_UTF8,null,(r,S,P,Z,be)=>{try{let qe=l.wasm.heap8u(),Le=qe.subarray(P,P+S),Ue=qe.subarray(be,be+Z),_e=new TextDecoder().decode(Le),Se=new TextDecoder().decode(Ue),Oe=parseFloat(_e),Ve=parseFloat(Se);return isNaN(Oe)||isNaN(Ve)?0:Oe<Ve?-1:Oe>Ve?1:0}catch(qe){return He.error(ct,"Error in EF_DECIMAL collation callback:",qe),0}},null);p===l.capi.SQLITE_OK?He.info(ct,"Registered EF_DECIMAL collation successfully"):He.error(ct,`Failed to register EF_DECIMAL collation: rc=${p}`)}catch(p){He.error(ct,"Exception during collation registration:",p)}}var St,ht,Bt=new Map,Lr=new Set,Pr=new Map,qt="SQLite Worker";function Cr(u){if(typeof u=="bigint")return u>=Number.MIN_SAFE_INTEGER&&u<=Number.MAX_SAFE_INTEGER?Number(u):u.toString();if(Array.isArray(u))return u.map(Cr);if(u&&typeof u=="object"&&!(u instanceof Uint8Array)){let l={};for(let p in u)l[p]=Cr(u[p]);return l}return u}(async()=>{try{He.info(qt,"Initializing sqlite-wasm with OPFS SAHPool...");let u=console.warn;console.warn=(...l)=>{let p=l.join(" ");p.includes("Ignoring inability to install OPFS")||p.includes("sqlite3_vfs")||p.includes("Cannot install OPFS")||p.includes("Missing SharedArrayBuffer")||p.includes("COOP/COEP")||u.apply(console,l)},St=await Zr({print:console.log,printErr:console.error,locateFile(l){return l.endsWith(".wasm")?`/_content/SqliteWasmBlazor/${l}`:l}}),console.warn=u,St.capi?.sqlite3_vfs_find("opfs")&&He.debug(qt,"OPFS VFS auto-installed, but we use SAHPool VFS instead"),ht=await St.installOpfsSAHPoolVfs({initialCapacity:6,directory:"/databases",name:"opfs-sahpool",clearOnInit:!1}),He.info(qt,"OPFS SAHPool VFS installed successfully"),He.debug(qt,"Available VFS:",St.capi.sqlite3_vfs_find(null)),self.postMessage({type:"ready"}),He.info(qt,"Ready!")}catch(u){He.error(qt,"Initialization failed:",u),self.postMessage({type:"error",error:u instanceof Error?u.message:"Unknown initialization error"})}})();self.onmessage=async u=>{if("type"in u.data&&u.data.type==="setLogLevel"&&"level"in u.data){He.setLogLevel(u.data.level);return}let{id:l,data:p}=u.data;try{let r=await e_(p);if(r instanceof Uint8Array)self.postMessage({id:l,binary:!0,data:r});else{let S={id:l,data:{success:!0,...r}};self.postMessage(S)}}catch(r){let S={id:l,data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}};self.postMessage(S)}};async function e_(u){let{type:l,database:p,sql:r,parameters:S}=u;switch(l){case"open":return await t_(p);case"execute":return await s_(p,r,S||{});case"close":return await Fn(p);case"exists":return await i_(p);case"delete":return await o_(p);default:throw new Error(`Unknown request type: ${l}`)}}async function t_(u){if(!St||!ht)throw new Error("SQLite not initialized");let l=Bt.get(u);if(!l)try{l=new ht.OpfsSAHPoolDb(`/databases/${u}`),Bt.set(u,l),console.debug(`[SQLite Worker] Opened database: ${u} with OPFS SAHPool`)}catch(p){throw console.error(`[SQLite Worker] Failed to open database ${u}:`,p),p}return Lr.has(u)||(l.exec("PRAGMA journal_mode = WAL;"),l.exec("PRAGMA synchronous = FULL;"),Lr.add(u),console.debug(`[SQLite Worker] Set PRAGMAs for ${u} (journal_mode=WAL, synchronous=FULL)`),Tn(l,St)),{success:!0}}function r_(u,l){if(Pr.has(l))return Pr.get(l);let p=new Map;try{let r=u.exec({sql:`PRAGMA table_info("${l}")`,returnValue:"resultRows",rowMode:"array"});for(let S of r){let P=S[1],Z=S[2];p.set(P,Z.toUpperCase())}Pr.set(l,p)}catch(r){He.warn(qt,`Failed to load schema for table ${l}:`,r)}return p}function n_(u){let l=u.match(/FROM\s+["']?(\w+)["']?/i);return l?l[1]:null}async function s_(u,l,p){let r=Bt.get(u);if(!r)throw new Error(`Database ${u} not open`);try{He.debug(qt,"Executing SQL:",l.substring(0,100));let S=r.exec({sql:l,bind:Object.keys(p).length>0?p:void 0,returnValue:"resultRows",rowMode:"array"});He.debug(qt,"SQL executed successfully, rows:",S?.length||0);let P=[],Z=[];if(S&&S.length>0){let Ue=r.prepare(l);try{let _e=Ue.columnCount,Se=null;if(l.trim().toUpperCase().startsWith("SELECT")){let Oe=n_(l);Oe&&(Se=r_(r,Oe))}for(let Oe=0;Oe<_e;Oe++){let Ve=Ue.getColumnName(Oe);P.push(Ve);let st=Se?.get(Ve),Ce="TEXT";if(st){let Ye=st.toUpperCase();Ye.includes("INT")?Ce="INTEGER":Ye.includes("REAL")||Ye.includes("DOUBLE")||Ye.includes("FLOAT")?Ce="REAL":Ye.includes("BLOB")?Ce="BLOB":Ce="TEXT"}else if(S.length>0&&S[0][Oe]!==null){let Ye=S[0][Oe];typeof Ye=="number"?Ce=Number.isInteger(Ye)?"INTEGER":"REAL":typeof Ye=="bigint"||typeof Ye=="boolean"?Ce="INTEGER":(Ye instanceof Uint8Array||ArrayBuffer.isView(Ye))&&(Ce="BLOB")}Z.push(Ce)}}finally{Ue.finalize()}}let be=0,qe=0;if(l.trim().toUpperCase().startsWith("INSERT")||l.trim().toUpperCase().startsWith("UPDATE")||l.trim().toUpperCase().startsWith("DELETE")||l.trim().toUpperCase().startsWith("CREATE")){let Ue=l.toUpperCase().includes("RETURNING");Ue&&S&&S.length>0?be=S.length:be=r.changes(),qe=r.lastInsertRowId,l.trim().toUpperCase().startsWith("UPDATE")&&(console.log("[SQLite Worker] UPDATE executed:",l),console.log("[SQLite Worker] Parameters:",p),console.log("[SQLite Worker] Has RETURNING:",Ue),console.log("[SQLite Worker] Result rows:",S?.length||0),console.log("[SQLite Worker] Result values:",S),console.log("[SQLite Worker] db.changes():",r.changes()),console.log("[SQLite Worker] Final rowsAffected:",be))}let Le={columnNames:P,columnTypes:Z,typedRows:{types:Z,data:Cr(S||[])},rowsAffected:be,lastInsertId:Number(qe)};return Or(Le)}catch(S){throw console.error("[SQLite Worker] SQL execution failed:",S),console.error(`SQL: ${l}`),S}}async function Fn(u){let l=Bt.get(u);return l&&(l.close(),Bt.delete(u),Lr.delete(u),console.debug(`[SQLite Worker] Closed database: ${u}`)),{success:!0}}async function i_(u){if(!St||!ht)throw new Error("SQLite not initialized");try{if(Bt.has(u))return{rowsAffected:1};let l=`/databases/${u}`;if(ht.getFileNames)return{rowsAffected:(await ht.getFileNames()).includes(l)?1:0};try{return new ht.OpfsSAHPoolDb(l).close(),{rowsAffected:1}}catch{return{rowsAffected:0}}}catch(l){return console.error(`[SQLite Worker] Failed to check database ${u}:`,l),{rowsAffected:0}}}async function o_(u){if(!St||!ht)throw new Error("SQLite not initialized");try{await Fn(u);let l=`/databases/${u}`;return ht.wipeFiles?(await ht.wipeFiles(l),console.debug(`[SQLite Worker] Deleted database: ${u}`)):console.warn("[SQLite Worker] wipeFiles not available, database may persist"),{success:!0}}catch(l){throw console.error(`[SQLite Worker] Failed to delete database ${u}:`,l),l}}
